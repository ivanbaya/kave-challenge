(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?module.exports=t():'function'==typeof define&&define.amd?define(t):e.Popper=t()})(this,function(){'use strict';function e(e){return e&&'[object Function]'==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var o=getComputedStyle(e,null);return t?o[t]:o}function o(e){return'HTML'===e.nodeName?e:e.parentNode||e.host}function n(e){if(!e)return document.body;switch(e.nodeName){case'HTML':case'BODY':return e.ownerDocument.body;case'#document':return e.body;}var i=t(e),r=i.overflow,p=i.overflowX,s=i.overflowY;return/(auto|scroll|overlay)/.test(r+s+p)?e:n(o(e))}function r(e){return 11===e?re:10===e?pe:re||pe}function p(e){if(!e)return document.documentElement;for(var o=r(10)?document.body:null,n=e.offsetParent;n===o&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&'BODY'!==i&&'HTML'!==i?-1!==['TD','TABLE'].indexOf(n.nodeName)&&'static'===t(n,'position')?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function s(e){var t=e.nodeName;return'BODY'!==t&&('HTML'===t||p(e.firstElementChild)===e)}function d(e){return null===e.parentNode?e:d(e.parentNode)}function a(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=o?e:t,i=o?t:e,r=document.createRange();r.setStart(n,0),r.setEnd(i,0);var l=r.commonAncestorContainer;if(e!==l&&t!==l||n.contains(i))return s(l)?l:p(l);var f=d(e);return f.host?a(f.host,t):a(e,d(t).host)}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'top',o='top'===t?'scrollTop':'scrollLeft',n=e.nodeName;if('BODY'===n||'HTML'===n){var i=e.ownerDocument.documentElement,r=e.ownerDocument.scrollingElement||i;return r[o]}return e[o]}function f(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=l(t,'top'),i=l(t,'left'),r=o?-1:1;return e.top+=n*r,e.bottom+=n*r,e.left+=i*r,e.right+=i*r,e}function m(e,t){var o='x'===t?'Left':'Top',n='Left'==o?'Right':'Bottom';return parseFloat(e['border'+o+'Width'],10)+parseFloat(e['border'+n+'Width'],10)}function h(e,t,o,n){return J(t['offset'+e],t['scroll'+e],o['client'+e],o['offset'+e],o['scroll'+e],r(10)?parseInt(o['offset'+e])+parseInt(n['margin'+('Height'===e?'Top':'Left')])+parseInt(n['margin'+('Height'===e?'Bottom':'Right')]):0)}function c(e){var t=e.body,o=e.documentElement,n=r(10)&&getComputedStyle(o);return{height:h('Height',t,o,n),width:h('Width',t,o,n)}}function g(e){return le({},e,{right:e.left+e.width,bottom:e.top+e.height})}function u(e){var o={};try{if(r(10)){o=e.getBoundingClientRect();var n=l(e,'top'),i=l(e,'left');o.top+=n,o.left+=i,o.bottom+=n,o.right+=i}else o=e.getBoundingClientRect()}catch(t){}var p={left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top},s='HTML'===e.nodeName?c(e.ownerDocument):{},d=s.width||e.clientWidth||p.right-p.left,a=s.height||e.clientHeight||p.bottom-p.top,f=e.offsetWidth-d,h=e.offsetHeight-a;if(f||h){var u=t(e);f-=m(u,'x'),h-=m(u,'y'),p.width-=f,p.height-=h}return g(p)}function b(e,o){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],p=r(10),s='HTML'===o.nodeName,d=u(e),a=u(o),l=n(e),m=t(o),h=parseFloat(m.borderTopWidth,10),c=parseFloat(m.borderLeftWidth,10);i&&s&&(a.top=J(a.top,0),a.left=J(a.left,0));var b=g({top:d.top-a.top-h,left:d.left-a.left-c,width:d.width,height:d.height});if(b.marginTop=0,b.marginLeft=0,!p&&s){var y=parseFloat(m.marginTop,10),w=parseFloat(m.marginLeft,10);b.top-=h-y,b.bottom-=h-y,b.left-=c-w,b.right-=c-w,b.marginTop=y,b.marginLeft=w}return(p&&!i?o.contains(l):o===l&&'BODY'!==l.nodeName)&&(b=f(b,o)),b}function y(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=e.ownerDocument.documentElement,n=b(e,o),i=J(o.clientWidth,window.innerWidth||0),r=J(o.clientHeight,window.innerHeight||0),p=t?0:l(o),s=t?0:l(o,'left'),d={top:p-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:i,height:r};return g(d)}function w(e){var n=e.nodeName;return'BODY'===n||'HTML'===n?!1:'fixed'===t(e,'position')||w(o(e))}function E(e){if(!e||!e.parentElement||r())return document.documentElement;for(var o=e.parentElement;o&&'none'===t(o,'transform');)o=o.parentElement;return o||document.documentElement}function v(e,t,i,r){var p=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},d=p?E(e):a(e,t);if('viewport'===r)s=y(d,p);else{var l;'scrollParent'===r?(l=n(o(t)),'BODY'===l.nodeName&&(l=e.ownerDocument.documentElement)):'window'===r?l=e.ownerDocument.documentElement:l=r;var f=b(l,d,p);if('HTML'===l.nodeName&&!w(d)){var m=c(e.ownerDocument),h=m.height,g=m.width;s.top+=f.top-f.marginTop,s.bottom=h+f.top,s.left+=f.left-f.marginLeft,s.right=g+f.left}else s=f}i=i||0;var u='number'==typeof i;return s.left+=u?i:i.left||0,s.top+=u?i:i.top||0,s.right-=u?i:i.right||0,s.bottom-=u?i:i.bottom||0,s}function x(e){var t=e.width,o=e.height;return t*o}function O(e,t,o,n,i){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf('auto'))return e;var p=v(o,n,r,i),s={top:{width:p.width,height:t.top-p.top},right:{width:p.right-t.right,height:p.height},bottom:{width:p.width,height:p.bottom-t.bottom},left:{width:t.left-p.left,height:p.height}},d=Object.keys(s).map(function(e){return le({key:e},s[e],{area:x(s[e])})}).sort(function(e,t){return t.area-e.area}),a=d.filter(function(e){var t=e.width,n=e.height;return t>=o.clientWidth&&n>=o.clientHeight}),l=0<a.length?a[0].key:d[0].key,f=e.split('-')[1];return l+(f?'-'+f:'')}function L(e,t,o){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=n?E(t):a(t,o);return b(o,i,n)}function S(e){var t=getComputedStyle(e),o=parseFloat(t.marginTop)+parseFloat(t.marginBottom),n=parseFloat(t.marginLeft)+parseFloat(t.marginRight),i={width:e.offsetWidth+n,height:e.offsetHeight+o};return i}function T(e){var t={left:'right',right:'left',bottom:'top',top:'bottom'};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function D(e,t,o){o=o.split('-')[0];var n=S(e),i={width:n.width,height:n.height},r=-1!==['right','left'].indexOf(o),p=r?'top':'left',s=r?'left':'top',d=r?'height':'width',a=r?'width':'height';return i[p]=t[p]+t[d]/2-n[d]/2,i[s]=o===s?t[s]-n[a]:t[T(s)],i}function C(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function N(e,t,o){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===o});var n=C(e,function(e){return e[t]===o});return e.indexOf(n)}function P(t,o,n){var i=void 0===n?t:t.slice(0,N(t,'name',n));return i.forEach(function(t){t['function']&&console.warn('`modifier.function` is deprecated, use `modifier.fn`!');var n=t['function']||t.fn;t.enabled&&e(n)&&(o.offsets.popper=g(o.offsets.popper),o.offsets.reference=g(o.offsets.reference),o=n(o,t))}),o}function k(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=O(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=D(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?'fixed':'absolute',e=P(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function W(e,t){return e.some(function(e){var o=e.name,n=e.enabled;return n&&o===t})}function H(e){for(var t=[!1,'ms','Webkit','Moz','O'],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var i=t[n],r=i?''+i+o:e;if('undefined'!=typeof document.body.style[r])return r}return null}function B(){return this.state.isDestroyed=!0,W(this.modifiers,'applyStyle')&&(this.popper.removeAttribute('x-placement'),this.popper.style.position='',this.popper.style.top='',this.popper.style.left='',this.popper.style.right='',this.popper.style.bottom='',this.popper.style.willChange='',this.popper.style[H('transform')]=''),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function A(e){var t=e.ownerDocument;return t?t.defaultView:window}function M(e,t,o,i){var r='BODY'===e.nodeName,p=r?e.ownerDocument.defaultView:e;p.addEventListener(t,o,{passive:!0}),r||M(n(p.parentNode),t,o,i),i.push(p)}function F(e,t,o,i){o.updateBound=i,A(e).addEventListener('resize',o.updateBound,{passive:!0});var r=n(e);return M(r,'scroll',o.updateBound,o.scrollParents),o.scrollElement=r,o.eventsEnabled=!0,o}function I(){this.state.eventsEnabled||(this.state=F(this.reference,this.options,this.state,this.scheduleUpdate))}function R(e,t){return A(e).removeEventListener('resize',t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener('scroll',t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function U(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=R(this.reference,this.state))}function Y(e){return''!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function j(e,t){Object.keys(t).forEach(function(o){var n='';-1!==['width','height','top','right','bottom','left'].indexOf(o)&&Y(t[o])&&(n='px'),e.style[o]=t[o]+n})}function K(e,t){Object.keys(t).forEach(function(o){var n=t[o];!1===n?e.removeAttribute(o):e.setAttribute(o,t[o])})}function q(e,t,o){var n=C(e,function(e){var o=e.name;return o===t}),i=!!n&&e.some(function(e){return e.name===o&&e.enabled&&e.order<n.order});if(!i){var r='`'+t+'`';console.warn('`'+o+'`'+' modifier is required by '+r+' modifier in order to work, be sure to include it before '+r+'!')}return i}function G(e){return'end'===e?'start':'start'===e?'end':e}function V(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=me.indexOf(e),n=me.slice(o+1).concat(me.slice(0,o));return t?n.reverse():n}function z(e,t,o,n){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+i[1],p=i[2];if(!r)return e;if(0===p.indexOf('%')){var s;switch(p){case'%p':s=o;break;case'%':case'%r':default:s=n;}var d=g(s);return d[t]/100*r}if('vh'===p||'vw'===p){var a;return a='vh'===p?J(document.documentElement.clientHeight,window.innerHeight||0):J(document.documentElement.clientWidth,window.innerWidth||0),a/100*r}return r}function _(e,t,o,n){var i=[0,0],r=-1!==['right','left'].indexOf(n),p=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=p.indexOf(C(p,function(e){return-1!==e.search(/,|\s/)}));p[s]&&-1===p[s].indexOf(',')&&console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');var d=/\s*,\s*|\s+/,a=-1===s?[p]:[p.slice(0,s).concat([p[s].split(d)[0]]),[p[s].split(d)[1]].concat(p.slice(s+1))];return a=a.map(function(e,n){var i=(1===n?!r:r)?'height':'width',p=!1;return e.reduce(function(e,t){return''===e[e.length-1]&&-1!==['+','-'].indexOf(t)?(e[e.length-1]=t,p=!0,e):p?(e[e.length-1]+=t,p=!1,e):e.concat(t)},[]).map(function(e){return z(e,i,t,o)})}),a.forEach(function(e,t){e.forEach(function(o,n){Y(o)&&(i[t]+=o*('-'===e[n-1]?-1:1))})}),i}function X(e,t){var o,n=t.offset,i=e.placement,r=e.offsets,p=r.popper,s=r.reference,d=i.split('-')[0];return o=Y(+n)?[+n,0]:_(n,p,s,d),'left'===d?(p.top+=o[0],p.left-=o[1]):'right'===d?(p.top+=o[0],p.left+=o[1]):'top'===d?(p.left+=o[0],p.top-=o[1]):'bottom'===d&&(p.left+=o[0],p.top+=o[1]),e.popper=p,e}for(var Q=Math.min,Z=Math.round,$=Math.floor,J=Math.max,ee='undefined'!=typeof window&&'undefined'!=typeof document,te=['Edge','Trident','Firefox'],oe=0,ne=0;ne<te.length;ne+=1)if(ee&&0<=navigator.userAgent.indexOf(te[ne])){oe=1;break}var i=ee&&window.Promise,ie=i?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},oe))}},re=ee&&!!(window.MSInputMethodContext&&document.documentMode),pe=ee&&/MSIE 10/.test(navigator.userAgent),se=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},de=function(){function e(e,t){for(var o,n=0;n<t.length;n++)o=t[n],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),ae=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},le=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},fe=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'],me=fe.slice(3),he={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'},ce=function(){function t(o,n){var i=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};se(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=ie(this.update.bind(this)),this.options=le({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=o&&o.jquery?o[0]:o,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(le({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){i.options.modifiers[e]=le({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return le({name:e},i.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)}),this.update();var p=this.options.eventsEnabled;p&&this.enableEventListeners(),this.state.eventsEnabled=p}return de(t,[{key:'update',value:function(){return k.call(this)}},{key:'destroy',value:function(){return B.call(this)}},{key:'enableEventListeners',value:function(){return I.call(this)}},{key:'disableEventListeners',value:function(){return U.call(this)}}]),t}();return ce.Utils=('undefined'==typeof window?global:window).PopperUtils,ce.placements=fe,ce.Defaults={placement:'bottom',positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split('-')[0],n=t.split('-')[1];if(n){var i=e.offsets,r=i.reference,p=i.popper,s=-1!==['bottom','top'].indexOf(o),d=s?'left':'top',a=s?'width':'height',l={start:ae({},d,r[d]),end:ae({},d,r[d]+r[a]-p[a])};e.offsets.popper=le({},p,l[n])}return e}},offset:{order:200,enabled:!0,fn:X,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||p(e.instance.popper);e.instance.reference===o&&(o=p(o));var n=H('transform'),i=e.instance.popper.style,r=i.top,s=i.left,d=i[n];i.top='',i.left='',i[n]='';var a=v(e.instance.popper,e.instance.reference,t.padding,o,e.positionFixed);i.top=r,i.left=s,i[n]=d,t.boundaries=a;var l=t.priority,f=e.offsets.popper,m={primary:function(e){var o=f[e];return f[e]<a[e]&&!t.escapeWithReference&&(o=J(f[e],a[e])),ae({},e,o)},secondary:function(e){var o='right'===e?'left':'top',n=f[o];return f[e]>a[e]&&!t.escapeWithReference&&(n=Q(f[o],a[e]-('right'===e?f.width:f.height))),ae({},o,n)}};return l.forEach(function(e){var t=-1===['left','top'].indexOf(e)?'secondary':'primary';f=le({},f,m[t](e))}),e.offsets.popper=f,e},priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,n=t.reference,i=e.placement.split('-')[0],r=$,p=-1!==['top','bottom'].indexOf(i),s=p?'right':'bottom',d=p?'left':'top',a=p?'width':'height';return o[s]<r(n[d])&&(e.offsets.popper[d]=r(n[d])-o[a]),o[d]>r(n[s])&&(e.offsets.popper[d]=r(n[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,o){var n;if(!q(e.instance.modifiers,'arrow','keepTogether'))return e;var i=o.element;if('string'==typeof i){if(i=e.instance.popper.querySelector(i),!i)return e;}else if(!e.instance.popper.contains(i))return console.warn('WARNING: `arrow.element` must be child of its popper element!'),e;var r=e.placement.split('-')[0],p=e.offsets,s=p.popper,d=p.reference,a=-1!==['left','right'].indexOf(r),l=a?'height':'width',f=a?'Top':'Left',m=f.toLowerCase(),h=a?'left':'top',c=a?'bottom':'right',u=S(i)[l];d[c]-u<s[m]&&(e.offsets.popper[m]-=s[m]-(d[c]-u)),d[m]+u>s[c]&&(e.offsets.popper[m]+=d[m]+u-s[c]),e.offsets.popper=g(e.offsets.popper);var b=d[m]+d[l]/2-u/2,y=t(e.instance.popper),w=parseFloat(y['margin'+f],10),E=parseFloat(y['border'+f+'Width'],10),v=b-e.offsets.popper[m]-w-E;return v=J(Q(s[l]-u,v),0),e.arrowElement=i,e.offsets.arrow=(n={},ae(n,m,Z(v)),ae(n,h,''),n),e},element:'[x-arrow]'},flip:{order:600,enabled:!0,fn:function(e,t){if(W(e.instance.modifiers,'inner'))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var o=v(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split('-')[0],i=T(n),r=e.placement.split('-')[1]||'',p=[];switch(t.behavior){case he.FLIP:p=[n,i];break;case he.CLOCKWISE:p=V(n);break;case he.COUNTERCLOCKWISE:p=V(n,!0);break;default:p=t.behavior;}return p.forEach(function(s,d){if(n!==s||p.length===d+1)return e;n=e.placement.split('-')[0],i=T(n);var a=e.offsets.popper,l=e.offsets.reference,f=$,m='left'===n&&f(a.right)>f(l.left)||'right'===n&&f(a.left)<f(l.right)||'top'===n&&f(a.bottom)>f(l.top)||'bottom'===n&&f(a.top)<f(l.bottom),h=f(a.left)<f(o.left),c=f(a.right)>f(o.right),g=f(a.top)<f(o.top),u=f(a.bottom)>f(o.bottom),b='left'===n&&h||'right'===n&&c||'top'===n&&g||'bottom'===n&&u,y=-1!==['top','bottom'].indexOf(n),w=!!t.flipVariations&&(y&&'start'===r&&h||y&&'end'===r&&c||!y&&'start'===r&&g||!y&&'end'===r&&u);(m||b||w)&&(e.flipped=!0,(m||b)&&(n=p[d+1]),w&&(r=G(r)),e.placement=n+(r?'-'+r:''),e.offsets.popper=le({},e.offsets.popper,D(e.instance.popper,e.offsets.reference,e.placement)),e=P(e.instance.modifiers,e,'flip'))}),e},behavior:'flip',padding:5,boundariesElement:'viewport'},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split('-')[0],n=e.offsets,i=n.popper,r=n.reference,p=-1!==['left','right'].indexOf(o),s=-1===['top','left'].indexOf(o);return i[p?'left':'top']=r[o]-(s?i[p?'width':'height']:0),e.placement=T(t),e.offsets.popper=g(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!q(e.instance.modifiers,'hide','preventOverflow'))return e;var t=e.offsets.reference,o=C(e.instance.modifiers,function(e){return'preventOverflow'===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes['x-out-of-boundaries']=''}else{if(!1===e.hide)return e;e.hide=!1,e.attributes['x-out-of-boundaries']=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,n=t.y,i=e.offsets.popper,r=C(e.instance.modifiers,function(e){return'applyStyle'===e.name}).gpuAcceleration;void 0!==r&&console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');var s,d,a=void 0===r?t.gpuAcceleration:r,l=p(e.instance.popper),f=u(l),m={position:i.position},h={left:$(i.left),top:Z(i.top),bottom:Z(i.bottom),right:$(i.right)},c='bottom'===o?'top':'bottom',g='right'===n?'left':'right',b=H('transform');if(d='bottom'==c?'HTML'===l.nodeName?-l.clientHeight+h.bottom:-f.height+h.bottom:h.top,s='right'==g?'HTML'===l.nodeName?-l.clientWidth+h.right:-f.width+h.right:h.left,a&&b)m[b]='translate3d('+s+'px, '+d+'px, 0)',m[c]=0,m[g]=0,m.willChange='transform';else{var y='bottom'==c?-1:1,w='right'==g?-1:1;m[c]=d*y,m[g]=s*w,m.willChange=c+', '+g}var E={"x-placement":e.placement};return e.attributes=le({},E,e.attributes),e.styles=le({},m,e.styles),e.arrowStyles=le({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:'bottom',y:'right'},applyStyle:{order:900,enabled:!0,fn:function(e){return j(e.instance.popper,e.styles),K(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&j(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,n,i){var r=L(i,t,e,o.positionFixed),p=O(o.placement,r,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute('x-placement',p),j(t,{position:o.positionFixed?'fixed':'absolute'}),o},gpuAcceleration:void 0}}},ce});/*!
  * Bootstrap v4.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e((t=t||self).bootstrap={},t.jQuery,t.Popper)}(this,function(t,g,u){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function l(o){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.forEach(function(t){var e,n,i;e=o,i=r[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i})}return o}g=g&&g.hasOwnProperty("default")?g.default:g,u=u&&u.hasOwnProperty("default")?u.default:u;var e="transitionend";function n(t){var e=this,n=!1;return g(this).one(_.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||_.triggerTransitionEnd(e)},t),this}var _={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=g(t).css("transition-duration"),n=g(t).css("transition-delay"),i=parseFloat(e),o=parseFloat(n);return i||o?(e=e.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(e)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){g(t).trigger(e)},supportsTransitionEnd:function(){return Boolean(e)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var o=n[i],r=e[i],s=r&&_.isElement(r)?"element":(a=r,{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(o).test(s))throw new Error(t.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+o+'".')}var a},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?_.findShadowRoot(t.parentNode):null;var e=t.getRootNode();return e instanceof ShadowRoot?e:null}};g.fn.emulateTransitionEnd=n,g.event.special[_.TRANSITION_END]={bindType:e,delegateType:e,handle:function(t){if(g(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var o="alert",r="bs.alert",a="."+r,c=g.fn[o],h={CLOSE:"close"+a,CLOSED:"closed"+a,CLICK_DATA_API:"click"+a+".data-api"},f="alert",d="fade",m="show",p=function(){function i(t){this._element=t}var t=i.prototype;return t.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){g.removeData(this._element,r),this._element=null},t._getRootElement=function(t){var e=_.getSelectorFromElement(t),n=!1;return e&&(n=document.querySelector(e)),n||(n=g(t).closest("."+f)[0]),n},t._triggerCloseEvent=function(t){var e=g.Event(h.CLOSE);return g(t).trigger(e),e},t._removeElement=function(e){var n=this;if(g(e).removeClass(m),g(e).hasClass(d)){var t=_.getTransitionDurationFromElement(e);g(e).one(_.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(t)}else this._destroyElement(e)},t._destroyElement=function(t){g(t).detach().trigger(h.CLOSED).remove()},i._jQueryInterface=function(n){return this.each(function(){var t=g(this),e=t.data(r);e||(e=new i(this),t.data(r,e)),"close"===n&&e[n](this)})},i._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),i}();g(document).on(h.CLICK_DATA_API,'[data-dismiss="alert"]',p._handleDismiss(new p)),g.fn[o]=p._jQueryInterface,g.fn[o].Constructor=p,g.fn[o].noConflict=function(){return g.fn[o]=c,p._jQueryInterface};var v="button",y="bs.button",E="."+y,C=".data-api",T=g.fn[v],S="active",b="btn",I="focus",D='[data-toggle^="button"]',w='[data-toggle="buttons"]',A='input:not([type="hidden"])',N=".active",O=".btn",k={CLICK_DATA_API:"click"+E+C,FOCUS_BLUR_DATA_API:"focus"+E+C+" blur"+E+C},P=function(){function n(t){this._element=t}var t=n.prototype;return t.toggle=function(){var t=!0,e=!0,n=g(this._element).closest(w)[0];if(n){var i=this._element.querySelector(A);if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(S))t=!1;else{var o=n.querySelector(N);o&&g(o).removeClass(S)}if(t){if(i.hasAttribute("disabled")||n.hasAttribute("disabled")||i.classList.contains("disabled")||n.classList.contains("disabled"))return;i.checked=!this._element.classList.contains(S),g(i).trigger("change")}i.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(S)),t&&g(this._element).toggleClass(S)},t.dispose=function(){g.removeData(this._element,y),this._element=null},n._jQueryInterface=function(e){return this.each(function(){var t=g(this).data(y);t||(t=new n(this),g(this).data(y,t)),"toggle"===e&&t[e]()})},s(n,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),n}();g(document).on(k.CLICK_DATA_API,D,function(t){t.preventDefault();var e=t.target;g(e).hasClass(b)||(e=g(e).closest(O)),P._jQueryInterface.call(g(e),"toggle")}).on(k.FOCUS_BLUR_DATA_API,D,function(t){var e=g(t.target).closest(O)[0];g(e).toggleClass(I,/^focus(in)?$/.test(t.type))}),g.fn[v]=P._jQueryInterface,g.fn[v].Constructor=P,g.fn[v].noConflict=function(){return g.fn[v]=T,P._jQueryInterface};var L="carousel",j="bs.carousel",H="."+j,R=".data-api",x=g.fn[L],F={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},U={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},W="next",q="prev",M="left",K="right",Q={SLIDE:"slide"+H,SLID:"slid"+H,KEYDOWN:"keydown"+H,MOUSEENTER:"mouseenter"+H,MOUSELEAVE:"mouseleave"+H,TOUCHSTART:"touchstart"+H,TOUCHMOVE:"touchmove"+H,TOUCHEND:"touchend"+H,POINTERDOWN:"pointerdown"+H,POINTERUP:"pointerup"+H,DRAG_START:"dragstart"+H,LOAD_DATA_API:"load"+H+R,CLICK_DATA_API:"click"+H+R},B="carousel",V="active",Y="slide",z="carousel-item-right",X="carousel-item-left",$="carousel-item-next",G="carousel-item-prev",J="pointer-event",Z=".active",tt=".active.carousel-item",et=".carousel-item",nt=".carousel-item img",it=".carousel-item-next, .carousel-item-prev",ot=".carousel-indicators",rt="[data-slide], [data-slide-to]",st='[data-ride="carousel"]',at={TOUCH:"touch",PEN:"pen"},lt=function(){function r(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(ot),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var t=r.prototype;return t.next=function(){this._isSliding||this._slide(W)},t.nextWhenVisible=function(){!document.hidden&&g(this._element).is(":visible")&&"hidden"!==g(this._element).css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(q)},t.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(it)&&(_.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=this._element.querySelector(tt);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)g(this._element).one(Q.SLID,function(){return e.to(t)});else{if(n===t)return this.pause(),void this.cycle();var i=n<t?W:q;this._slide(i,this._items[t])}},t.dispose=function(){g(this._element).off(H),g.removeData(this._element,j),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=l({},F,t),_.typeCheckConfig(L,t,U),t},t._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;0<e&&this.prev(),e<0&&this.next()}},t._addEventListeners=function(){var e=this;this._config.keyboard&&g(this._element).on(Q.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&g(this._element).on(Q.MOUSEENTER,function(t){return e.pause(t)}).on(Q.MOUSELEAVE,function(t){return e.cycle(t)}),this._config.touch&&this._addTouchEventListeners()},t._addTouchEventListeners=function(){var n=this;if(this._touchSupported){var e=function(t){n._pointerEvent&&at[t.originalEvent.pointerType.toUpperCase()]?n.touchStartX=t.originalEvent.clientX:n._pointerEvent||(n.touchStartX=t.originalEvent.touches[0].clientX)},i=function(t){n._pointerEvent&&at[t.originalEvent.pointerType.toUpperCase()]&&(n.touchDeltaX=t.originalEvent.clientX-n.touchStartX),n._handleSwipe(),"hover"===n._config.pause&&(n.pause(),n.touchTimeout&&clearTimeout(n.touchTimeout),n.touchTimeout=setTimeout(function(t){return n.cycle(t)},500+n._config.interval))};g(this._element.querySelectorAll(nt)).on(Q.DRAG_START,function(t){return t.preventDefault()}),this._pointerEvent?(g(this._element).on(Q.POINTERDOWN,function(t){return e(t)}),g(this._element).on(Q.POINTERUP,function(t){return i(t)}),this._element.classList.add(J)):(g(this._element).on(Q.TOUCHSTART,function(t){return e(t)}),g(this._element).on(Q.TOUCHMOVE,function(t){var e;(e=t).originalEvent.touches&&1<e.originalEvent.touches.length?n.touchDeltaX=0:n.touchDeltaX=e.originalEvent.touches[0].clientX-n.touchStartX}),g(this._element).on(Q.TOUCHEND,function(t){return i(t)}))}},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},t._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(et)):[],this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===W,i=t===q,o=this._getItemIndex(e),r=this._items.length-1;if((i&&0===o||n&&o===r)&&!this._config.wrap)return e;var s=(o+(t===q?-1:1))%this._items.length;return-1===s?this._items[this._items.length-1]:this._items[s]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),i=this._getItemIndex(this._element.querySelector(tt)),o=g.Event(Q.SLIDE,{relatedTarget:t,direction:e,from:i,to:n});return g(this._element).trigger(o),o},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(Z));g(e).removeClass(V);var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&g(n).addClass(V)}},t._slide=function(t,e){var n,i,o,r=this,s=this._element.querySelector(tt),a=this._getItemIndex(s),l=e||s&&this._getItemByDirection(t,s),c=this._getItemIndex(l),h=Boolean(this._interval);if(o=t===W?(n=X,i=$,M):(n=z,i=G,K),l&&g(l).hasClass(V))this._isSliding=!1;else if(!this._triggerSlideEvent(l,o).isDefaultPrevented()&&s&&l){this._isSliding=!0,h&&this.pause(),this._setActiveIndicatorElement(l);var u=g.Event(Q.SLID,{relatedTarget:l,direction:o,from:a,to:c});if(g(this._element).hasClass(Y)){g(l).addClass(i),_.reflow(l),g(s).addClass(n),g(l).addClass(n);var f=parseInt(l.getAttribute("data-interval"),10);this._config.interval=f?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,f):this._config.defaultInterval||this._config.interval;var d=_.getTransitionDurationFromElement(s);g(s).one(_.TRANSITION_END,function(){g(l).removeClass(n+" "+i).addClass(V),g(s).removeClass(V+" "+i+" "+n),r._isSliding=!1,setTimeout(function(){return g(r._element).trigger(u)},0)}).emulateTransitionEnd(d)}else g(s).removeClass(V),g(l).addClass(V),this._isSliding=!1,g(this._element).trigger(u);h&&this.cycle()}},r._jQueryInterface=function(i){return this.each(function(){var t=g(this).data(j),e=l({},F,g(this).data());"object"==typeof i&&(e=l({},e,i));var n="string"==typeof i?i:e.slide;if(t||(t=new r(this,e),g(this).data(j,t)),"number"==typeof i)t.to(i);else if("string"==typeof n){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}else e.interval&&e.ride&&(t.pause(),t.cycle())})},r._dataApiClickHandler=function(t){var e=_.getSelectorFromElement(this);if(e){var n=g(e)[0];if(n&&g(n).hasClass(B)){var i=l({},g(n).data(),g(this).data()),o=this.getAttribute("data-slide-to");o&&(i.interval=!1),r._jQueryInterface.call(g(n),i),o&&g(n).data(j).to(o),t.preventDefault()}}},s(r,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return F}}]),r}();g(document).on(Q.CLICK_DATA_API,rt,lt._dataApiClickHandler),g(window).on(Q.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(st)),e=0,n=t.length;e<n;e++){var i=g(t[e]);lt._jQueryInterface.call(i,i.data())}}),g.fn[L]=lt._jQueryInterface,g.fn[L].Constructor=lt,g.fn[L].noConflict=function(){return g.fn[L]=x,lt._jQueryInterface};var ct="collapse",ht="bs.collapse",ut="."+ht,ft=g.fn[ct],dt={toggle:!0,parent:""},gt={toggle:"boolean",parent:"(string|element)"},_t={SHOW:"show"+ut,SHOWN:"shown"+ut,HIDE:"hide"+ut,HIDDEN:"hidden"+ut,CLICK_DATA_API:"click"+ut+".data-api"},mt="show",pt="collapse",vt="collapsing",yt="collapsed",Et="width",Ct="height",Tt=".show, .collapsing",St='[data-toggle="collapse"]',bt=function(){function a(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(St)),i=0,o=n.length;i<o;i++){var r=n[i],s=_.getSelectorFromElement(r),a=[].slice.call(document.querySelectorAll(s)).filter(function(t){return t===e});null!==s&&0<a.length&&(this._selector=s,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=a.prototype;return t.toggle=function(){g(this._element).hasClass(mt)?this.hide():this.show()},t.show=function(){var t,e,n=this;if(!this._isTransitioning&&!g(this._element).hasClass(mt)&&(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(Tt)).filter(function(t){return"string"==typeof n._config.parent?t.getAttribute("data-parent")===n._config.parent:t.classList.contains(pt)})).length&&(t=null),!(t&&(e=g(t).not(this._selector).data(ht))&&e._isTransitioning))){var i=g.Event(_t.SHOW);if(g(this._element).trigger(i),!i.isDefaultPrevented()){t&&(a._jQueryInterface.call(g(t).not(this._selector),"hide"),e||g(t).data(ht,null));var o=this._getDimension();g(this._element).removeClass(pt).addClass(vt),this._element.style[o]=0,this._triggerArray.length&&g(this._triggerArray).removeClass(yt).attr("aria-expanded",!0),this.setTransitioning(!0);var r="scroll"+(o[0].toUpperCase()+o.slice(1)),s=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,function(){g(n._element).removeClass(vt).addClass(pt).addClass(mt),n._element.style[o]="",n.setTransitioning(!1),g(n._element).trigger(_t.SHOWN)}).emulateTransitionEnd(s),this._element.style[o]=this._element[r]+"px"}}},t.hide=function(){var t=this;if(!this._isTransitioning&&g(this._element).hasClass(mt)){var e=g.Event(_t.HIDE);if(g(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",_.reflow(this._element),g(this._element).addClass(vt).removeClass(pt).removeClass(mt);var i=this._triggerArray.length;if(0<i)for(var o=0;o<i;o++){var r=this._triggerArray[o],s=_.getSelectorFromElement(r);if(null!==s)g([].slice.call(document.querySelectorAll(s))).hasClass(mt)||g(r).addClass(yt).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[n]="";var a=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,function(){t.setTransitioning(!1),g(t._element).removeClass(vt).addClass(pt).trigger(_t.HIDDEN)}).emulateTransitionEnd(a)}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){g.removeData(this._element,ht),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=l({},dt,t)).toggle=Boolean(t.toggle),_.typeCheckConfig(ct,t,gt),t},t._getDimension=function(){return g(this._element).hasClass(Et)?Et:Ct},t._getParent=function(){var t,n=this;_.isElement(this._config.parent)?(t=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',i=[].slice.call(t.querySelectorAll(e));return g(i).each(function(t,e){n._addAriaAndCollapsedClass(a._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){var n=g(t).hasClass(mt);e.length&&g(e).toggleClass(yt,!n).attr("aria-expanded",n)},a._getTargetFromElement=function(t){var e=_.getSelectorFromElement(t);return e?document.querySelector(e):null},a._jQueryInterface=function(i){return this.each(function(){var t=g(this),e=t.data(ht),n=l({},dt,t.data(),"object"==typeof i&&i?i:{});if(!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||(e=new a(this,n),t.data(ht,e)),"string"==typeof i){if("undefined"==typeof e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},s(a,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return dt}}]),a}();g(document).on(_t.CLICK_DATA_API,St,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=g(this),e=_.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(e));g(i).each(function(){var t=g(this),e=t.data(ht)?"toggle":n.data();bt._jQueryInterface.call(t,e)})}),g.fn[ct]=bt._jQueryInterface,g.fn[ct].Constructor=bt,g.fn[ct].noConflict=function(){return g.fn[ct]=ft,bt._jQueryInterface};var It="dropdown",Dt="bs.dropdown",wt="."+Dt,At=".data-api",Nt=g.fn[It],Ot=new RegExp("38|40|27"),kt={HIDE:"hide"+wt,HIDDEN:"hidden"+wt,SHOW:"show"+wt,SHOWN:"shown"+wt,CLICK:"click"+wt,CLICK_DATA_API:"click"+wt+At,KEYDOWN_DATA_API:"keydown"+wt+At,KEYUP_DATA_API:"keyup"+wt+At},Pt="disabled",Lt="show",jt="dropup",Ht="dropright",Rt="dropleft",xt="dropdown-menu-right",Ft="position-static",Ut='[data-toggle="dropdown"]',Wt=".dropdown form",qt=".dropdown-menu",Mt=".navbar-nav",Kt=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Qt="top-start",Bt="top-end",Vt="bottom-start",Yt="bottom-end",zt="right-start",Xt="left-start",$t={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},Gt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},Jt=function(){function c(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=c.prototype;return t.toggle=function(){if(!this._element.disabled&&!g(this._element).hasClass(Pt)){var t=c._getParentFromElement(this._element),e=g(this._menu).hasClass(Lt);if(c._clearMenus(),!e){var n={relatedTarget:this._element},i=g.Event(kt.SHOW,n);if(g(t).trigger(i),!i.isDefaultPrevented()){if(!this._inNavbar){if("undefined"==typeof u)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var o=this._element;"parent"===this._config.reference?o=t:_.isElement(this._config.reference)&&(o=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(o=this._config.reference[0])),"scrollParent"!==this._config.boundary&&g(t).addClass(Ft),this._popper=new u(o,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===g(t).closest(Mt).length&&g(document.body).children().on("mouseover",null,g.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),g(this._menu).toggleClass(Lt),g(t).toggleClass(Lt).trigger(g.Event(kt.SHOWN,n))}}}},t.show=function(){if(!(this._element.disabled||g(this._element).hasClass(Pt)||g(this._menu).hasClass(Lt))){var t={relatedTarget:this._element},e=g.Event(kt.SHOW,t),n=c._getParentFromElement(this._element);g(n).trigger(e),e.isDefaultPrevented()||(g(this._menu).toggleClass(Lt),g(n).toggleClass(Lt).trigger(g.Event(kt.SHOWN,t)))}},t.hide=function(){if(!this._element.disabled&&!g(this._element).hasClass(Pt)&&g(this._menu).hasClass(Lt)){var t={relatedTarget:this._element},e=g.Event(kt.HIDE,t),n=c._getParentFromElement(this._element);g(n).trigger(e),e.isDefaultPrevented()||(g(this._menu).toggleClass(Lt),g(n).toggleClass(Lt).trigger(g.Event(kt.HIDDEN,t)))}},t.dispose=function(){g.removeData(this._element,Dt),g(this._element).off(wt),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;g(this._element).on(kt.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){return t=l({},this.constructor.Default,g(this._element).data(),t),_.typeCheckConfig(It,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=c._getParentFromElement(this._element);t&&(this._menu=t.querySelector(qt))}return this._menu},t._getPlacement=function(){var t=g(this._element.parentNode),e=Vt;return t.hasClass(jt)?(e=Qt,g(this._menu).hasClass(xt)&&(e=Bt)):t.hasClass(Ht)?e=zt:t.hasClass(Rt)?e=Xt:g(this._menu).hasClass(xt)&&(e=Yt),e},t._detectNavbar=function(){return 0<g(this._element).closest(".navbar").length},t._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},t._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),t},c._jQueryInterface=function(e){return this.each(function(){var t=g(this).data(Dt);if(t||(t=new c(this,"object"==typeof e?e:null),g(this).data(Dt,t)),"string"==typeof e){if("undefined"==typeof t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},c._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var e=[].slice.call(document.querySelectorAll(Ut)),n=0,i=e.length;n<i;n++){var o=c._getParentFromElement(e[n]),r=g(e[n]).data(Dt),s={relatedTarget:e[n]};if(t&&"click"===t.type&&(s.clickEvent=t),r){var a=r._menu;if(g(o).hasClass(Lt)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&g.contains(o,t.target))){var l=g.Event(kt.HIDE,s);g(o).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&g(document.body).children().off("mouseover",null,g.noop),e[n].setAttribute("aria-expanded","false"),g(a).removeClass(Lt),g(o).removeClass(Lt).trigger(g.Event(kt.HIDDEN,s)))}}}},c._getParentFromElement=function(t){var e,n=_.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},c._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||g(t.target).closest(qt).length)):Ot.test(t.which))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!g(this).hasClass(Pt))){var e=c._getParentFromElement(this),n=g(e).hasClass(Lt);if(n&&(!n||27!==t.which&&32!==t.which)){var i=[].slice.call(e.querySelectorAll(Kt));if(0!==i.length){var o=i.indexOf(t.target);38===t.which&&0<o&&o--,40===t.which&&o<i.length-1&&o++,o<0&&(o=0),i[o].focus()}}else{if(27===t.which){var r=e.querySelector(Ut);g(r).trigger("focus")}g(this).trigger("click")}}},s(c,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return $t}},{key:"DefaultType",get:function(){return Gt}}]),c}();g(document).on(kt.KEYDOWN_DATA_API,Ut,Jt._dataApiKeydownHandler).on(kt.KEYDOWN_DATA_API,qt,Jt._dataApiKeydownHandler).on(kt.CLICK_DATA_API+" "+kt.KEYUP_DATA_API,Jt._clearMenus).on(kt.CLICK_DATA_API,Ut,function(t){t.preventDefault(),t.stopPropagation(),Jt._jQueryInterface.call(g(this),"toggle")}).on(kt.CLICK_DATA_API,Wt,function(t){t.stopPropagation()}),g.fn[It]=Jt._jQueryInterface,g.fn[It].Constructor=Jt,g.fn[It].noConflict=function(){return g.fn[It]=Nt,Jt._jQueryInterface};var Zt="modal",te="bs.modal",ee="."+te,ne=g.fn[Zt],ie={backdrop:!0,keyboard:!0,focus:!0,show:!0},oe={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},re={HIDE:"hide"+ee,HIDDEN:"hidden"+ee,SHOW:"show"+ee,SHOWN:"shown"+ee,FOCUSIN:"focusin"+ee,RESIZE:"resize"+ee,CLICK_DISMISS:"click.dismiss"+ee,KEYDOWN_DISMISS:"keydown.dismiss"+ee,MOUSEUP_DISMISS:"mouseup.dismiss"+ee,MOUSEDOWN_DISMISS:"mousedown.dismiss"+ee,CLICK_DATA_API:"click"+ee+".data-api"},se="modal-dialog-scrollable",ae="modal-scrollbar-measure",le="modal-backdrop",ce="modal-open",he="fade",ue="show",fe=".modal-dialog",de=".modal-body",ge='[data-toggle="modal"]',_e='[data-dismiss="modal"]',me=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",pe=".sticky-top",ve=function(){function o(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(fe),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var t=o.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){g(this._element).hasClass(he)&&(this._isTransitioning=!0);var n=g.Event(re.SHOW,{relatedTarget:t});g(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),g(this._element).on(re.CLICK_DISMISS,_e,function(t){return e.hide(t)}),g(this._dialog).on(re.MOUSEDOWN_DISMISS,function(){g(e._element).one(re.MOUSEUP_DISMISS,function(t){g(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=g.Event(re.HIDE);if(g(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var i=g(this._element).hasClass(he);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),g(document).off(re.FOCUSIN),g(this._element).removeClass(ue),g(this._element).off(re.CLICK_DISMISS),g(this._dialog).off(re.MOUSEDOWN_DISMISS),i){var o=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(o)}else this._hideModal()}}},t.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return g(t).off(ee)}),g(document).off(re.FOCUSIN),g.removeData(this._element,te),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=l({},ie,t),_.typeCheckConfig(Zt,t,oe),t},t._showElement=function(t){var e=this,n=g(this._element).hasClass(he);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),g(this._dialog).hasClass(se)?this._dialog.querySelector(de).scrollTop=0:this._element.scrollTop=0,n&&_.reflow(this._element),g(this._element).addClass(ue),this._config.focus&&this._enforceFocus();var i=g.Event(re.SHOWN,{relatedTarget:t}),o=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,g(e._element).trigger(i)};if(n){var r=_.getTransitionDurationFromElement(this._dialog);g(this._dialog).one(_.TRANSITION_END,o).emulateTransitionEnd(r)}else o()},t._enforceFocus=function(){var e=this;g(document).off(re.FOCUSIN).on(re.FOCUSIN,function(t){document!==t.target&&e._element!==t.target&&0===g(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?g(this._element).on(re.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):this._isShown||g(this._element).off(re.KEYDOWN_DISMISS)},t._setResizeEvent=function(){var e=this;this._isShown?g(window).on(re.RESIZE,function(t){return e.handleUpdate(t)}):g(window).off(re.RESIZE)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){g(document.body).removeClass(ce),t._resetAdjustments(),t._resetScrollbar(),g(t._element).trigger(re.HIDDEN)})},t._removeBackdrop=function(){this._backdrop&&(g(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,n=g(this._element).hasClass(he)?he:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=le,n&&this._backdrop.classList.add(n),g(this._backdrop).appendTo(document.body),g(this._element).on(re.CLICK_DISMISS,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())}),n&&_.reflow(this._backdrop),g(this._backdrop).addClass(ue),!t)return;if(!n)return void t();var i=_.getTransitionDurationFromElement(this._backdrop);g(this._backdrop).one(_.TRANSITION_END,t).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){g(this._backdrop).removeClass(ue);var o=function(){e._removeBackdrop(),t&&t()};if(g(this._element).hasClass(he)){var r=_.getTransitionDurationFromElement(this._backdrop);g(this._backdrop).one(_.TRANSITION_END,o).emulateTransitionEnd(r)}else o()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var o=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(me)),e=[].slice.call(document.querySelectorAll(pe));g(t).each(function(t,e){var n=e.style.paddingRight,i=g(e).css("padding-right");g(e).data("padding-right",n).css("padding-right",parseFloat(i)+o._scrollbarWidth+"px")}),g(e).each(function(t,e){var n=e.style.marginRight,i=g(e).css("margin-right");g(e).data("margin-right",n).css("margin-right",parseFloat(i)-o._scrollbarWidth+"px")});var n=document.body.style.paddingRight,i=g(document.body).css("padding-right");g(document.body).data("padding-right",n).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}g(document.body).addClass(ce)},t._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(me));g(t).each(function(t,e){var n=g(e).data("padding-right");g(e).removeData("padding-right"),e.style.paddingRight=n||""});var e=[].slice.call(document.querySelectorAll(""+pe));g(e).each(function(t,e){var n=g(e).data("margin-right");"undefined"!=typeof n&&g(e).css("margin-right",n).removeData("margin-right")});var n=g(document.body).data("padding-right");g(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className=ae,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},o._jQueryInterface=function(n,i){return this.each(function(){var t=g(this).data(te),e=l({},ie,g(this).data(),"object"==typeof n&&n?n:{});if(t||(t=new o(this,e),g(this).data(te,t)),"string"==typeof n){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n](i)}else e.show&&t.show(i)})},s(o,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return ie}}]),o}();g(document).on(re.CLICK_DATA_API,ge,function(t){var e,n=this,i=_.getSelectorFromElement(this);i&&(e=document.querySelector(i));var o=g(e).data(te)?"toggle":l({},g(e).data(),g(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var r=g(e).one(re.SHOW,function(t){t.isDefaultPrevented()||r.one(re.HIDDEN,function(){g(n).is(":visible")&&n.focus()})});ve._jQueryInterface.call(g(e),o,this)}),g.fn[Zt]=ve._jQueryInterface,g.fn[Zt].Constructor=ve,g.fn[Zt].noConflict=function(){return g.fn[Zt]=ne,ve._jQueryInterface};var ye=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Ee={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ce=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Te=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function Se(t,s,e){if(0===t.length)return t;if(e&&"function"==typeof e)return e(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),a=Object.keys(s),l=[].slice.call(n.body.querySelectorAll("*")),i=function(t,e){var n=l[t],i=n.nodeName.toLowerCase();if(-1===a.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var o=[].slice.call(n.attributes),r=[].concat(s["*"]||[],s[i]||[]);o.forEach(function(t){(function(t,e){var n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===ye.indexOf(n)||Boolean(t.nodeValue.match(Ce)||t.nodeValue.match(Te));for(var i=e.filter(function(t){return t instanceof RegExp}),o=0,r=i.length;o<r;o++)if(n.match(i[o]))return!0;return!1})(t,r)||n.removeAttribute(t.nodeName)})},o=0,r=l.length;o<r;o++)i(o);return n.body.innerHTML}var be="tooltip",Ie="bs.tooltip",De="."+Ie,we=g.fn[be],Ae="bs-tooltip",Ne=new RegExp("(^|\\s)"+Ae+"\\S+","g"),Oe=["sanitize","whiteList","sanitizeFn"],ke={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},Pe={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Le={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:Ee},je="show",He="out",Re={HIDE:"hide"+De,HIDDEN:"hidden"+De,SHOW:"show"+De,SHOWN:"shown"+De,INSERTED:"inserted"+De,CLICK:"click"+De,FOCUSIN:"focusin"+De,FOCUSOUT:"focusout"+De,MOUSEENTER:"mouseenter"+De,MOUSELEAVE:"mouseleave"+De},xe="fade",Fe="show",Ue=".tooltip-inner",We=".arrow",qe="hover",Me="focus",Ke="click",Qe="manual",Be=function(){function i(t,e){if("undefined"==typeof u)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=i.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=g(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),g(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(g(this.getTipElement()).hasClass(Fe))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),g.removeData(this.element,this.constructor.DATA_KEY),g(this.element).off(this.constructor.EVENT_KEY),g(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&g(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===g(this.element).css("display"))throw new Error("Please use show on visible elements");var t=g.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){g(this.element).trigger(t);var n=_.findShadowRoot(this.element),i=g.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!i)return;var o=this.getTipElement(),r=_.getUID(this.constructor.NAME);o.setAttribute("id",r),this.element.setAttribute("aria-describedby",r),this.setContent(),this.config.animation&&g(o).addClass(xe);var s="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,a=this._getAttachment(s);this.addAttachmentClass(a);var l=this._getContainer();g(o).data(this.constructor.DATA_KEY,this),g.contains(this.element.ownerDocument.documentElement,this.tip)||g(o).appendTo(l),g(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new u(this.element,o,{placement:a,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:We},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}}),g(o).addClass(Fe),"ontouchstart"in document.documentElement&&g(document.body).children().on("mouseover",null,g.noop);var c=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,g(e.element).trigger(e.constructor.Event.SHOWN),t===He&&e._leave(null,e)};if(g(this.tip).hasClass(xe)){var h=_.getTransitionDurationFromElement(this.tip);g(this.tip).one(_.TRANSITION_END,c).emulateTransitionEnd(h)}else c()}},t.hide=function(t){var e=this,n=this.getTipElement(),i=g.Event(this.constructor.Event.HIDE),o=function(){e._hoverState!==je&&n.parentNode&&n.parentNode.removeChild(n),e._cleanTipClass(),e.element.removeAttribute("aria-describedby"),g(e.element).trigger(e.constructor.Event.HIDDEN),null!==e._popper&&e._popper.destroy(),t&&t()};if(g(this.element).trigger(i),!i.isDefaultPrevented()){if(g(n).removeClass(Fe),"ontouchstart"in document.documentElement&&g(document.body).children().off("mouseover",null,g.noop),this._activeTrigger[Ke]=!1,this._activeTrigger[Me]=!1,this._activeTrigger[qe]=!1,g(this.tip).hasClass(xe)){var r=_.getTransitionDurationFromElement(n);g(n).one(_.TRANSITION_END,o).emulateTransitionEnd(r)}else o();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){g(this.getTipElement()).addClass(Ae+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||g(this.config.template)[0],this.tip},t.setContent=function(){var t=this.getTipElement();this.setElementContent(g(t.querySelectorAll(Ue)),this.getTitle()),g(t).removeClass(xe+" "+Fe)},t.setElementContent=function(t,e){"object"!=typeof e||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=Se(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?g(e).parent().is(t)||t.empty().append(e):t.text(g(e).text())},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},t._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},t._getContainer=function(){return!1===this.config.container?document.body:_.isElement(this.config.container)?g(this.config.container):g(document).find(this.config.container)},t._getAttachment=function(t){return Pe[t.toUpperCase()]},t._setListeners=function(){var i=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)g(i.element).on(i.constructor.Event.CLICK,i.config.selector,function(t){return i.toggle(t)});else if(t!==Qe){var e=t===qe?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,n=t===qe?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT;g(i.element).on(e,i.config.selector,function(t){return i._enter(t)}).on(n,i.config.selector,function(t){return i._leave(t)})}}),g(this.element).closest(".modal").on("hide.bs.modal",function(){i.element&&i.hide()}),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||g(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),g(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?Me:qe]=!0),g(e.getTipElement()).hasClass(Fe)||e._hoverState===je?e._hoverState=je:(clearTimeout(e._timeout),e._hoverState=je,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===je&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||g(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),g(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?Me:qe]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=He,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===He&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){var e=g(this.element).data();return Object.keys(e).forEach(function(t){-1!==Oe.indexOf(t)&&delete e[t]}),"number"==typeof(t=l({},this.constructor.Default,e,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),_.typeCheckConfig(be,t,this.constructor.DefaultType),t.sanitize&&(t.template=Se(t.template,t.whiteList,t.sanitizeFn)),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=g(this.getTipElement()),e=t.attr("class").match(Ne);null!==e&&e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){var e=t.instance;this.tip=e.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(g(t).removeClass(xe),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},i._jQueryInterface=function(n){return this.each(function(){var t=g(this).data(Ie),e="object"==typeof n&&n;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),g(this).data(Ie,t)),"string"==typeof n)){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Le}},{key:"NAME",get:function(){return be}},{key:"DATA_KEY",get:function(){return Ie}},{key:"Event",get:function(){return Re}},{key:"EVENT_KEY",get:function(){return De}},{key:"DefaultType",get:function(){return ke}}]),i}();g.fn[be]=Be._jQueryInterface,g.fn[be].Constructor=Be,g.fn[be].noConflict=function(){return g.fn[be]=we,Be._jQueryInterface};var Ve="popover",Ye="bs.popover",ze="."+Ye,Xe=g.fn[Ve],$e="bs-popover",Ge=new RegExp("(^|\\s)"+$e+"\\S+","g"),Je=l({},Be.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Ze=l({},Be.DefaultType,{content:"(string|element|function)"}),tn="fade",en="show",nn=".popover-header",on=".popover-body",rn={HIDE:"hide"+ze,HIDDEN:"hidden"+ze,SHOW:"show"+ze,SHOWN:"shown"+ze,INSERTED:"inserted"+ze,CLICK:"click"+ze,FOCUSIN:"focusin"+ze,FOCUSOUT:"focusout"+ze,MOUSEENTER:"mouseenter"+ze,MOUSELEAVE:"mouseleave"+ze},sn=function(t){var e,n;function i(){return t.apply(this,arguments)||this}n=t,(e=i).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var o=i.prototype;return o.isWithContent=function(){return this.getTitle()||this._getContent()},o.addAttachmentClass=function(t){g(this.getTipElement()).addClass($e+"-"+t)},o.getTipElement=function(){return this.tip=this.tip||g(this.config.template)[0],this.tip},o.setContent=function(){var t=g(this.getTipElement());this.setElementContent(t.find(nn),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(on),e),t.removeClass(tn+" "+en)},o._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},o._cleanTipClass=function(){var t=g(this.getTipElement()),e=t.attr("class").match(Ge);null!==e&&0<e.length&&t.removeClass(e.join(""))},i._jQueryInterface=function(n){return this.each(function(){var t=g(this).data(Ye),e="object"==typeof n?n:null;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),g(this).data(Ye,t)),"string"==typeof n)){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Je}},{key:"NAME",get:function(){return Ve}},{key:"DATA_KEY",get:function(){return Ye}},{key:"Event",get:function(){return rn}},{key:"EVENT_KEY",get:function(){return ze}},{key:"DefaultType",get:function(){return Ze}}]),i}(Be);g.fn[Ve]=sn._jQueryInterface,g.fn[Ve].Constructor=sn,g.fn[Ve].noConflict=function(){return g.fn[Ve]=Xe,sn._jQueryInterface};var an="scrollspy",ln="bs.scrollspy",cn="."+ln,hn=g.fn[an],un={offset:10,method:"auto",target:""},fn={offset:"number",method:"string",target:"(string|element)"},dn={ACTIVATE:"activate"+cn,SCROLL:"scroll"+cn,LOAD_DATA_API:"load"+cn+".data-api"},gn="dropdown-item",_n="active",mn='[data-spy="scroll"]',pn=".nav, .list-group",vn=".nav-link",yn=".nav-item",En=".list-group-item",Cn=".dropdown",Tn=".dropdown-item",Sn=".dropdown-toggle",bn="offset",In="position",Dn=function(){function n(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+vn+","+this._config.target+" "+En+","+this._config.target+" "+Tn,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,g(this._scrollElement).on(dn.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}var t=n.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?bn:In,o="auto"===this._config.method?t:this._config.method,r=o===In?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var e,n=_.getSelectorFromElement(t);if(n&&(e=document.querySelector(n)),e){var i=e.getBoundingClientRect();if(i.width||i.height)return[g(e)[o]().top+r,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){g.removeData(this._element,ln),g(this._scrollElement).off(cn),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=l({},un,"object"==typeof t&&t?t:{})).target){var e=g(t.target).attr("id");e||(e=_.getUID(an),g(t.target).attr("id",e)),t.target="#"+e}return _.typeCheckConfig(an,t,fn),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&("undefined"==typeof this._offsets[o+1]||t<this._offsets[o+1])&&this._activate(this._targets[o])}}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",").map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),n=g([].slice.call(document.querySelectorAll(t.join(","))));n.hasClass(gn)?(n.closest(Cn).find(Sn).addClass(_n),n.addClass(_n)):(n.addClass(_n),n.parents(pn).prev(vn+", "+En).addClass(_n),n.parents(pn).prev(yn).children(vn).addClass(_n)),g(this._scrollElement).trigger(dn.ACTIVATE,{relatedTarget:e})},t._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains(_n)}).forEach(function(t){return t.classList.remove(_n)})},n._jQueryInterface=function(e){return this.each(function(){var t=g(this).data(ln);if(t||(t=new n(this,"object"==typeof e&&e),g(this).data(ln,t)),"string"==typeof e){if("undefined"==typeof t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},s(n,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return un}}]),n}();g(window).on(dn.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(mn)),e=t.length;e--;){var n=g(t[e]);Dn._jQueryInterface.call(n,n.data())}}),g.fn[an]=Dn._jQueryInterface,g.fn[an].Constructor=Dn,g.fn[an].noConflict=function(){return g.fn[an]=hn,Dn._jQueryInterface};var wn="bs.tab",An="."+wn,Nn=g.fn.tab,On={HIDE:"hide"+An,HIDDEN:"hidden"+An,SHOW:"show"+An,SHOWN:"shown"+An,CLICK_DATA_API:"click"+An+".data-api"},kn="dropdown-menu",Pn="active",Ln="disabled",jn="fade",Hn="show",Rn=".dropdown",xn=".nav, .list-group",Fn=".active",Un="> li > .active",Wn='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',qn=".dropdown-toggle",Mn="> .dropdown-menu .active",Kn=function(){function i(t){this._element=t}var t=i.prototype;return t.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&g(this._element).hasClass(Pn)||g(this._element).hasClass(Ln))){var t,i,e=g(this._element).closest(xn)[0],o=_.getSelectorFromElement(this._element);if(e){var r="UL"===e.nodeName||"OL"===e.nodeName?Un:Fn;i=(i=g.makeArray(g(e).find(r)))[i.length-1]}var s=g.Event(On.HIDE,{relatedTarget:this._element}),a=g.Event(On.SHOW,{relatedTarget:i});if(i&&g(i).trigger(s),g(this._element).trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){o&&(t=document.querySelector(o)),this._activate(this._element,e);var l=function(){var t=g.Event(On.HIDDEN,{relatedTarget:n._element}),e=g.Event(On.SHOWN,{relatedTarget:i});g(i).trigger(t),g(n._element).trigger(e)};t?this._activate(t,t.parentNode,l):l()}}},t.dispose=function(){g.removeData(this._element,wn),this._element=null},t._activate=function(t,e,n){var i=this,o=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?g(e).children(Fn):g(e).find(Un))[0],r=n&&o&&g(o).hasClass(jn),s=function(){return i._transitionComplete(t,o,n)};if(o&&r){var a=_.getTransitionDurationFromElement(o);g(o).removeClass(Hn).one(_.TRANSITION_END,s).emulateTransitionEnd(a)}else s()},t._transitionComplete=function(t,e,n){if(e){g(e).removeClass(Pn);var i=g(e.parentNode).find(Mn)[0];i&&g(i).removeClass(Pn),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(g(t).addClass(Pn),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),_.reflow(t),t.classList.contains(jn)&&t.classList.add(Hn),t.parentNode&&g(t.parentNode).hasClass(kn)){var o=g(t).closest(Rn)[0];if(o){var r=[].slice.call(o.querySelectorAll(qn));g(r).addClass(Pn)}t.setAttribute("aria-expanded",!0)}n&&n()},i._jQueryInterface=function(n){return this.each(function(){var t=g(this),e=t.data(wn);if(e||(e=new i(this),t.data(wn,e)),"string"==typeof n){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),i}();g(document).on(On.CLICK_DATA_API,Wn,function(t){t.preventDefault(),Kn._jQueryInterface.call(g(this),"show")}),g.fn.tab=Kn._jQueryInterface,g.fn.tab.Constructor=Kn,g.fn.tab.noConflict=function(){return g.fn.tab=Nn,Kn._jQueryInterface};var Qn="toast",Bn="bs.toast",Vn="."+Bn,Yn=g.fn[Qn],zn={CLICK_DISMISS:"click.dismiss"+Vn,HIDE:"hide"+Vn,HIDDEN:"hidden"+Vn,SHOW:"show"+Vn,SHOWN:"shown"+Vn},Xn="fade",$n="hide",Gn="show",Jn="showing",Zn={animation:"boolean",autohide:"boolean",delay:"number"},ti={animation:!0,autohide:!0,delay:500},ei='[data-dismiss="toast"]',ni=function(){function i(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var t=i.prototype;return t.show=function(){var t=this;g(this._element).trigger(zn.SHOW),this._config.animation&&this._element.classList.add(Xn);var e=function(){t._element.classList.remove(Jn),t._element.classList.add(Gn),g(t._element).trigger(zn.SHOWN),t._config.autohide&&t.hide()};if(this._element.classList.remove($n),this._element.classList.add(Jn),this._config.animation){var n=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},t.hide=function(t){var e=this;this._element.classList.contains(Gn)&&(g(this._element).trigger(zn.HIDE),t?this._close():this._timeout=setTimeout(function(){e._close()},this._config.delay))},t.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(Gn)&&this._element.classList.remove(Gn),g(this._element).off(zn.CLICK_DISMISS),g.removeData(this._element,Bn),this._element=null,this._config=null},t._getConfig=function(t){return t=l({},ti,g(this._element).data(),"object"==typeof t&&t?t:{}),_.typeCheckConfig(Qn,t,this.constructor.DefaultType),t},t._setListeners=function(){var t=this;g(this._element).on(zn.CLICK_DISMISS,ei,function(){return t.hide(!0)})},t._close=function(){var t=this,e=function(){t._element.classList.add($n),g(t._element).trigger(zn.HIDDEN)};if(this._element.classList.remove(Gn),this._config.animation){var n=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},i._jQueryInterface=function(n){return this.each(function(){var t=g(this),e=t.data(Bn);if(e||(e=new i(this,"object"==typeof n&&n),t.data(Bn,e)),"string"==typeof n){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n](this)}})},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return Zn}},{key:"Default",get:function(){return ti}}]),i}();g.fn[Qn]=ni._jQueryInterface,g.fn[Qn].Constructor=ni,g.fn[Qn].noConflict=function(){return g.fn[Qn]=Yn,ni._jQueryInterface},function(){if("undefined"==typeof g)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=g.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),t.Util=_,t.Alert=p,t.Button=P,t.Carousel=lt,t.Collapse=bt,t.Dropdown=Jt,t.Modal=ve,t.Popover=sn,t.Scrollspy=Dn,t.Tab=Kn,t.Toast=ni,t.Tooltip=Be,Object.defineProperty(t,"__esModule",{value:!0})});!function(t,e,n,o){"use strict";function i(t,e){var o,i,a=[],s=0;t&&t.isDefaultPrevented()||(t.preventDefault(),e=t&&t.data?t.data.options:e||{},o=e.$target||n(t.currentTarget),i=o.attr("data-fancybox")||"",i?(a=e.selector?n(e.selector):t.data?t.data.items:[],a=a.length?a.filter('[data-fancybox="'+i+'"]'):n('[data-fancybox="'+i+'"]'),s=a.index(o),s<0&&(s=0)):a=[o],n.fancybox.open(a,e,s))}if(t.console=t.console||{info:function(t){}},n){if(n.fn.fancybox)return void console.info("fancyBox already initialized");var a={loop:!1,gutter:50,keyboard:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg viewBox="0 0 40 40"><path d="M13,16 L20,23 L27,16 M20,7 L20,23 M10,24 L10,28 L30,28 L30,24" /></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg viewBox="0 0 40 40"><path d="M18,17 m-8,0 a8,8 0 1,0 16,0 a8,8 0 1,0 -16,0 M24,22 L31,29" /></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg viewBox="0 0 40 40"><path d="M10,10 L30,30 M30,10 L10,30" /></svg></button>',smallBtn:'<button data-fancybox-close class="fancybox-close-small" title="{{CLOSE}}"><svg viewBox="0 0 32 32"><path d="M10,10 L22,22 M22,10 L10,22"></path></svg></button>',arrowLeft:'<a data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}" href="javascript:;"><svg viewBox="0 0 40 40"><path d="M18,12 L10,20 L18,28 M10,20 L30,20"></path></svg></a>',arrowRight:'<a data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}" href="javascript:;"><svg viewBox="0 0 40 40"><path d="M10,20 L30,20 M22,12 L30,20 L22,28"></path></svg></a>'},parentEl:"body",autoFocus:!1,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:4e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop,onActivate:n.noop,onDeactivate:n.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{idleTime:!1,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schliessen",NEXT:"Weiter",PREV:"Zurück",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Maßstab"}}},s=n(t),r=n(e),c=0,l=function(t){return t&&t.hasOwnProperty&&t instanceof n},d=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),u=function(){var t,n=e.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(n.style[t]!==o)return i[t];return"transitionend"}(),f=function(t){return t&&t.length&&t[0].offsetHeight},p=function(t,e){var o=n.extend(!0,{},t,e);return n.each(e,function(t,e){n.isArray(e)&&(o[t]=e)}),o},h=function(t,o,i){var a=this;a.opts=p({index:i},n.fancybox.defaults),n.isPlainObject(o)&&(a.opts=p(a.opts,o)),n.fancybox.isMobile&&(a.opts=p(a.opts,a.opts.mobile)),a.id=a.opts.id||++c,a.currIndex=parseInt(a.opts.index,10)||0,a.prevIndex=null,a.prevPos=null,a.currPos=0,a.firstRun=!0,a.group=[],a.slides={},a.addContent(t),a.group.length&&(a.$lastFocus=n(e.activeElement).trigger("blur"),a.init())};n.extend(h.prototype,{init:function(){var i,a,s,r=this,c=r.group[r.currIndex],l=c.opts,d=n.fancybox.scrollbarWidth;n.fancybox.getInstance()||l.hideScrollbar===!1||(n("body").addClass("fancybox-active"),!n.fancybox.isMobile&&e.body.scrollHeight>t.innerHeight&&(d===o&&(i=n('<div style="width:100px;height:100px;overflow:scroll;" />').appendTo("body"),d=n.fancybox.scrollbarWidth=i[0].offsetWidth-i[0].clientWidth,i.remove()),n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar { margin-right: '+d+"px; }</style>"),n("body").addClass("compensate-for-scrollbar"))),s="",n.each(l.buttons,function(t,e){s+=l.btnTpl[e]||""}),a=n(r.translate(r,l.baseTpl.replace("{{buttons}}",s).replace("{{arrows}}",l.btnTpl.arrowLeft+l.btnTpl.arrowRight))).attr("id","fancybox-container-"+r.id).addClass("fancybox-is-hidden").addClass(l.baseClass).data("FancyBox",r).appendTo(l.parentEl),r.$refs={container:a},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){r.$refs[t]=a.find(".fancybox-"+t)}),r.trigger("onInit"),r.activate(),r.jumpTo(r.currIndex)},translate:function(t,e){var n=t.opts.i18n[t.opts.lang];return e.replace(/\{\{(\w+)\}\}/g,function(t,e){var i=n[e];return i===o?t:i})},addContent:function(t){var e,i=this,a=n.makeArray(t);n.each(a,function(t,e){var a,s,r,c,l,d={},u={};n.isPlainObject(e)?(d=e,u=e.opts||e):"object"===n.type(e)&&n(e).length?(a=n(e),u=a.data()||{},u=n.extend(!0,{},u,u.options),u.$orig=a,d.src=i.opts.src||u.src||a.attr("href"),d.type||d.src||(d.type="inline",d.src=e)):d={type:"html",src:e+""},d.opts=n.extend(!0,{},i.opts,u),n.isArray(u.buttons)&&(d.opts.buttons=u.buttons),s=d.type||d.opts.type,c=d.src||"",!s&&c&&((r=c.match(/\.(mp4|mov|ogv)((\?|#).*)?$/i))?(s="video",d.opts.videoFormat||(d.opts.videoFormat="video/"+("ogv"===r[1]?"ogg":r[1]))):c.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?s="image":c.match(/\.(pdf)((\?|#).*)?$/i)?s="iframe":"#"===c.charAt(0)&&(s="inline")),s?d.type=s:i.trigger("objectNeedsType",d),d.contentType||(d.contentType=n.inArray(d.type,["html","inline","ajax"])>-1?"html":d.type),d.index=i.group.length,"auto"==d.opts.smallBtn&&(d.opts.smallBtn=n.inArray(d.type,["html","inline","ajax"])>-1),"auto"===d.opts.toolbar&&(d.opts.toolbar=!d.opts.smallBtn),d.opts.$trigger&&d.index===i.opts.index&&(d.opts.$thumb=d.opts.$trigger.find("img:first")),d.opts.$thumb&&d.opts.$thumb.length||!d.opts.$orig||(d.opts.$thumb=d.opts.$orig.find("img:first")),"function"===n.type(d.opts.caption)&&(d.opts.caption=d.opts.caption.apply(e,[i,d])),"function"===n.type(i.opts.caption)&&(d.opts.caption=i.opts.caption.apply(e,[i,d])),d.opts.caption instanceof n||(d.opts.caption=d.opts.caption===o?"":d.opts.caption+""),"ajax"===d.type&&(l=c.split(/\s+/,2),l.length>1&&(d.src=l.shift(),d.opts.filter=l.shift())),d.opts.modal&&(d.opts=n.extend(!0,d.opts,{infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),i.group.push(d)}),Object.keys(i.slides).length&&(i.updateControls(),e=i.Thumbs,e&&e.isActive&&(e.create(),e.focus()))},addEvents:function(){var o=this;o.removeEvents(),o.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),o.close(t)}).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),o.previous()}).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),o.next()}).on("click.fb","[data-fancybox-zoom]",function(t){o[o.isScaledDown()?"scaleToActual":"scaleToFit"]()}),s.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?d(function(){o.update()}):(o.$refs.stage.hide(),setTimeout(function(){o.$refs.stage.show(),o.update()},n.fancybox.isMobile?600:250))}),r.on("focusin.fb",function(t){var o=n.fancybox?n.fancybox.getInstance():null;o.isClosing||!o.current||!o.current.opts.trapFocus||n(t.target).hasClass("fancybox-container")||n(t.target).is(e)||o&&"fixed"!==n(t.target).css("position")&&!o.$refs.container.has(t.target).length&&(t.stopPropagation(),o.focus())}),r.on("keydown.fb",function(t){var e=o.current,i=t.keyCode||t.which;if(e&&e.opts.keyboard&&!(t.ctrlKey||t.altKey||t.shiftKey||n(t.target).is("input")||n(t.target).is("textarea")))return 8===i||27===i?(t.preventDefault(),void o.close(t)):37===i||38===i?(t.preventDefault(),void o.previous()):39===i||40===i?(t.preventDefault(),void o.next()):void o.trigger("afterKeydown",t,i)}),o.group[o.currIndex].opts.idleTime&&(o.idleSecondsCounter=0,r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){o.idleSecondsCounter=0,o.isIdle&&o.showControls(),o.isIdle=!1}),o.idleInterval=t.setInterval(function(){o.idleSecondsCounter++,o.idleSecondsCounter>=o.group[o.currIndex].opts.idleTime&&!o.isDragging&&(o.isIdle=!0,o.idleSecondsCounter=0,o.hideControls())},1e3))},removeEvents:function(){var e=this;s.off("orientationchange.fb resize.fb"),r.off("focusin.fb keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),e.idleInterval&&(t.clearInterval(e.idleInterval),e.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,e){var i,a,s,r,c,l,d,u=this,p=u.group.length;if(!(u.isDragging||u.isClosing||u.isAnimating&&u.firstRun)){if(t=parseInt(t,10),a=u.current?u.current.opts.loop:u.opts.loop,!a&&(t<0||t>=p))return!1;if(i=u.firstRun=!Object.keys(u.slides).length,!(p<2&&!i&&u.isDragging)){if(r=u.current,u.prevIndex=u.currIndex,u.prevPos=u.currPos,s=u.createSlide(t),p>1&&((a||s.index>0)&&u.createSlide(t-1),(a||s.index<p-1)&&u.createSlide(t+1)),u.current=s,u.currIndex=s.index,u.currPos=s.pos,u.trigger("beforeShow",i),u.updateControls(),l=n.fancybox.getTranslate(s.$slide),s.isMoved=(0!==l.left||0!==l.top)&&!s.$slide.hasClass("fancybox-animated"),s.forcedDuration=o,n.isNumeric(e)?s.forcedDuration=e:e=s.opts[i?"animationDuration":"transitionDuration"],e=parseInt(e,10),i)return s.opts.animationEffect&&e&&u.$refs.container.css("transition-duration",e+"ms"),u.$refs.container.removeClass("fancybox-is-hidden"),f(u.$refs.container),u.$refs.container.addClass("fancybox-is-open"),f(u.$refs.container),s.$slide.addClass("fancybox-slide--previous"),u.loadSlide(s),s.$slide.removeClass("fancybox-slide--previous").addClass("fancybox-slide--current"),void u.preload("image");n.each(u.slides,function(t,e){n.fancybox.stop(e.$slide)}),s.$slide.removeClass("fancybox-slide--next fancybox-slide--previous").addClass("fancybox-slide--current"),s.isMoved?(c=Math.round(s.$slide.width()),n.each(u.slides,function(t,o){var i=o.pos-s.pos;n.fancybox.animate(o.$slide,{top:0,left:i*c+i*o.opts.gutter},e,function(){o.$slide.removeAttr("style").removeClass("fancybox-slide--next fancybox-slide--previous"),o.pos===u.currPos&&(s.isMoved=!1,u.complete())})})):u.$refs.stage.children().removeAttr("style"),s.isLoaded?u.revealContent(s):u.loadSlide(s),u.preload("image"),r.pos!==s.pos&&(d="fancybox-slide--"+(r.pos>s.pos?"next":"previous"),r.$slide.removeClass("fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous"),r.isComplete=!1,e&&(s.isMoved||s.opts.transitionEffect)&&(s.isMoved?r.$slide.addClass(d):(d="fancybox-animated "+d+" fancybox-fx-"+s.opts.transitionEffect,n.fancybox.animate(r.$slide,d,e,function(){r.$slide.removeClass(d).removeAttr("style")}))))}}},createSlide:function(t){var e,o,i=this;return o=t%i.group.length,o=o<0?i.group.length+o:o,!i.slides[t]&&i.group[o]&&(e=n('<div class="fancybox-slide"></div>').appendTo(i.$refs.stage),i.slides[t]=n.extend(!0,{},i.group[o],{pos:t,$slide:e,isLoaded:!1}),i.updateSlide(i.slides[t])),i.slides[t]},scaleToActual:function(t,e,i){var a,s,r,c,l,d=this,u=d.current,f=u.$content,p=n.fancybox.getTranslate(u.$slide).width,h=n.fancybox.getTranslate(u.$slide).height,g=u.width,b=u.height;!d.isAnimating&&f&&"image"==u.type&&u.isLoaded&&!u.hasError&&(n.fancybox.stop(f),d.isAnimating=!0,t=t===o?.5*p:t,e=e===o?.5*h:e,a=n.fancybox.getTranslate(f),a.top-=n.fancybox.getTranslate(u.$slide).top,a.left-=n.fancybox.getTranslate(u.$slide).left,c=g/a.width,l=b/a.height,s=.5*p-.5*g,r=.5*h-.5*b,g>p&&(s=a.left*c-(t*c-t),s>0&&(s=0),s<p-g&&(s=p-g)),b>h&&(r=a.top*l-(e*l-e),r>0&&(r=0),r<h-b&&(r=h-b)),d.updateCursor(g,b),n.fancybox.animate(f,{top:r,left:s,scaleX:c,scaleY:l},i||330,function(){d.isAnimating=!1}),d.SlideShow&&d.SlideShow.isActive&&d.SlideShow.stop())},scaleToFit:function(t){var e,o=this,i=o.current,a=i.$content;!o.isAnimating&&a&&"image"==i.type&&i.isLoaded&&!i.hasError&&(n.fancybox.stop(a),o.isAnimating=!0,e=o.getFitPos(i),o.updateCursor(e.width,e.height),n.fancybox.animate(a,{top:e.top,left:e.left,scaleX:e.width/a.width(),scaleY:e.height/a.height()},t||330,function(){o.isAnimating=!1}))},getFitPos:function(t){var e,n,o,i,a,s=this,r=t.$content,c=t.width||t.opts.width,l=t.height||t.opts.height,d={};return!!(t.isLoaded&&r&&r.length)&&(i={top:parseInt(t.$slide.css("paddingTop"),10),right:parseInt(t.$slide.css("paddingRight"),10),bottom:parseInt(t.$slide.css("paddingBottom"),10),left:parseInt(t.$slide.css("paddingLeft"),10)},e=parseInt(s.$refs.stage.width(),10)-(i.left+i.right),n=parseInt(s.$refs.stage.height(),10)-(i.top+i.bottom),c&&l||(c=e,l=n),o=Math.min(1,e/c,n/l),c=Math.floor(o*c),l=Math.floor(o*l),"image"===t.type?(d.top=Math.floor(.5*(n-l))+i.top,d.left=Math.floor(.5*(e-c))+i.left):"video"===t.contentType&&(a=t.opts.width&&t.opts.height?c/l:t.opts.ratio||16/9,l>c/a?l=c/a:c>l*a&&(c=l*a)),d.width=c,d.height=l,d)},update:function(){var t=this;n.each(t.slides,function(e,n){t.updateSlide(n)})},updateSlide:function(t,e){var o=this,i=t&&t.$content,a=t.width||t.opts.width,s=t.height||t.opts.height;i&&(a||s||"video"===t.contentType)&&!t.hasError&&(n.fancybox.stop(i),n.fancybox.setTranslate(i,o.getFitPos(t)),t.pos===o.currPos&&(o.isAnimating=!1,o.updateCursor())),t.$slide.trigger("refresh"),o.$refs.toolbar.toggleClass("compensate-for-scrollbar",t.$slide.get(0).scrollHeight>t.$slide.get(0).clientHeight),o.trigger("onUpdate",t)},centerSlide:function(t,e){var i,a,s=this;s.current&&(i=Math.round(t.$slide.width()),a=t.pos-s.current.pos,n.fancybox.animate(t.$slide,{top:0,left:a*i+a*t.opts.gutter,opacity:1},e===o?0:e,null,!1))},updateCursor:function(t,e){var o,i=this,a=i.current,s=i.$refs.container.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut");a&&!i.isClosing&&(o=i.isZoomable(),s.toggleClass("fancybox-is-zoomable",o),n("[data-fancybox-zoom]").prop("disabled",!o),o&&("zoom"===a.opts.clickContent||n.isFunction(a.opts.clickContent)&&"zoom"===a.opts.clickContent(a))?i.isScaledDown(t,e)?s.addClass("fancybox-can-zoomIn"):a.opts.touch?s.addClass("fancybox-can-drag"):s.addClass("fancybox-can-zoomOut"):a.opts.touch&&"video"!==a.contentType&&s.addClass("fancybox-can-drag"))},isZoomable:function(){var t,e=this,n=e.current;if(n&&!e.isClosing&&"image"===n.type&&!n.hasError){if(!n.isLoaded)return!0;if(t=e.getFitPos(n),n.width>t.width||n.height>t.height)return!0}return!1},isScaledDown:function(t,e){var i=this,a=!1,s=i.current,r=s.$content;return t!==o&&e!==o?a=t<s.width&&e<s.height:r&&(a=n.fancybox.getTranslate(r),a=a.width<s.width&&a.height<s.height),a},canPan:function(){var t,e=this,n=!1,o=e.current;return"image"===o.type&&(t=o.$content)&&!o.hasError&&(n=e.getFitPos(o),n=Math.abs(t.width()-n.width)>1||Math.abs(t.height()-n.height)>1),n},loadSlide:function(t){var e,o,i,a=this;if(!t.isLoading&&!t.isLoaded){switch(t.isLoading=!0,a.trigger("beforeLoad",t),e=t.type,o=t.$slide,o.off("refresh").trigger("onReset").addClass(t.opts.slideClass),e){case"image":a.setImage(t);break;case"iframe":a.setIframe(t);break;case"html":a.setContent(t,t.src||t.content);break;case"video":a.setContent(t,'<video class="fancybox-video" controls controlsList="nodownload"><source src="'+t.src+'" type="'+t.opts.videoFormat+"\">Your browser doesn't support HTML5 video</video");break;case"inline":n(t.src).length?a.setContent(t,n(t.src)):a.setError(t);break;case"ajax":a.showLoading(t),i=n.ajax(n.extend({},t.opts.ajax.settings,{url:t.src,success:function(e,n){"success"===n&&a.setContent(t,e)},error:function(e,n){e&&"abort"!==n&&a.setError(t)}})),o.one("onReset",function(){i.abort()});break;default:a.setError(t)}return!0}},setImage:function(e){var o,i,a,s,r,c=this,l=e.opts.srcset||e.opts.image.srcset;if(e.timouts=setTimeout(function(){var t=e.$image;!e.isLoading||t&&t[0].complete||e.hasError||c.showLoading(e)},350),l){s=t.devicePixelRatio||1,r=t.innerWidth*s,a=l.split(",").map(function(t){var e={};return t.trim().split(/\s+/).forEach(function(t,n){var o=parseInt(t.substring(0,t.length-1),10);return 0===n?e.url=t:void(o&&(e.value=o,e.postfix=t[t.length-1]))}),e}),a.sort(function(t,e){return t.value-e.value});for(var d=0;d<a.length;d++){var u=a[d];if("w"===u.postfix&&u.value>=r||"x"===u.postfix&&u.value>=s){i=u;break}}!i&&a.length&&(i=a[a.length-1]),i&&(e.src=i.url,e.width&&e.height&&"w"==i.postfix&&(e.height=e.width/e.height*i.value,e.width=i.value),e.opts.srcset=l)}e.$content=n('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide.addClass("fancybox-slide--image")),o=e.opts.thumb||!(!e.opts.$thumb||!e.opts.$thumb.length)&&e.opts.$thumb.attr("src"),e.opts.preload!==!1&&e.opts.width&&e.opts.height&&o&&(e.width=e.opts.width,e.height=e.opts.height,e.$ghost=n("<img />").one("error",function(){n(this).remove(),e.$ghost=null}).one("load",function(){c.afterLoad(e)}).addClass("fancybox-image").appendTo(e.$content).attr("src",o)),c.setBigImage(e)},setBigImage:function(t){var e=this,o=n("<img />");t.$image=o.one("error",function(){e.setError(t)}).one("load",function(){var n;t.$ghost||(e.resolveImageSlideSize(t,this.naturalWidth,this.naturalHeight),e.afterLoad(t)),t.timouts&&(clearTimeout(t.timouts),t.timouts=null),e.isClosing||(t.opts.srcset&&(n=t.opts.sizes,n&&"auto"!==n||(n=(t.width/t.height>1&&s.width()/s.height()>1?"100":Math.round(t.width/t.height*100))+"vw"),o.attr("sizes",n).attr("srcset",t.opts.srcset)),t.$ghost&&setTimeout(function(){t.$ghost&&!e.isClosing&&t.$ghost.hide()},Math.min(300,Math.max(1e3,t.height/1600))),e.hideLoading(t))}).addClass("fancybox-image").attr("src",t.src).appendTo(t.$content),(o[0].complete||"complete"==o[0].readyState)&&o[0].naturalWidth&&o[0].naturalHeight?o.trigger("load"):o[0].error&&o.trigger("error")},resolveImageSlideSize:function(t,e,n){var o=parseInt(t.opts.width,10),i=parseInt(t.opts.height,10);t.width=e,t.height=n,o>0&&(t.width=o,t.height=Math.floor(o*n/e)),i>0&&(t.width=Math.floor(i*e/n),t.height=i)},setIframe:function(t){var e,i=this,a=t.opts.iframe,s=t.$slide;t.$content=n('<div class="fancybox-content'+(a.preload?" fancybox-is-hidden":"")+'"></div>').css(a.css).appendTo(s),s.addClass("fancybox-slide--"+t.contentType),t.$iframe=e=n(a.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(a.attr).appendTo(t.$content),a.preload?(i.showLoading(t),e.on("load.fb error.fb",function(e){this.isReady=1,t.$slide.trigger("refresh"),i.afterLoad(t)}),s.on("refresh.fb",function(){var n,i,s=t.$content,r=a.css.width,c=a.css.height;if(1===e[0].isReady){try{n=e.contents(),i=n.find("body")}catch(t){}i&&i.length&&i.children().length&&(s.css({width:"",height:""}),r===o&&(r=Math.ceil(Math.max(i[0].clientWidth,i.outerWidth(!0)))),r&&s.width(r),c===o&&(c=Math.ceil(Math.max(i[0].clientHeight,i.outerHeight(!0)))),c&&s.height(c)),s.removeClass("fancybox-is-hidden")}})):this.afterLoad(t),e.attr("src",t.src),s.one("onReset",function(){try{n(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(t){}n(this).off("refresh.fb").empty(),t.isLoaded=!1})},setContent:function(t,e){var o=this;o.isClosing||(o.hideLoading(t),t.$content&&n.fancybox.stop(t.$content),t.$slide.empty(),l(e)&&e.parent().length?(e.parent().parent(".fancybox-slide--inline").trigger("onReset"),t.$placeholder=n("<div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===n.type(e)&&(e=n("<div>").append(n.trim(e)).contents(),3===e[0].nodeType&&(e=n("<div>").html(e))),t.opts.filter&&(e=n("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){n(this).find("video,audio").trigger("pause"),t.$placeholder&&(t.$placeholder.after(e.hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(n(this).empty(),t.isLoaded=!1)}),n(e).appendTo(t.$slide),n(e).is("video,audio")&&(n(e).addClass("fancybox-video"),n(e).wrap("<div></div>"),t.contentType="video",t.opts.width=t.opts.width||n(e).attr("width"),t.opts.height=t.opts.height||n(e).attr("height")),t.$content=t.$slide.children().filter("div,form,main,video,audio").first().addClass("fancybox-content"),t.$slide.addClass("fancybox-slide--"+t.contentType),this.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.trigger("onReset").removeClass("fancybox-slide--"+t.contentType).addClass("fancybox-slide--error"),t.contentType="html",this.setContent(t,this.translate(t,t.opts.errorTpl)),t.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(t){var e=this;t=t||e.current,t&&!t.$spinner&&(t.$spinner=n(e.translate(e,e.opts.spinnerTpl)).appendTo(t.$slide))},hideLoading:function(t){var e=this;t=t||e.current,t&&t.$spinner&&(t.$spinner.remove(),delete t.$spinner)},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),t.pos===e.currPos&&e.updateCursor(),!t.opts.smallBtn||t.$smallBtn&&t.$smallBtn.length||(t.$smallBtn=n(e.translate(t,t.opts.btnTpl.smallBtn)).prependTo(t.$content)),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&n('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),e.revealContent(t))},revealContent:function(t){var e,i,a,s,r=this,c=t.$slide,l=!1,d=!1;return e=t.opts[r.firstRun?"animationEffect":"transitionEffect"],a=t.opts[r.firstRun?"animationDuration":"transitionDuration"],a=parseInt(t.forcedDuration===o?a:t.forcedDuration,10),t.pos===r.currPos&&(t.isComplete?e=!1:r.isAnimating=!0),!t.isMoved&&t.pos===r.currPos&&a||(e=!1),"zoom"===e&&(t.pos===r.currPos&&a&&"image"===t.type&&!t.hasError&&(d=r.getThumbPos(t))?l=r.getFitPos(t):e="fade"),"zoom"===e?(l.scaleX=l.width/d.width,l.scaleY=l.height/d.height,s=t.opts.zoomOpacity,"auto"==s&&(s=Math.abs(t.width/t.height-d.width/d.height)>.1),s&&(d.opacity=.1,l.opacity=1),n.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),d),f(t.$content),void n.fancybox.animate(t.$content,l,a,function(){r.isAnimating=!1,r.complete()})):(r.updateSlide(t),e?(n.fancybox.stop(c),i="fancybox-animated fancybox-slide--"+(t.pos>=r.prevPos?"next":"previous")+" fancybox-fx-"+e,c.removeAttr("style").removeClass("fancybox-slide--current fancybox-slide--next fancybox-slide--previous").addClass(i),t.$content.removeClass("fancybox-is-hidden"),f(c),void n.fancybox.animate(c,"fancybox-slide--current",a,function(e){c.removeClass(i).removeAttr("style"),t.pos===r.currPos&&r.complete()},!0)):(f(c),t.$content.removeClass("fancybox-is-hidden"),void(t.pos===r.currPos&&r.complete())))},getThumbPos:function(o){var i,a=this,s=!1,r=o.opts.$thumb,c=r&&r.length&&r[0].ownerDocument===e?r.offset():0,l=function(e){for(var o,i=e[0],a=i.getBoundingClientRect(),s=[];null!==i.parentElement;)"hidden"!==n(i.parentElement).css("overflow")&&"auto"!==n(i.parentElement).css("overflow")||s.push(i.parentElement.getBoundingClientRect()),i=i.parentElement;return o=s.every(function(t){var e=Math.min(a.right,t.right)-Math.max(a.left,t.left),n=Math.min(a.bottom,t.bottom)-Math.max(a.top,t.top);return e>0&&n>0}),o&&a.bottom>0&&a.right>0&&a.left<n(t).width()&&a.top<n(t).height()};return c&&l(r)&&(i=a.$refs.stage.offset(),s={top:c.top-i.top+parseFloat(r.css("border-top-width")||0),left:c.left-i.left+parseFloat(r.css("border-left-width")||0),width:r.width(),height:r.height(),scaleX:1,scaleY:1}),s},complete:function(){var t=this,o=t.current,i={};!o.isMoved&&o.isLoaded&&(o.isComplete||(o.isComplete=!0,o.$slide.siblings().trigger("onReset"),t.preload("inline"),f(o.$slide),o.$slide.addClass("fancybox-slide--complete"),n.each(t.slides,function(e,o){o.pos>=t.currPos-1&&o.pos<=t.currPos+1?i[o.pos]=o:o&&(n.fancybox.stop(o.$slide),o.$slide.off().remove())}),t.slides=i),t.isAnimating=!1,t.updateCursor(),t.trigger("afterShow"),o.$slide.find("video,audio").filter(":visible:first").trigger("play"),(n(e.activeElement).is("[disabled]")||o.opts.autoFocus&&"image"!=o.type&&"iframe"!==o.type)&&t.focus())},preload:function(t){var e=this,n=e.slides[e.currPos+1],o=e.slides[e.currPos-1];n&&n.type===t&&e.loadSlide(n),o&&o.type===t&&e.loadSlide(o)},focus:function(){var t,e=this.current;this.isClosing||e&&e.isComplete&&e.$content&&(t=e.$content.find("input[autofocus]:enabled:visible:first"),t.length||(t=e.$content.find("button,:input,[tabindex],a").filter(":enabled:visible:first")),t=t&&t.length?t:e.$content,t.trigger("focus"))},activate:function(){var t=this;n(".fancybox-container").each(function(){var e=n(this).data("FancyBox");e&&e.id!==t.id&&!e.isClosing&&(e.trigger("onDeactivate"),e.removeEvents(),e.isVisible=!1)}),t.isVisible=!0,(t.current||t.isIdle)&&(t.update(),t.updateControls()),t.trigger("onActivate"),t.addEvents()},close:function(t,e){var o,i,a,s,r,c,l,p=this,h=p.current,g=function(){p.cleanUp(t)};return!p.isClosing&&(p.isClosing=!0,p.trigger("beforeClose",t)===!1?(p.isClosing=!1,d(function(){p.update()}),!1):(p.removeEvents(),h.timouts&&clearTimeout(h.timouts),a=h.$content,o=h.opts.animationEffect,i=n.isNumeric(e)?e:o?h.opts.animationDuration:0,h.$slide.off(u).removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),h.$slide.siblings().trigger("onReset").remove(),i&&p.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing"),p.hideLoading(h),p.hideControls(),p.updateCursor(),"zoom"!==o||t!==!0&&a&&i&&"image"===h.type&&!h.hasError&&(l=p.getThumbPos(h))||(o="fade"),"zoom"===o?(n.fancybox.stop(a),s=n.fancybox.getTranslate(a),c={top:s.top,left:s.left,scaleX:s.width/l.width,scaleY:s.height/l.height,width:l.width,height:l.height},r=h.opts.zoomOpacity,"auto"==r&&(r=Math.abs(h.width/h.height-l.width/l.height)>.1),r&&(l.opacity=0),n.fancybox.setTranslate(a,c),f(a),n.fancybox.animate(a,l,i,g),!0):(o&&i?t===!0?setTimeout(g,i):n.fancybox.animate(h.$slide.removeClass("fancybox-slide--current"),"fancybox-animated fancybox-slide--previous fancybox-fx-"+o,i,g):g(),!0)))},cleanUp:function(t){var e,o=this,i=n("body");o.current.$slide.trigger("onReset"),o.$refs.container.empty().remove(),o.trigger("afterClose",t),o.$lastFocus&&o.current.opts.backFocus&&o.$lastFocus.trigger("focus"),o.current=null,e=n.fancybox.getInstance(),e?e.activate():(i.removeClass("fancybox-active compensate-for-scrollbar"),n("#fancybox-style-noscroll").remove())},trigger:function(t,e){var o,i=Array.prototype.slice.call(arguments,1),a=this,s=e&&e.opts?e:a.current;return s?i.unshift(s):s=a,i.unshift(a),n.isFunction(s.opts[t])&&(o=s.opts[t].apply(s,i)),o===!1?o:void("afterClose"!==t&&a.$refs?a.$refs.container.trigger(t+".fb",i):r.trigger(t+".fb",i))},updateControls:function(t){var e=this,n=e.current,o=n.index,i=n.opts.caption,a=e.$refs.container,s=e.$refs.caption;n.$slide.trigger("refresh"),e.$caption=i&&i.length?s.html(i):null,e.isHiddenControls||e.isIdle||e.showControls(),a.find("[data-fancybox-count]").html(e.group.length),a.find("[data-fancybox-index]").html(o+1),a.find("[data-fancybox-prev]").toggleClass("disabled",!n.opts.loop&&o<=0),a.find("[data-fancybox-next]").toggleClass("disabled",!n.opts.loop&&o>=e.group.length-1),"image"===n.type?a.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",n.opts.image.src||n.src).show():n.opts.toolbar&&a.find("[data-fancybox-download],[data-fancybox-zoom]").hide()},hideControls:function(){this.isHiddenControls=!0,this.$refs.container.removeClass("fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav")},showControls:function(){var t=this,e=t.current?t.current.opts:t.opts,n=t.$refs.container;t.isHiddenControls=!1,t.idleSecondsCounter=0,n.toggleClass("fancybox-show-toolbar",!(!e.toolbar||!e.buttons)).toggleClass("fancybox-show-infobar",!!(e.infobar&&t.group.length>1)).toggleClass("fancybox-show-nav",!!(e.arrows&&t.group.length>1)).toggleClass("fancybox-is-modal",!!e.modal),t.$caption?n.addClass("fancybox-show-caption "):n.removeClass("fancybox-show-caption")},toggleControls:function(){this.isHiddenControls?this.showControls():this.hideControls()}}),n.fancybox={version:"3.3.5",defaults:a,getInstance:function(t){var e=n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),o=Array.prototype.slice.call(arguments,1);return e instanceof h&&("string"===n.type(t)?e[t].apply(e,o):"function"===n.type(t)&&t.apply(e,o),e)},open:function(t,e,n){return new h(t,e,n)},close:function(t){var e=this.getInstance();e&&(e.close(),t===!0&&this.close())},destroy:function(){this.close(!0),r.add("body").off("click.fb-start","**")},isMobile:e.createTouch!==o&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var n=e.createElement("div");return t.getComputedStyle&&t.getComputedStyle(n)&&t.getComputedStyle(n).getPropertyValue("transform")&&!(e.documentMode&&e.documentMode<11)}(),getTranslate:function(t){var e;return!(!t||!t.length)&&(e=t[0].getBoundingClientRect(),{top:e.top||0,left:e.left||0,width:e.width,height:e.height,opacity:parseFloat(t.css("opacity"))})},setTranslate:function(t,e){var n="",i={};if(t&&e)return e.left===o&&e.top===o||(n=(e.left===o?t.position().left:e.left)+"px, "+(e.top===o?t.position().top:e.top)+"px",n=this.use3d?"translate3d("+n+", 0px)":"translate("+n+")"),e.scaleX!==o&&e.scaleY!==o&&(n=(n.length?n+" ":"")+"scale("+e.scaleX+", "+e.scaleY+")"),n.length&&(i.transform=n),e.opacity!==o&&(i.opacity=e.opacity),e.width!==o&&(i.width=e.width),e.height!==o&&(i.height=e.height),t.css(i)},animate:function(t,e,i,a,s){var r=!1;n.isFunction(i)&&(a=i,i=null),n.isPlainObject(e)||t.removeAttr("style"),n.fancybox.stop(t),t.on(u,function(o){(!o||!o.originalEvent||t.is(o.originalEvent.target)&&"z-index"!=o.originalEvent.propertyName)&&(n.fancybox.stop(t),r&&n.fancybox.setTranslate(t,r),n.isPlainObject(e)?s===!1&&t.removeAttr("style"):s!==!0&&t.removeClass(e),n.isFunction(a)&&a(o))}),n.isNumeric(i)&&t.css("transition-duration",i+"ms"),n.isPlainObject(e)?(e.scaleX!==o&&e.scaleY!==o&&(r=n.extend({},e,{width:t.width()*e.scaleX,height:t.height()*e.scaleY,scaleX:1,scaleY:1}),delete e.width,delete e.height,t.parent().hasClass("fancybox-slide--image")&&t.parent().addClass("fancybox-is-scaling")),n.fancybox.setTranslate(t,e)):t.addClass(e),t.data("timer",setTimeout(function(){t.trigger("transitionend")},i+16))},stop:function(t){t&&t.length&&(clearTimeout(t.data("timer")),t.off("transitionend").css("transition-duration",""),t.parent().removeClass("fancybox-is-scaling"))}},n.fn.fancybox=function(t){var e;return t=t||{},e=t.selector||!1,e?n("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},i):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},i),this},r.on("click.fb-start","[data-fancybox]",i),r.on("click.fb-start","[data-trigger]",function(t){i(t,{$target:n('[data-fancybox="'+n(t.currentTarget).attr("data-trigger")+'"]').eq(n(t.currentTarget).attr("data-index")||0),$trigger:n(this)})})}}(window,document,window.jQuery||jQuery),function(t){"use strict";var e=function(e,n,o){if(e)return o=o||"","object"===t.type(o)&&(o=t.param(o,!0)),t.each(n,function(t,n){e=e.replace("$"+t,n||"")}),o.length&&(e+=(e.indexOf("?")>0?"&":"?")+o),e},n={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"//www.youtube.com/embed/$4",thumb:"//img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1,api:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12]+"").replace(/\?/,"&")+"&output="+(t[12]&&t[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}};t(document).on("objectNeedsType.fb",function(o,i,a){var s,r,c,l,d,u,f,p=a.src||"",h=!1;s=t.extend(!0,{},n,a.opts.media),t.each(s,function(n,o){if(c=p.match(o.matcher)){if(h=o.type,f=n,u={},o.paramPlace&&c[o.paramPlace]){d=c[o.paramPlace],"?"==d[0]&&(d=d.substring(1)),d=d.split("&");for(var i=0;i<d.length;++i){var s=d[i].split("=",2);2==s.length&&(u[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}}return l=t.extend(!0,{},o.params,a.opts[n],u),p="function"===t.type(o.url)?o.url.call(this,c,l,a):e(o.url,c,l),r="function"===t.type(o.thumb)?o.thumb.call(this,c,l,a):e(o.thumb,c),"youtube"===n?p=p.replace(/&t=((\d+)m)?(\d+)s/,function(t,e,n,o){return"&start="+((n?60*parseInt(n,10):0)+parseInt(o,10))}):"vimeo"===n&&(p=p.replace("&%23","#")),!1}}),h?(a.opts.thumb||a.opts.$thumb&&a.opts.$thumb.length||(a.opts.thumb=r),"iframe"===h&&(a.opts=t.extend(!0,a.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),t.extend(a,{type:h,src:p,origSrc:a.src,contentSource:f,contentType:"image"===h?"image":"gmap_place"==f||"gmap_search"==f?"map":"video"})):p&&(a.type=a.opts.defaultType)})}(window.jQuery||jQuery),function(t,e,n){"use strict";var o=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),i=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),a=function(e){var n=[];e=e.originalEvent||e||t.e,e=e.touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var o in e)e[o].pageX?n.push({x:e[o].pageX,y:e[o].pageY}):e[o].clientX&&n.push({x:e[o].clientX,y:e[o].clientY});return n},s=function(t,e,n){return e&&t?"x"===n?t.x-e.x:"y"===n?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},r=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio')||n.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var e=0,o=t[0].attributes,i=o.length;e<i;e++)if("data-fancybox-"===o[e].nodeName.substr(0,14))return!0;return!1},c=function(e){var n=t.getComputedStyle(e)["overflow-y"],o=t.getComputedStyle(e)["overflow-x"],i=("scroll"===n||"auto"===n)&&e.scrollHeight>e.clientHeight,a=("scroll"===o||"auto"===o)&&e.scrollWidth>e.clientWidth;return i||a},l=function(t){for(var e=!1;;){if(e=c(t.get(0)))break;if(t=t.parent(),!t.length||t.hasClass("fancybox-stage")||t.is("body"))break}return e},d=function(t){var e=this;e.instance=t,e.$bg=t.$refs.bg,e.$stage=t.$refs.stage,e.$container=t.$refs.container,e.destroy(),e.$container.on("touchstart.fb.touch mousedown.fb.touch",n.proxy(e,"ontouchstart"))};d.prototype.destroy=function(){this.$container.off(".fb.touch")},d.prototype.ontouchstart=function(o){var i=this,c=n(o.target),d=i.instance,u=d.current,f=u.$content,p="touchstart"==o.type;if(p&&i.$container.off("mousedown.fb.touch"),(!o.originalEvent||2!=o.originalEvent.button)&&c.length&&!r(c)&&!r(c.parent())&&(c.is("img")||!(o.originalEvent.clientX>c[0].clientWidth+c.offset().left))){if(!u||d.isAnimating||d.isClosing)return o.stopPropagation(),void o.preventDefault();if(i.realPoints=i.startPoints=a(o),i.startPoints.length){if(o.stopPropagation(),i.startEvent=o,i.canTap=!0,i.$target=c,i.$content=f,i.opts=u.opts.touch,i.isPanning=!1,i.isSwiping=!1,i.isZooming=!1,i.isScrolling=!1,i.startTime=(new Date).getTime(),i.distanceX=i.distanceY=i.distance=0,i.canvasWidth=Math.round(u.$slide[0].clientWidth),i.canvasHeight=Math.round(u.$slide[0].clientHeight),i.contentLastPos=null,i.contentStartPos=n.fancybox.getTranslate(i.$content)||{top:0,left:0},i.sliderStartPos=i.sliderLastPos||n.fancybox.getTranslate(u.$slide),i.stagePos=n.fancybox.getTranslate(d.$refs.stage),i.sliderStartPos.top-=i.stagePos.top,i.sliderStartPos.left-=i.stagePos.left,i.contentStartPos.top-=i.stagePos.top,i.contentStartPos.left-=i.stagePos.left,n(e).off(".fb.touch").on(p?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",n.proxy(i,"ontouchend")).on(p?"touchmove.fb.touch":"mousemove.fb.touch",n.proxy(i,"ontouchmove")),n.fancybox.isMobile&&e.addEventListener("scroll",i.onscroll,!0),!i.opts&&!d.canPan()||!c.is(i.$stage)&&!i.$stage.find(c).length)return void(c.is(".fancybox-image")&&o.preventDefault());n.fancybox.isMobile&&(l(c)||l(c.parent()))||o.preventDefault(),(1===i.startPoints.length||u.hasError)&&(i.instance.canPan()?(n.fancybox.stop(i.$content),i.$content.css("transition-duration",""),i.isPanning=!0):i.isSwiping=!0,i.$container.addClass("fancybox-controls--isGrabbing")),2===i.startPoints.length&&"image"===u.type&&(u.isLoaded||u.$ghost)&&(i.canTap=!1,i.isSwiping=!1,i.isPanning=!1,i.isZooming=!0,n.fancybox.stop(i.$content),i.$content.css("transition-duration",""),i.centerPointStartX=.5*(i.startPoints[0].x+i.startPoints[1].x)-n(t).scrollLeft(),i.centerPointStartY=.5*(i.startPoints[0].y+i.startPoints[1].y)-n(t).scrollTop(),i.percentageOfImageAtPinchPointX=(i.centerPointStartX-i.contentStartPos.left)/i.contentStartPos.width,i.percentageOfImageAtPinchPointY=(i.centerPointStartY-i.contentStartPos.top)/i.contentStartPos.height,i.startDistanceBetweenFingers=s(i.startPoints[0],i.startPoints[1]))}}},d.prototype.onscroll=function(t){var n=this;n.isScrolling=!0,e.removeEventListener("scroll",n.onscroll,!0)},d.prototype.ontouchmove=function(t){var e=this,o=n(t.target);return void 0!==t.originalEvent.buttons&&0===t.originalEvent.buttons?void e.ontouchend(t):e.isScrolling||!o.is(e.$stage)&&!e.$stage.find(o).length?void(e.canTap=!1):(e.newPoints=a(t),void((e.opts||e.instance.canPan())&&e.newPoints.length&&e.newPoints.length&&(e.isSwiping&&e.isSwiping===!0||t.preventDefault(),e.distanceX=s(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=s(e.newPoints[0],e.startPoints[0],"y"),e.distance=s(e.newPoints[0],e.startPoints[0]),e.distance>0&&(e.isSwiping?e.onSwipe(t):e.isPanning?e.onPan():e.isZooming&&e.onZoom()))))},d.prototype.onSwipe=function(e){var a,s=this,r=s.isSwiping,c=s.sliderStartPos.left||0;if(r!==!0)"x"==r&&(s.distanceX>0&&(s.instance.group.length<2||0===s.instance.current.index&&!s.instance.current.opts.loop)?c+=Math.pow(s.distanceX,.8):s.distanceX<0&&(s.instance.group.length<2||s.instance.current.index===s.instance.group.length-1&&!s.instance.current.opts.loop)?c-=Math.pow(-s.distanceX,.8):c+=s.distanceX),s.sliderLastPos={top:"x"==r?0:s.sliderStartPos.top+s.distanceY,left:c},s.requestId&&(i(s.requestId),s.requestId=null),s.requestId=o(function(){s.sliderLastPos&&(n.each(s.instance.slides,function(t,e){var o=e.pos-s.instance.currPos;n.fancybox.setTranslate(e.$slide,{top:s.sliderLastPos.top,left:s.sliderLastPos.left+o*s.canvasWidth+o*e.opts.gutter})}),s.$container.addClass("fancybox-is-sliding"))});else if(Math.abs(s.distance)>10){if(s.canTap=!1,s.instance.group.length<2&&s.opts.vertical?s.isSwiping="y":s.instance.isDragging||s.opts.vertical===!1||"auto"===s.opts.vertical&&n(t).width()>800?s.isSwiping="x":(a=Math.abs(180*Math.atan2(s.distanceY,s.distanceX)/Math.PI),s.isSwiping=a>45&&a<135?"y":"x"),s.canTap=!1,"y"===s.isSwiping&&n.fancybox.isMobile&&(l(s.$target)||l(s.$target.parent())))return void(s.isScrolling=!0);s.instance.isDragging=s.isSwiping,s.startPoints=s.newPoints,n.each(s.instance.slides,function(t,e){n.fancybox.stop(e.$slide),e.$slide.css("transition-duration",""),e.inTransition=!1,e.pos===s.instance.current.pos&&(s.sliderStartPos.left=n.fancybox.getTranslate(e.$slide).left-n.fancybox.getTranslate(s.instance.$refs.stage).left)}),s.instance.SlideShow&&s.instance.SlideShow.isActive&&s.instance.SlideShow.stop()}},d.prototype.onPan=function(){var t=this;return s(t.newPoints[0],t.realPoints[0])<(n.fancybox.isMobile?10:5)?void(t.startPoints=t.newPoints):(t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&(i(t.requestId),t.requestId=null),void(t.requestId=o(function(){n.fancybox.setTranslate(t.$content,t.contentLastPos)})))},d.prototype.limitMovement=function(){var t,e,n,o,i,a,s=this,r=s.canvasWidth,c=s.canvasHeight,l=s.distanceX,d=s.distanceY,u=s.contentStartPos,f=u.left,p=u.top,h=u.width,g=u.height;return i=h>r?f+l:f,a=p+d,t=Math.max(0,.5*r-.5*h),e=Math.max(0,.5*c-.5*g),n=Math.min(r-h,.5*r-.5*h),o=Math.min(c-g,.5*c-.5*g),l>0&&i>t&&(i=t-1+Math.pow(-t+f+l,.8)||0),l<0&&i<n&&(i=n+1-Math.pow(n-f-l,.8)||0),d>0&&a>e&&(a=e-1+Math.pow(-e+p+d,.8)||0),d<0&&a<o&&(a=o+1-Math.pow(o-p-d,.8)||0),{top:a,left:i}},d.prototype.limitPosition=function(t,e,n,o){var i=this,a=i.canvasWidth,s=i.canvasHeight;return n>a?(t=t>0?0:t,t=t<a-n?a-n:t):t=Math.max(0,a/2-n/2),o>s?(e=e>0?0:e,e=e<s-o?s-o:e):e=Math.max(0,s/2-o/2),{top:e,left:t}},d.prototype.onZoom=function(){var e=this,a=e.contentStartPos,r=a.width,c=a.height,l=a.left,d=a.top,u=s(e.newPoints[0],e.newPoints[1]),f=u/e.startDistanceBetweenFingers,p=Math.floor(r*f),h=Math.floor(c*f),g=(r-p)*e.percentageOfImageAtPinchPointX,b=(c-h)*e.percentageOfImageAtPinchPointY,m=(e.newPoints[0].x+e.newPoints[1].x)/2-n(t).scrollLeft(),y=(e.newPoints[0].y+e.newPoints[1].y)/2-n(t).scrollTop(),v=m-e.centerPointStartX,x=y-e.centerPointStartY,w=l+(g+v),$=d+(b+x),S={top:$,left:w,scaleX:f,scaleY:f};e.canTap=!1,e.newWidth=p,e.newHeight=h,e.contentLastPos=S,e.requestId&&(i(e.requestId),e.requestId=null),e.requestId=o(function(){n.fancybox.setTranslate(e.$content,e.contentLastPos)})},d.prototype.ontouchend=function(t){var o=this,s=Math.max((new Date).getTime()-o.startTime,1),r=o.isSwiping,c=o.isPanning,l=o.isZooming,d=o.isScrolling;return o.endPoints=a(t),o.$container.removeClass("fancybox-controls--isGrabbing"),n(e).off(".fb.touch"),e.removeEventListener("scroll",o.onscroll,!0),o.requestId&&(i(o.requestId),o.requestId=null),o.isSwiping=!1,o.isPanning=!1,o.isZooming=!1,o.isScrolling=!1,o.instance.isDragging=!1,o.canTap?o.onTap(t):(o.speed=366,o.velocityX=o.distanceX/s*.5,o.velocityY=o.distanceY/s*.5,o.speedX=Math.max(.5*o.speed,Math.min(1.5*o.speed,1/Math.abs(o.velocityX)*o.speed)),void(c?o.endPanning():l?o.endZooming():o.endSwiping(r,d)))},d.prototype.endSwiping=function(t,e){var o=this,i=!1,a=o.instance.group.length;o.sliderLastPos=null,"y"==t&&!e&&Math.abs(o.distanceY)>50?(n.fancybox.animate(o.instance.current.$slide,{top:o.sliderStartPos.top+o.distanceY+150*o.velocityY,opacity:0},200),i=o.instance.close(!0,200)):"x"==t&&o.distanceX>50&&a>1?i=o.instance.previous(o.speedX):"x"==t&&o.distanceX<-50&&a>1&&(i=o.instance.next(o.speedX)),i!==!1||"x"!=t&&"y"!=t||(e||a<2?o.instance.centerSlide(o.instance.current,150):o.instance.jumpTo(o.instance.current.index)),o.$container.removeClass("fancybox-is-sliding")},d.prototype.endPanning=function(){var t,e,o,i=this;i.contentLastPos&&(i.opts.momentum===!1?(t=i.contentLastPos.left,e=i.contentLastPos.top):(t=i.contentLastPos.left+i.velocityX*i.speed,e=i.contentLastPos.top+i.velocityY*i.speed),o=i.limitPosition(t,e,i.contentStartPos.width,i.contentStartPos.height),o.width=i.contentStartPos.width,o.height=i.contentStartPos.height,n.fancybox.animate(i.$content,o,330))},d.prototype.endZooming=function(){var t,e,o,i,a=this,s=a.instance.current,r=a.newWidth,c=a.newHeight;a.contentLastPos&&(t=a.contentLastPos.left,e=a.contentLastPos.top,i={top:e,left:t,width:r,height:c,scaleX:1,scaleY:1},n.fancybox.setTranslate(a.$content,i),r<a.canvasWidth&&c<a.canvasHeight?a.instance.scaleToFit(150):r>s.width||c>s.height?a.instance.scaleToActual(a.centerPointStartX,a.centerPointStartY,150):(o=a.limitPosition(t,e,r,c),n.fancybox.setTranslate(a.$content,n.fancybox.getTranslate(a.$content)),n.fancybox.animate(a.$content,o,150)))},d.prototype.onTap=function(e){var o,i=this,s=n(e.target),r=i.instance,c=r.current,l=e&&a(e)||i.startPoints,d=l[0]?l[0].x-n(t).scrollLeft()-i.stagePos.left:0,u=l[0]?l[0].y-n(t).scrollTop()-i.stagePos.top:0,f=function(t){var o=c.opts[t];if(n.isFunction(o)&&(o=o.apply(r,[c,e])),o)switch(o){case"close":r.close(i.startEvent);break;case"toggleControls":r.toggleControls(!0);break;case"next":r.next();break;case"nextOrClose":r.group.length>1?r.next():r.close(i.startEvent);break;case"zoom":"image"==c.type&&(c.isLoaded||c.$ghost)&&(r.canPan()?r.scaleToFit():r.isScaledDown()?r.scaleToActual(d,u):r.group.length<2&&r.close(i.startEvent))}};if((!e.originalEvent||2!=e.originalEvent.button)&&(s.is("img")||!(d>s[0].clientWidth+s.offset().left))){if(s.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))o="Outside";else if(s.is(".fancybox-slide"))o="Slide";else{if(!r.current.$content||!r.current.$content.find(s).addBack().filter(s).length)return;o="Content"}if(i.tapped){if(clearTimeout(i.tapped),i.tapped=null,Math.abs(d-i.tapX)>50||Math.abs(u-i.tapY)>50)return this;f("dblclick"+o)}else i.tapX=d,i.tapY=u,c.opts["dblclick"+o]&&c.opts["dblclick"+o]!==c.opts["click"+o]?i.tapped=setTimeout(function(){i.tapped=null,f("click"+o)},500):f("click"+o);return this}},n(e).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new d(e))})}(window,document,window.jQuery||jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg viewBox="0 0 40 40"><path d="M13,12 L27,20 L13,27 Z" /><path d="M15,10 v19 M23,10 v19" /></svg></button>'},slideShow:{autoStart:!1,speed:3e3}});var n=function(t){this.instance=t,this.init()};e.extend(n.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this;t.$button=t.instance.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),(t.instance.group.length<2||!t.instance.group[t.instance.currIndex].opts.slideShow)&&t.$button.hide()},set:function(t){var e=this;e.instance&&e.instance.current&&(t===!0||e.instance.current.opts.loop||e.instance.currIndex<e.instance.group.length-1)?e.timer=setTimeout(function(){e.isActive&&e.instance.jumpTo((e.instance.currIndex+1)%e.instance.group.length)},e.instance.current.opts.slideShow.speed):(e.stop(),e.instance.idleSecondsCounter=0,e.instance.showControls())},clear:function(){var t=this;clearTimeout(t.timer),t.timer=null},start:function(){var t=this,e=t.instance.current;e&&(t.isActive=!0,t.$button.attr("title",e.opts.i18n[e.opts.lang].PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),t.set(!0))},stop:function(){var t=this,e=t.instance.current;t.clear(),t.$button.attr("title",e.opts.i18n[e.opts.lang].PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),t.isActive=!1},toggle:function(){var t=this;t.isActive?t.stop():t.start()}}),e(t).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new n(e))},"beforeShow.fb":function(t,e,n,o){var i=e&&e.SlideShow;o?i&&n.opts.slideShow.autoStart&&i.start():i&&i.isActive&&i.clear()},"afterShow.fb":function(t,e,n){var o=e&&e.SlideShow;o&&o.isActive&&o.set()},"afterKeydown.fb":function(n,o,i,a,s){var r=o&&o.SlideShow;!r||!i.opts.slideShow||80!==s&&32!==s||e(t.activeElement).is("button,a,input")||(a.preventDefault(),r.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var n=e&&e.SlideShow;n&&n.stop()}}),e(t).on("visibilitychange",function(){var n=e.fancybox.getInstance(),o=n&&n.SlideShow;o&&o.isActive&&(t.hidden?o.clear():o.set())})}(document,window.jQuery||jQuery),function(t,e){"use strict";var n=function(){for(var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n={},o=0;o<e.length;o++){var i=e[o];if(i&&i[1]in t){for(var a=0;a<i.length;a++)n[e[0][a]]=i[a];return n}}return!1}();if(!n)return void(e&&e.fancybox&&(e.fancybox.defaults.btnTpl.fullScreen=!1));var o={request:function(e){e=e||t.documentElement,e[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){t[n.exitFullscreen]()},toggle:function(e){e=e||t.documentElement,this.isFullscreen()?this.exit():this.request(e)},isFullscreen:function(){return Boolean(t[n.fullscreenElement])},enabled:function(){return Boolean(t[n.fullscreenEnabled])}};e.extend(!0,e.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="{{FULL_SCREEN}}"><svg viewBox="0 0 40 40"><path d="M9,12 v16 h22 v-16 h-22 v8" /></svg></button>'},fullScreen:{autoStart:!1}}),e(t).on({"onInit.fb":function(t,e){var n;e&&e.group[e.currIndex].opts.fullScreen?(n=e.$refs.container,n.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),o.toggle()}),e.opts.fullScreen&&e.opts.fullScreen.autoStart===!0&&o.request(),e.FullScreen=o):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide()},"afterKeydown.fb":function(t,e,n,o,i){e&&e.FullScreen&&70===i&&(o.preventDefault(),e.FullScreen.toggle())},"beforeClose.fb":function(t,e){e&&e.FullScreen&&e.$refs.container.hasClass("fancybox-is-fullscreen")&&o.exit()}}),e(t).on(n.fullscreenchange,function(){var t=o.isFullscreen(),n=e.fancybox.getInstance();n&&(n.current&&"image"===n.current.type&&n.isAnimating&&(n.current.$content.css("transition","none"),n.isAnimating=!1,n.update(!0,!0,0)),n.trigger("onFullscreenChange",t),n.$refs.container.toggleClass("fancybox-is-fullscreen",t))})}(document,window.jQuery||jQuery),function(t,e){"use strict";var n="fancybox-thumbs",o=n+"-active",i=n+"-loading";e.fancybox.defaults=e.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg viewBox="0 0 120 120"><path d="M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z" /></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},e.fancybox.defaults);var a=function(t){this.init(t)};e.extend(a.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e,n,o=this;o.instance=t,t.Thumbs=o,o.opts=t.group[t.currIndex].opts.thumbs,e=t.group[0],e=e.opts.thumb||!(!e.opts.$thumb||!e.opts.$thumb.length)&&e.opts.$thumb.attr("src"),t.group.length>1&&(n=t.group[1],n=n.opts.thumb||!(!n.opts.$thumb||!n.opts.$thumb.length)&&n.opts.$thumb.attr("src")),o.$button=t.$refs.toolbar.find("[data-fancybox-thumbs]"),o.opts&&e&&n&&e&&n?(o.$button.show().on("click",function(){o.toggle()}),o.isActive=!0):o.$button.hide()},create:function(){var t,o=this,a=o.instance,s=o.opts.parentEl,r=[];o.$grid||(o.$grid=e('<div class="'+n+" "+n+"-"+o.opts.axis+'"></div>').appendTo(a.$refs.container.find(s).addBack().filter(s)),o.$grid.on("click","li",function(){a.jumpTo(e(this).attr("data-index"))})),o.$list||(o.$list=e("<ul>").appendTo(o.$grid)),e.each(a.group,function(e,n){t=n.opts.thumb||(n.opts.$thumb?n.opts.$thumb.attr("src"):null),t||"image"!==n.type||(t=n.src),r.push('<li data-index="'+e+'" tabindex="0" class="'+i+'"'+(t&&t.length?' style="background-image:url('+t+')" />':"")+"></li>")}),o.$list[0].innerHTML=r.join(""),"x"===o.opts.axis&&o.$list.width(parseInt(o.$grid.css("padding-right"),10)+a.group.length*o.$list.children().eq(0).outerWidth(!0))},focus:function(t){var e,n,i=this,a=i.$list,s=i.$grid;i.instance.current&&(e=a.children().removeClass(o).filter('[data-index="'+i.instance.current.index+'"]').addClass(o),n=e.position(),"y"===i.opts.axis&&(n.top<0||n.top>a.height()-e.outerHeight())?a.stop().animate({scrollTop:a.scrollTop()+n.top},t):"x"===i.opts.axis&&(n.left<s.scrollLeft()||n.left>s.scrollLeft()+(s.width()-e.outerWidth()))&&a.parent().stop().animate({scrollLeft:n.left},t))},update:function(){var t=this;t.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),t.isVisible?(t.$grid||t.create(),t.instance.trigger("onThumbsShow"),t.focus(0)):t.$grid&&t.instance.trigger("onThumbsHide"),t.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),e(t).on({"onInit.fb":function(t,e){var n;e&&!e.Thumbs&&(n=new a(e),n.isActive&&n.opts.autoStart===!0&&n.show())},"beforeShow.fb":function(t,e,n,o){var i=e&&e.Thumbs;i&&i.isVisible&&i.focus(o?0:250)},"afterKeydown.fb":function(t,e,n,o,i){var a=e&&e.Thumbs;a&&a.isActive&&71===i&&(o.preventDefault(),a.toggle())},"beforeClose.fb":function(t,e){var n=e&&e.Thumbs;n&&n.isVisible&&n.opts.hideOnClose!==!1&&n.$grid.hide()}})}(document,window.jQuery||jQuery),function(t,e){"use strict";function n(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}e.extend(!0,e.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg viewBox="0 0 40 40"><path d="M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z"></svg></button>'},share:{url:function(t,e){return!t.currentHash&&"inline"!==e.type&&"html"!==e.type&&(e.origSrc||e.src)||window.location},tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" /></p></div>'}}),e(t).on("click","[data-fancybox-share]",function(){var t,o,i=e.fancybox.getInstance(),a=i.current||null;a&&("function"===e.type(a.opts.share.url)&&(t=a.opts.share.url.apply(a,[i,a])),o=a.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===a.type?encodeURIComponent(a.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g,n(t)).replace(/\{\{descr\}\}/g,i.$caption?encodeURIComponent(i.$caption.text()):""),e.fancybox.open({src:i.translate(i,o),type:"html",opts:{animationEffect:!1,afterLoad:function(t,e){i.$refs.container.one("beforeClose.fb",function(){t.close(null,0)}),e.$content.find(".fancybox-share__links a").click(function(){return window.open(this.href,"Share","width=550, height=450"),!1})}}}))})}(document,window.jQuery||jQuery),function(t,e,n){"use strict";function o(){var t=e.location.hash.substr(1),n=t.split("-"),o=n.length>1&&/^\+?\d+$/.test(n[n.length-1])?parseInt(n.pop(-1),10)||1:1,i=n.join("-");return{hash:t,index:o<1?1:o,gallery:i}}function i(t){var e;""!==t.gallery&&(e=n("[data-fancybox='"+n.escapeSelector(t.gallery)+"']").eq(t.index-1).trigger("click.fb-start"))}function a(t){var e,n;return!!t&&(e=t.current?t.current.opts:t.opts,n=e.hash||(e.$orig?e.$orig.data("fancybox"):""),""!==n&&n)}n.escapeSelector||(n.escapeSelector=function(t){var e=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,n=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t};return(t+"").replace(e,n)}),n(function(){n.fancybox.defaults.hash!==!1&&(n(t).on({"onInit.fb":function(t,e){var n,i;e.group[e.currIndex].opts.hash!==!1&&(n=o(),i=a(e),i&&n.gallery&&i==n.gallery&&(e.currIndex=n.index-1))},"beforeShow.fb":function(n,o,i,s){var r;i&&i.opts.hash!==!1&&(r=a(o),r&&(o.currentHash=r+(o.group.length>1?"-"+(i.index+1):""),e.location.hash!=="#"+o.currentHash&&(o.origHash||(o.origHash=e.location.hash),o.hashTimer&&clearTimeout(o.hashTimer),o.hashTimer=setTimeout(function(){"replaceState"in e.history?(e.history[s?"pushState":"replaceState"]({},t.title,e.location.pathname+e.location.search+"#"+o.currentHash),s&&(o.hasCreatedHistory=!0)):e.location.hash=o.currentHash,o.hashTimer=null},300))))},"beforeClose.fb":function(n,o,i){var s;i.opts.hash!==!1&&(s=a(o),o.currentHash&&o.hasCreatedHistory?e.history.back():o.currentHash&&("replaceState"in e.history?e.history.replaceState({},t.title,e.location.pathname+e.location.search+(o.origHash||"")):e.location.hash=o.origHash),o.currentHash=null,clearTimeout(o.hashTimer))}}),n(e).on("hashchange.fb",function(){var t,e=o();n.each(n(".fancybox-container").get().reverse(),function(e,o){var i=n(o).data("FancyBox");if(i.currentHash)return t=i,!1}),t?!t.currentHash||t.currentHash===e.gallery+"-"+e.index||1===e.index&&t.currentHash==e.gallery||(t.currentHash=null,t.close()):""!==e.gallery&&i(e)}),setTimeout(function(){n.fancybox.getInstance()||i(o())},50))})}(document,window,window.jQuery||jQuery),function(t,e){"use strict";var n=(new Date).getTime();e(t).on({"onInit.fb":function(t,e,o){e.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",function(t){var o=e.current,i=(new Date).getTime();e.group.length<2||o.opts.wheel===!1||"auto"===o.opts.wheel&&"image"!==o.type||(t.preventDefault(),t.stopPropagation(),o.$slide.hasClass("fancybox-animated")||(t=t.originalEvent||t,i-n<250||(n=i,e[(-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)<0?"next":"previous"]())))})}})}(document,window.jQuery||jQuery);;!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"undefined"!=typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";var e=window.Slick||{};(e=function(){var e=0;return function(t,o){var s,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(t),appendDots:i(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return i('<button type="button" />').text(t+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},i.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden="hidden",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=i(t),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,s=i(t).data("slick")||{},n.options=i.extend({},n.defaults,o,s),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,void 0!==document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=i.proxy(n.autoPlay,n),n.autoPlayClear=i.proxy(n.autoPlayClear,n),n.autoPlayIterator=i.proxy(n.autoPlayIterator,n),n.changeSlide=i.proxy(n.changeSlide,n),n.clickHandler=i.proxy(n.clickHandler,n),n.selectHandler=i.proxy(n.selectHandler,n),n.setPosition=i.proxy(n.setPosition,n),n.swipeHandler=i.proxy(n.swipeHandler,n),n.dragHandler=i.proxy(n.dragHandler,n),n.keyHandler=i.proxy(n.keyHandler,n),n.instanceUid=e++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}}()).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,t,o){var s=this;if("boolean"==typeof t)o=t,t=null;else if(t<0||t>=s.slideCount)return!1;s.unload(),"number"==typeof t?0===t&&0===s.$slides.length?i(e).appendTo(s.$slideTrack):o?i(e).insertBefore(s.$slides.eq(t)):i(e).insertAfter(s.$slides.eq(t)):!0===o?i(e).prependTo(s.$slideTrack):i(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,t){i(t).attr("data-slick-index",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var i=this;if(1===i.options.slidesToShow&&!0===i.options.adaptiveHeight&&!1===i.options.vertical){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.animate({height:e},i.options.speed)}},e.prototype.animateSlide=function(e,t){var o={},s=this;s.animateHeight(),!0===s.options.rtl&&!1===s.options.vertical&&(e=-e),!1===s.transformsEnabled?!1===s.options.vertical?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):!1===s.cssTransitions?(!0===s.options.rtl&&(s.currentLeft=-s.currentLeft),i({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(i){i=Math.ceil(i),!1===s.options.vertical?(o[s.animType]="translate("+i+"px, 0px)",s.$slideTrack.css(o)):(o[s.animType]="translate(0px,"+i+"px)",s.$slideTrack.css(o))},complete:function(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),!1===s.options.vertical?o[s.animType]="translate3d("+e+"px, 0px, 0px)":o[s.animType]="translate3d(0px,"+e+"px, 0px)",s.$slideTrack.css(o),t&&setTimeout(function(){s.disableTransition(),t.call()},s.options.speed))},e.prototype.getNavTarget=function(){var e=this,t=e.options.asNavFor;return t&&null!==t&&(t=i(t).not(e.$slider)),t},e.prototype.asNavFor=function(e){var t=this.getNavTarget();null!==t&&"object"==typeof t&&t.each(function(){var t=i(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)})},e.prototype.applyTransition=function(i){var e=this,t={};!1===e.options.fade?t[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:t[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayClear(),i.slideCount>i.options.slidesToShow&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this,e=i.currentSlide+i.options.slidesToScroll;i.paused||i.interrupted||i.focussed||(!1===i.options.infinite&&(1===i.direction&&i.currentSlide+1===i.slideCount-1?i.direction=0:0===i.direction&&(e=i.currentSlide-i.options.slidesToScroll,i.currentSlide-1==0&&(i.direction=1))),i.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=i(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=i(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},e.prototype.buildDots=function(){var e,t,o=this;if(!0===o.options.dots){for(o.$slider.addClass("slick-dotted"),t=i("<ul />").addClass(o.options.dotsClass),e=0;e<=o.getDotCount();e+=1)t.append(i("<li />").append(o.options.customPaging.call(this,o,e)));o.$dots=t.appendTo(o.options.appendDots),o.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){i(t).attr("data-slick-index",e).data("originalStyling",i(t).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?i('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0!==e.options.centerMode&&!0!==e.options.swipeToSlide||(e.options.slidesToScroll=1),i("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},e.prototype.buildRows=function(){var i,e,t,o,s,n,r,l=this;if(o=document.createDocumentFragment(),n=l.$slider.children(),l.options.rows>1){for(r=l.options.slidesPerRow*l.options.rows,s=Math.ceil(n.length/r),i=0;i<s;i++){var d=document.createElement("div");for(e=0;e<l.options.rows;e++){var a=document.createElement("div");for(t=0;t<l.options.slidesPerRow;t++){var c=i*r+(e*l.options.slidesPerRow+t);n.get(c)&&a.appendChild(n.get(c))}d.appendChild(a)}o.appendChild(d)}l.$slider.empty().append(o),l.$slider.children().children().children().css({width:100/l.options.slidesPerRow+"%",display:"inline-block"})}},e.prototype.checkResponsive=function(e,t){var o,s,n,r=this,l=!1,d=r.$slider.width(),a=window.innerWidth||i(window).width();if("window"===r.respondTo?n=a:"slider"===r.respondTo?n=d:"min"===r.respondTo&&(n=Math.min(a,d)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(o in r.breakpoints)r.breakpoints.hasOwnProperty(o)&&(!1===r.originalSettings.mobileFirst?n<r.breakpoints[o]&&(s=r.breakpoints[o]):n>r.breakpoints[o]&&(s=r.breakpoints[o]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||t)&&(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e),l=s),e||!1===l||r.$slider.trigger("breakpoint",[r,l])}},e.prototype.changeSlide=function(e,t){var o,s,n,r=this,l=i(e.currentTarget);switch(l.is("a")&&e.preventDefault(),l.is("li")||(l=l.closest("li")),n=r.slideCount%r.options.slidesToScroll!=0,o=n?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case"previous":s=0===o?r.options.slidesToScroll:r.options.slidesToShow-o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,t);break;case"next":s=0===o?r.options.slidesToScroll:o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,t);break;case"index":var d=0===e.data.index?0:e.data.index||l.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(d),!1,t),l.children().trigger("focus");break;default:return}},e.prototype.checkNavigable=function(i){var e,t;if(e=this.getNavigableIndexes(),t=0,i>e[e.length-1])i=e[e.length-1];else for(var o in e){if(i<e[o]){i=t;break}t=e[o]}return i},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(i("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",i.proxy(e.interrupt,e,!0)).off("mouseleave.slick",i.proxy(e.interrupt,e,!1)),!0===e.options.accessibility&&e.$dots.off("keydown.slick",e.keyHandler)),e.$slider.off("focus.slick blur.slick"),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow&&e.$prevArrow.off("keydown.slick",e.keyHandler),e.$nextArrow&&e.$nextArrow.off("keydown.slick",e.keyHandler))),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),i(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().off("click.slick",e.selectHandler),i(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),i(window).off("resize.slick.slick-"+e.instanceUid,e.resize),i("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),i(window).off("load.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",i.proxy(e.interrupt,e,!0)),e.$list.off("mouseleave.slick",i.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var i,e=this;e.options.rows>1&&((i=e.$slides.children().children()).removeAttr("style"),e.$slider.empty().append(i))},e.prototype.clickHandler=function(i){!1===this.shouldClick&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),i(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){i(this).attr("style",i(this).data("originalStyling"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$slider.removeClass("slick-dotted"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]="",!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e){var t=this;!1===t.cssTransitions?(t.$slides.eq(i).css({zIndex:t.options.zIndex}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:t.options.zIndex}),e&&setTimeout(function(){t.disableTransition(i),e.call()},t.options.speed))},e.prototype.fadeSlideOut=function(i){var e=this;!1===e.cssTransitions?e.$slides.eq(i).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(i),e.$slides.eq(i).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(i){var e=this;null!==i&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(t){t.stopImmediatePropagation();var o=i(this);setTimeout(function(){e.options.pauseOnFocus&&(e.focussed=o.is(":focus"),e.autoPlay())},0)})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){return this.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(!0===i.options.infinite)if(i.slideCount<=i.options.slidesToShow)++o;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else if(!0===i.options.centerMode)o=i.slideCount;else if(i.options.asNavFor)for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else o=1+Math.ceil((i.slideCount-i.options.slidesToShow)/i.options.slidesToScroll);return o-1},e.prototype.getLeft=function(i){var e,t,o,s,n=this,r=0;return n.slideOffset=0,t=n.$slides.first().outerHeight(!0),!0===n.options.infinite?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,s=-1,!0===n.options.vertical&&!0===n.options.centerMode&&(2===n.options.slidesToShow?s=-1.5:1===n.options.slidesToShow&&(s=-2)),r=t*n.options.slidesToShow*s),n.slideCount%n.options.slidesToScroll!=0&&i+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(i>n.slideCount?(n.slideOffset=(n.options.slidesToShow-(i-n.slideCount))*n.slideWidth*-1,r=(n.options.slidesToShow-(i-n.slideCount))*t*-1):(n.slideOffset=n.slideCount%n.options.slidesToScroll*n.slideWidth*-1,r=n.slideCount%n.options.slidesToScroll*t*-1))):i+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(i+n.options.slidesToShow-n.slideCount)*n.slideWidth,r=(i+n.options.slidesToShow-n.slideCount)*t),n.slideCount<=n.options.slidesToShow&&(n.slideOffset=0,r=0),!0===n.options.centerMode&&n.slideCount<=n.options.slidesToShow?n.slideOffset=n.slideWidth*Math.floor(n.options.slidesToShow)/2-n.slideWidth*n.slideCount/2:!0===n.options.centerMode&&!0===n.options.infinite?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:!0===n.options.centerMode&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),e=!1===n.options.vertical?i*n.slideWidth*-1+n.slideOffset:i*t*-1+r,!0===n.options.variableWidth&&(o=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(i):n.$slideTrack.children(".slick-slide").eq(i+n.options.slidesToShow),e=!0===n.options.rtl?o[0]?-1*(n.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,!0===n.options.centerMode&&(o=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(i):n.$slideTrack.children(".slick-slide").eq(i+n.options.slidesToShow+1),e=!0===n.options.rtl?o[0]?-1*(n.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,e+=(n.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(i){return this.options[i]},e.prototype.getNavigableIndexes=function(){var i,e=this,t=0,o=0,s=[];for(!1===e.options.infinite?i=e.slideCount:(t=-1*e.options.slidesToScroll,o=-1*e.options.slidesToScroll,i=2*e.slideCount);t<i;)s.push(t),t=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,t,o=this;return t=!0===o.options.centerMode?o.slideWidth*Math.floor(o.options.slidesToShow/2):0,!0===o.options.swipeToSlide?(o.$slideTrack.find(".slick-slide").each(function(s,n){if(n.offsetLeft-t+i(n).outerWidth()/2>-1*o.swipeLeft)return e=n,!1}),Math.abs(i(e).attr("data-slick-index")-o.currentSlide)||1):o.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(i,e){this.changeSlide({data:{message:"index",index:parseInt(i)}},e)},e.prototype.init=function(e){var t=this;i(t.$slider).hasClass("slick-initialized")||(i(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger("init",[t]),!0===t.options.accessibility&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},e.prototype.initADA=function(){var e=this,t=Math.ceil(e.slideCount/e.options.slidesToShow),o=e.getNavigableIndexes().filter(function(i){return i>=0&&i<e.slideCount});e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(t){var s=o.indexOf(t);i(this).attr({role:"tabpanel",id:"slick-slide"+e.instanceUid+t,tabindex:-1}),-1!==s&&i(this).attr({"aria-describedby":"slick-slide-control"+e.instanceUid+s})}),e.$dots.attr("role","tablist").find("li").each(function(s){var n=o[s];i(this).attr({role:"presentation"}),i(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+e.instanceUid+s,"aria-controls":"slick-slide"+e.instanceUid+n,"aria-label":s+1+" of "+t,"aria-selected":null,tabindex:"-1"})}).eq(e.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var s=e.currentSlide,n=s+e.options.slidesToShow;s<n;s++)e.$slides.eq(s).attr("tabindex",0);e.activateADA()},e.prototype.initArrowEvents=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},i.changeSlide),i.$nextArrow.off("click.slick").on("click.slick",{message:"next"},i.changeSlide),!0===i.options.accessibility&&(i.$prevArrow.on("keydown.slick",i.keyHandler),i.$nextArrow.on("keydown.slick",i.keyHandler)))},e.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&(i("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.accessibility&&e.$dots.on("keydown.slick",e.keyHandler)),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&i("li",e.$dots).on("mouseenter.slick",i.proxy(e.interrupt,e,!0)).on("mouseleave.slick",i.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on("mouseenter.slick",i.proxy(e.interrupt,e,!0)),e.$list.on("mouseleave.slick",i.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),i(document).on(e.visibilityChange,i.proxy(e.visibility,e)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),i(window).on("orientationchange.slick.slick-"+e.instanceUid,i.proxy(e.orientationChange,e)),i(window).on("resize.slick.slick-"+e.instanceUid,i.proxy(e.resize,e)),i("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),i(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),i(e.setPosition)},e.prototype.initUI=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.show()},e.prototype.keyHandler=function(i){var e=this;i.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===i.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:!0===e.options.rtl?"next":"previous"}}):39===i.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:!0===e.options.rtl?"previous":"next"}}))},e.prototype.lazyLoad=function(){function e(e){i("img[data-lazy]",e).each(function(){var e=i(this),t=i(this).attr("data-lazy"),o=i(this).attr("data-srcset"),s=i(this).attr("data-sizes")||n.$slider.attr("data-sizes"),r=document.createElement("img");r.onload=function(){e.animate({opacity:0},100,function(){o&&(e.attr("srcset",o),s&&e.attr("sizes",s)),e.attr("src",t).animate({opacity:1},200,function(){e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),n.$slider.trigger("lazyLoaded",[n,e,t])})},r.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),n.$slider.trigger("lazyLoadError",[n,e,t])},r.src=t})}var t,o,s,n=this;if(!0===n.options.centerMode?!0===n.options.infinite?s=(o=n.currentSlide+(n.options.slidesToShow/2+1))+n.options.slidesToShow+2:(o=Math.max(0,n.currentSlide-(n.options.slidesToShow/2+1)),s=n.options.slidesToShow/2+1+2+n.currentSlide):(o=n.options.infinite?n.options.slidesToShow+n.currentSlide:n.currentSlide,s=Math.ceil(o+n.options.slidesToShow),!0===n.options.fade&&(o>0&&o--,s<=n.slideCount&&s++)),t=n.$slider.find(".slick-slide").slice(o,s),"anticipated"===n.options.lazyLoad)for(var r=o-1,l=s,d=n.$slider.find(".slick-slide"),a=0;a<n.options.slidesToScroll;a++)r<0&&(r=n.slideCount-1),t=(t=t.add(d.eq(r))).add(d.eq(l)),r--,l++;e(t),n.slideCount<=n.options.slidesToShow?e(n.$slider.find(".slick-slide")):n.currentSlide>=n.slideCount-n.options.slidesToShow?e(n.$slider.find(".slick-cloned").slice(0,n.options.slidesToShow)):0===n.currentSlide&&e(n.$slider.find(".slick-cloned").slice(-1*n.options.slidesToShow))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass("slick-loading"),i.initUI(),"progressive"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},e.prototype.orientationChange=function(){var i=this;i.checkResponsive(),i.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var i=this;i.autoPlayClear(),i.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var i=this;i.autoPlay(),i.options.autoplay=!0,i.paused=!1,i.focussed=!1,i.interrupted=!1},e.prototype.postSlide=function(e){var t=this;t.unslicked||(t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),!0===t.options.accessibility&&(t.initADA(),t.options.focusOnChange&&i(t.$slides.get(t.currentSlide)).attr("tabindex",0).focus()))},e.prototype.prev=e.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},e.prototype.preventDefault=function(i){i.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var t,o,s,n,r,l=this,d=i("img[data-lazy]",l.$slider);d.length?(t=d.first(),o=t.attr("data-lazy"),s=t.attr("data-srcset"),n=t.attr("data-sizes")||l.$slider.attr("data-sizes"),(r=document.createElement("img")).onload=function(){s&&(t.attr("srcset",s),n&&t.attr("sizes",n)),t.attr("src",o).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===l.options.adaptiveHeight&&l.setPosition(),l.$slider.trigger("lazyLoaded",[l,t,o]),l.progressiveLazyLoad()},r.onerror=function(){e<3?setTimeout(function(){l.progressiveLazyLoad(e+1)},500):(t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),l.$slider.trigger("lazyLoadError",[l,t,o]),l.progressiveLazyLoad())},r.src=o):l.$slider.trigger("allImagesLoaded",[l])},e.prototype.refresh=function(e){var t,o,s=this;o=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>o&&(s.currentSlide=o),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),t=s.currentSlide,s.destroy(!0),i.extend(s,s.initials,{currentSlide:t}),s.init(),e||s.changeSlide({data:{message:"index",index:t}},!1)},e.prototype.registerBreakpoints=function(){var e,t,o,s=this,n=s.options.responsive||null;if("array"===i.type(n)&&n.length){s.respondTo=s.options.respondTo||"window";for(e in n)if(o=s.breakpoints.length-1,n.hasOwnProperty(e)){for(t=n[e].breakpoint;o>=0;)s.breakpoints[o]&&s.breakpoints[o]===t&&s.breakpoints.splice(o,1),o--;s.breakpoints.push(t),s.breakpointSettings[t]=n[e].settings}s.breakpoints.sort(function(i,e){return s.options.mobileFirst?i-e:e-i})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},e.prototype.resize=function(){var e=this;i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(i,e,t){var o=this;if(i="boolean"==typeof i?!0===(e=i)?0:o.slideCount-1:!0===e?--i:i,o.slideCount<1||i<0||i>o.slideCount-1)return!1;o.unload(),!0===t?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(i).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,o.reinit()},e.prototype.setCSS=function(i){var e,t,o=this,s={};!0===o.options.rtl&&(i=-i),e="left"==o.positionProp?Math.ceil(i)+"px":"0px",t="top"==o.positionProp?Math.ceil(i)+"px":"0px",s[o.positionProp]=i,!1===o.transformsEnabled?o.$slideTrack.css(s):(s={},!1===o.cssTransitions?(s[o.animType]="translate("+e+", "+t+")",o.$slideTrack.css(s)):(s[o.animType]="translate3d("+e+", "+t+", 0px)",o.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var i=this;!1===i.options.vertical?!0===i.options.centerMode&&i.$list.css({padding:"0px "+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),!0===i.options.centerMode&&i.$list.css({padding:i.options.centerPadding+" 0px"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),!1===i.options.vertical&&!1===i.options.variableWidth?(i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(".slick-slide").length))):!0===i.options.variableWidth?i.$slideTrack.width(5e3*i.slideCount):(i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(".slick-slide").length)));var e=i.$slides.first().outerWidth(!0)-i.$slides.first().width();!1===i.options.variableWidth&&i.$slideTrack.children(".slick-slide").width(i.slideWidth-e)},e.prototype.setFade=function(){var e,t=this;t.$slides.each(function(o,s){e=t.slideWidth*o*-1,!0===t.options.rtl?i(s).css({position:"relative",right:e,top:0,zIndex:t.options.zIndex-2,opacity:0}):i(s).css({position:"relative",left:e,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&!0===i.options.adaptiveHeight&&!1===i.options.vertical){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css("height",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,t,o,s,n,r=this,l=!1;if("object"===i.type(arguments[0])?(o=arguments[0],l=arguments[1],n="multiple"):"string"===i.type(arguments[0])&&(o=arguments[0],s=arguments[1],l=arguments[2],"responsive"===arguments[0]&&"array"===i.type(arguments[1])?n="responsive":void 0!==arguments[1]&&(n="single")),"single"===n)r.options[o]=s;else if("multiple"===n)i.each(o,function(i,e){r.options[i]=e});else if("responsive"===n)for(t in s)if("array"!==i.type(r.options.responsive))r.options.responsive=[s[t]];else{for(e=r.options.responsive.length-1;e>=0;)r.options.responsive[e].breakpoint===s[t].breakpoint&&r.options.responsive.splice(e,1),e--;r.options.responsive.push(s[t])}l&&(r.unload(),r.reinit())},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),!1===i.options.fade?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger("setPosition",[i])},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=!0===i.options.vertical?"top":"left","top"===i.positionProp?i.$slider.addClass("slick-vertical"):i.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||!0===i.options.useCSS&&(i.cssTransitions=!0),i.options.fade&&("number"==typeof i.options.zIndex?i.options.zIndex<3&&(i.options.zIndex=3):i.options.zIndex=i.defaults.zIndex),void 0!==e.OTransform&&(i.animType="OTransform",i.transformType="-o-transform",i.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType="MozTransform",i.transformType="-moz-transform",i.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType="webkitTransform",i.transformType="-webkit-transform",i.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType="msTransform",i.transformType="-ms-transform",i.transitionType="msTransition",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&!1!==i.animType&&(i.animType="transform",i.transformType="transform",i.transitionType="transition"),i.transformsEnabled=i.options.useTransform&&null!==i.animType&&!1!==i.animType},e.prototype.setSlideClasses=function(i){var e,t,o,s,n=this;if(t=n.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),n.$slides.eq(i).addClass("slick-current"),!0===n.options.centerMode){var r=n.options.slidesToShow%2==0?1:0;e=Math.floor(n.options.slidesToShow/2),!0===n.options.infinite&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e+r,i+e+1).addClass("slick-active").attr("aria-hidden","false"):(o=n.options.slidesToShow+i,t.slice(o-e+1+r,o+e+2).addClass("slick-active").attr("aria-hidden","false")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass("slick-center"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass("slick-center")),n.$slides.eq(i).addClass("slick-center")}else i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):t.length<=n.options.slidesToShow?t.addClass("slick-active").attr("aria-hidden","false"):(s=n.slideCount%n.options.slidesToShow,o=!0===n.options.infinite?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(o-(n.options.slidesToShow-s),o+s).addClass("slick-active").attr("aria-hidden","false"):t.slice(o,o+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==n.options.lazyLoad&&"anticipated"!==n.options.lazyLoad||n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,o,s=this;if(!0===s.options.fade&&(s.options.centerMode=!1),!0===s.options.infinite&&!1===s.options.fade&&(t=null,s.slideCount>s.options.slidesToShow)){for(o=!0===s.options.centerMode?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-o;e-=1)t=e-1,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(e=0;e<o+s.slideCount;e+=1)t=e,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){i(this).attr("id","")})}},e.prototype.interrupt=function(i){var e=this;i||e.autoPlay(),e.interrupted=i},e.prototype.selectHandler=function(e){var t=this,o=i(e.target).is(".slick-slide")?i(e.target):i(e.target).parents(".slick-slide"),s=parseInt(o.attr("data-slick-index"));s||(s=0),t.slideCount<=t.options.slidesToShow?t.slideHandler(s,!1,!0):t.slideHandler(s)},e.prototype.slideHandler=function(i,e,t){var o,s,n,r,l,d=null,a=this;if(e=e||!1,!(!0===a.animating&&!0===a.options.waitForAnimate||!0===a.options.fade&&a.currentSlide===i))if(!1===e&&a.asNavFor(i),o=i,d=a.getLeft(o),r=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?r:a.swipeLeft,!1===a.options.infinite&&!1===a.options.centerMode&&(i<0||i>a.getDotCount()*a.options.slidesToScroll))!1===a.options.fade&&(o=a.currentSlide,!0!==t?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o));else if(!1===a.options.infinite&&!0===a.options.centerMode&&(i<0||i>a.slideCount-a.options.slidesToScroll))!1===a.options.fade&&(o=a.currentSlide,!0!==t?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o));else{if(a.options.autoplay&&clearInterval(a.autoPlayTimer),s=o<0?a.slideCount%a.options.slidesToScroll!=0?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+o:o>=a.slideCount?a.slideCount%a.options.slidesToScroll!=0?0:o-a.slideCount:o,a.animating=!0,a.$slider.trigger("beforeChange",[a,a.currentSlide,s]),n=a.currentSlide,a.currentSlide=s,a.setSlideClasses(a.currentSlide),a.options.asNavFor&&(l=(l=a.getNavTarget()).slick("getSlick")).slideCount<=l.options.slidesToShow&&l.setSlideClasses(a.currentSlide),a.updateDots(),a.updateArrows(),!0===a.options.fade)return!0!==t?(a.fadeSlideOut(n),a.fadeSlide(s,function(){a.postSlide(s)})):a.postSlide(s),void a.animateHeight();!0!==t?a.animateSlide(d,function(){a.postSlide(s)}):a.postSlide(s)}},e.prototype.startLoad=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var i,e,t,o,s=this;return i=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,t=Math.atan2(e,i),(o=Math.round(180*t/Math.PI))<0&&(o=360-Math.abs(o)),o<=45&&o>=0?!1===s.options.rtl?"left":"right":o<=360&&o>=315?!1===s.options.rtl?"left":"right":o>=135&&o<=225?!1===s.options.rtl?"right":"left":!0===s.options.verticalSwiping?o>=35&&o<=135?"down":"up":"vertical"},e.prototype.swipeEnd=function(i){var e,t,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1,!1;if(o.interrupted=!1,o.shouldClick=!(o.touchObject.swipeLength>10),void 0===o.touchObject.curX)return!1;if(!0===o.touchObject.edgeHit&&o.$slider.trigger("edge",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(t=o.swipeDirection()){case"left":case"down":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case"right":case"up":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}"vertical"!=t&&(o.slideHandler(e),o.touchObject={},o.$slider.trigger("swipe",[o,t]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==i.type.indexOf("mouse")))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),i.data.action){case"start":e.swipeStart(i);break;case"move":e.swipeMove(i);break;case"end":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,o,s,n,r,l=this;return n=void 0!==i.originalEvent?i.originalEvent.touches:null,!(!l.dragging||l.scrolling||n&&1!==n.length)&&(e=l.getLeft(l.currentSlide),l.touchObject.curX=void 0!==n?n[0].pageX:i.clientX,l.touchObject.curY=void 0!==n?n[0].pageY:i.clientY,l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curX-l.touchObject.startX,2))),r=Math.round(Math.sqrt(Math.pow(l.touchObject.curY-l.touchObject.startY,2))),!l.options.verticalSwiping&&!l.swiping&&r>4?(l.scrolling=!0,!1):(!0===l.options.verticalSwiping&&(l.touchObject.swipeLength=r),t=l.swipeDirection(),void 0!==i.originalEvent&&l.touchObject.swipeLength>4&&(l.swiping=!0,i.preventDefault()),s=(!1===l.options.rtl?1:-1)*(l.touchObject.curX>l.touchObject.startX?1:-1),!0===l.options.verticalSwiping&&(s=l.touchObject.curY>l.touchObject.startY?1:-1),o=l.touchObject.swipeLength,l.touchObject.edgeHit=!1,!1===l.options.infinite&&(0===l.currentSlide&&"right"===t||l.currentSlide>=l.getDotCount()&&"left"===t)&&(o=l.touchObject.swipeLength*l.options.edgeFriction,l.touchObject.edgeHit=!0),!1===l.options.vertical?l.swipeLeft=e+o*s:l.swipeLeft=e+o*(l.$list.height()/l.listWidth)*s,!0===l.options.verticalSwiping&&(l.swipeLeft=e+o*s),!0!==l.options.fade&&!1!==l.options.touchMove&&(!0===l.animating?(l.swipeLeft=null,!1):void l.setCSS(l.swipeLeft))))},e.prototype.swipeStart=function(i){var e,t=this;if(t.interrupted=!0,1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow)return t.touchObject={},!1;void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,t.dragging=!0},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(i){var e=this;e.$slider.trigger("unslick",[e,i]),e.destroy()},e.prototype.updateArrows=function(){var i=this;Math.floor(i.options.slidesToShow/2),!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&!i.options.infinite&&(i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===i.currentSlide?(i.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):i.currentSlide>=i.slideCount-i.options.slidesToShow&&!1===i.options.centerMode?(i.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):i.currentSlide>=i.slideCount-1&&!0===i.options.centerMode&&(i.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find("li").removeClass("slick-active").end(),i.$dots.find("li").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass("slick-active"))},e.prototype.visibility=function(){var i=this;i.options.autoplay&&(document[i.hidden]?i.interrupted=!0:i.interrupted=!1)},i.fn.slick=function(){var i,t,o=this,s=arguments[0],n=Array.prototype.slice.call(arguments,1),r=o.length;for(i=0;i<r;i++)if("object"==typeof s||void 0===s?o[i].slick=new e(o[i],s):t=o[i].slick[s].apply(o[i].slick,n),void 0!==t)return t;return o}});;/*! picturefill - v3.0.2 - 2016-02-12
 * https://scottjehl.github.io/picturefill/
 * Copyright (c) 2016 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT
 */!function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,c){"use strict";function d(a){return" "===a||"	"===a||"\n"===a||"\f"===a||"\r"===a}function e(b,c){var d=new a.Image;return d.onerror=function(){A[b]=!1,ba()},d.onload=function(){A[b]=1===d.width,ba()},d.src=c,"pending"}function f(){M=!1,P=a.devicePixelRatio,N={},O={},s.DPR=P||1,Q.width=Math.max(a.innerWidth||0,z.clientWidth),Q.height=Math.max(a.innerHeight||0,z.clientHeight),Q.vw=Q.width/100,Q.vh=Q.height/100,r=[Q.height,Q.width,P].join("-"),Q.em=s.getEmValue(),Q.rem=Q.em}function g(a,b,c,d){var e,f,g,h;return"saveData"===B.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function h(a){var b,c=s.getSet(a),d=!1;"pending"!==c&&(d=r,c&&(b=s.setRes(c),s.applySetCandidate(b,a))),a[s.ns].evaled=d}function i(a,b){return a.res-b.res}function j(a,b,c){var d;return!c&&b&&(c=a[s.ns].sets,c=c&&c[c.length-1]),d=k(b,c),d&&(b=s.makeUrl(b),a[s.ns].curSrc=b,a[s.ns].curCan=d,d.res||aa(d,d.set.sizes)),d}function k(a,b){var c,d,e;if(a&&b)for(e=s.parseSet(b),a=s.makeUrl(a),c=0;c<e.length;c++)if(a===s.makeUrl(e[c].url)){d=e[c];break}return d}function l(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;d>c;c++)e=g[c],e[s.ns]=!0,f=e.getAttribute("srcset"),f&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function m(a,b){function c(b){var c,d=b.exec(a.substring(m));return d?(c=d[0],m+=c.length,c):void 0}function e(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),X.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):Y.test(j)&&"x"===i?((a||c||d)&&(m=!0),0>l?m=!0:c=l):X.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}function f(){for(c(T),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j)if(d(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void e();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void e();i+=k}}else if("in parens"===j)if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void e();i+=k}else if("after descriptor"===j)if(d(k));else{if(""===k)return void e();j="in descriptor",m-=1}m+=1}}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(U),m>=l)return n;g=c(V),h=[],","===g.slice(-1)?(g=g.replace(W,""),e()):f()}}function n(a){function b(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var e,f="",g=[],h=[],i=0,j=0,k=!1;;){if(e=a.charAt(j),""===e)return b(),c(),h;if(k){if("*"===e&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(d(e)){if(a.charAt(j-1)&&d(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}e=" "}else if("("===e)i+=1;else if(")"===e)i-=1;else{if(","===e){b(),c(),j+=1;continue}if("/"===e&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=e,j+=1}}}function c(a){return k.test(a)&&parseFloat(a)>=0?!0:l.test(a)?!0:"0"===a||"-0"===a||"+0"===a?!0:!1}var e,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=b(a),g=f.length,e=0;g>e;e++)if(h=f[e],i=h[h.length-1],c(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),s.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var o,p,q,r,s={},t=!1,u=function(){},v=b.createElement("img"),w=v.getAttribute,x=v.setAttribute,y=v.removeAttribute,z=b.documentElement,A={},B={algorithm:""},C="data-pfsrc",D=C+"set",E=navigator.userAgent,F=/rident/.test(E)||/ecko/.test(E)&&E.match(/rv\:(\d+)/)&&RegExp.$1>35,G="currentSrc",H=/\s+\+?\d+(e\d+)?w/,I=/(\([^)]+\))?\s*(.+)/,J=a.picturefillCFG,K="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",L="font-size:100%!important;",M=!0,N={},O={},P=a.devicePixelRatio,Q={px:1,"in":96},R=b.createElement("a"),S=!1,T=/^[ \t\n\r\u000c]+/,U=/^[, \t\n\r\u000c]+/,V=/^[^ \t\n\r\u000c]+/,W=/[,]+$/,X=/^\d+$/,Y=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Z=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},$=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},_=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=$(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in N))if(N[b]=!1,d&&(e=b.match(a)))N[b]=e[1]*Q[e[2]];else try{N[b]=new Function("e",c(b))(Q)}catch(f){}return N[b]}}(),aa=function(a,b){return a.w?(a.cWidth=s.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},ba=function(a){if(t){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||s.qsa(f.context||b,f.reevaluate||f.reselect?s.sel:s.selShort),e=c.length){for(s.setupRun(f),S=!0,d=0;e>d;d++)s.fillImg(c[d],f);s.teardownRun(f)}}};o=a.console&&console.warn?function(a){console.warn(a)}:u,G in v||(G="src"),A["image/jpeg"]=!0,A["image/gif"]=!0,A["image/png"]=!0,A["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),s.ns=("pf"+(new Date).getTime()).substr(0,9),s.supSrcset="srcset"in v,s.supSizes="sizes"in v,s.supPicture=!!a.HTMLPictureElement,s.supSrcset&&s.supPicture&&!s.supSizes&&!function(a){v.srcset="data:,a",a.src="data:,a",s.supSrcset=v.complete===a.complete,s.supPicture=s.supSrcset&&s.supPicture}(b.createElement("img")),s.supSrcset&&!s.supSizes?!function(){var a="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",c="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d=b.createElement("img"),e=function(){var a=d.width;2===a&&(s.supSizes=!0),q=s.supSrcset&&!s.supSizes,t=!0,setTimeout(ba)};d.onload=e,d.onerror=e,d.setAttribute("sizes","9px"),d.srcset=c+" 1w,"+a+" 9w",d.src=c}():t=!0,s.selShort="picture>img,img[srcset]",s.sel=s.selShort,s.cfg=B,s.DPR=P||1,s.u=Q,s.types=A,s.setSize=u,s.makeUrl=$(function(a){return R.href=a,R.href}),s.qsa=function(a,b){return"querySelector"in a?a.querySelectorAll(b):[]},s.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?s.matchesMedia=function(a){return!a||matchMedia(a).matches}:s.matchesMedia=s.mMQ,s.matchesMedia.apply(this,arguments)},s.mMQ=function(a){return a?_(a):!0},s.calcLength=function(a){var b=_(a,!0)||!1;return 0>b&&(b=!1),b},s.supportsType=function(a){return a?A[a]:!0},s.parseSize=$(function(a){var b=(a||"").match(I);return{media:b&&b[1],length:b&&b[2]}}),s.parseSet=function(a){return a.cands||(a.cands=m(a.srcset,a)),a.cands},s.getEmValue=function(){var a;if(!p&&(a=b.body)){var c=b.createElement("div"),d=z.style.cssText,e=a.style.cssText;c.style.cssText=K,z.style.cssText=L,a.style.cssText=L,a.appendChild(c),p=c.offsetWidth,a.removeChild(c),p=parseFloat(p,10),z.style.cssText=d,a.style.cssText=e}return p||16},s.calcListLength=function(a){if(!(a in O)||B.uT){var b=s.calcLength(n(a));O[a]=b?b:Q.width}return O[a]},s.setRes=function(a){var b;if(a){b=s.parseSet(a);for(var c=0,d=b.length;d>c;c++)aa(b[c],a.sizes)}return b},s.setRes.res=aa,s.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,h,k,l,m,n,o=b[s.ns],p=s.DPR;if(k=o.curSrc||b[G],l=o.curCan||j(b,k,a[0].set),l&&l.set===a[0].set&&(n=F&&!b.complete&&l.res-.1>p,n||(l.cached=!0,l.res>=p&&(h=l))),!h)for(a.sort(i),f=a.length,h=a[f-1],d=0;f>d;d++)if(c=a[d],c.res>=p){e=d-1,h=a[e]&&(n||k!==s.makeUrl(c.url))&&g(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}h&&(m=s.makeUrl(h.url),o.curSrc=m,o.curCan=h,m!==k&&s.setSrc(b,h),s.setSize(b))}},s.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},s.getSet=function(a){var b,c,d,e=!1,f=a[s.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&s.matchesMedia(c.media)&&(d=s.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},s.parseSets=function(a,b,d){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[s.ns];(j.src===c||d.src)&&(j.src=w.call(a,"src"),j.src?x.call(a,C,j.src):y.call(a,C)),(j.srcset===c||d.srcset||!s.supSrcset||a.srcset)&&(e=w.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,l(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:w.call(a,"sizes")},j.sets.push(f),g=(q||j.src)&&H.test(j.srcset||""),g||!j.src||k(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=c,j.supported=!(i||f&&!s.supSrcset||g&&!s.supSizes),h&&s.supSrcset&&!j.supported&&(e?(x.call(a,D,e),a.srcset=""):y.call(a,D)),j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==s.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},s.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[s.ns]||(a[s.ns]={}),c=a[s.ns],(d||c.evaled!==r)&&((!c.parsed||b.reevaluate)&&s.parseSets(a,a.parentNode,b),c.supported?c.evaled=r:h(a))},s.setupRun=function(){(!S||M||P!==a.devicePixelRatio)&&f()},s.supPicture?(ba=u,s.fillImg=u):!function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(s.fillImgs(),c=c||d.test(a),c&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),g=function(a,b){var c,d,e=function(){var f=new Date-d;b>f?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}},h=z.clientHeight,i=function(){M=Math.max(a.innerWidth||0,z.clientWidth)!==Q.width||z.clientHeight!==h,h=z.clientHeight,M&&s.fillImgs()};Z(a,"resize",g(i,99)),Z(b,"readystatechange",e)}(),s.picturefill=ba,s.fillImgs=ba,s.teardownRun=u,ba._=s,a.picturefillCFG={pf:s,push:function(a){var b=a.shift();"function"==typeof s[b]?s[b].apply(s,a):(B[b]=a[0],S&&s.fillImgs({reselect:!0}))}};for(;J&&J.length;)a.picturefillCFG.push(J.shift());a.picturefill=ba,"object"==typeof module&&"object"==typeof module.exports?module.exports=ba:"function"==typeof define&&define.amd&&define("picturefill",function(){return ba}),s.supPicture||(A["image/webp"]=e("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document);var oscar=(function(o,$){o.messages={addMessage:function(tag,msg){var msgHTML='<div class="alert fade in alert-'+tag+'">'+'<a href="#" class="close" data-dismiss="alert">&times;</a>'+msg+'</div>';$('#messages').append($(msgHTML));},debug:function(msg){o.messages.addMessage('debug',msg);},info:function(msg){o.messages.addMessage('info',msg);},success:function(msg){o.messages.addMessage('success',msg);},warning:function(msg){o.messages.addMessage('warning',msg);},error:function(msg){o.messages.addMessage('danger',msg);},clear:function(){$('#messages').html('');},scrollTo:function(){$('html').animate({scrollTop:$('#messages').offset().top});}};o.search={init:function(){o.search.initSortWidget();o.search.initFacetWidgets();},initSortWidget:function(){$('#id_sort_by').on('change',function(){$(this).closest('form').submit();});},initFacetWidgets:function(){$('.facet_checkbox').on('change',function(){window.location.href=$(this).nextAll('.facet_url').val();});}};o.notifications={init:function(){$('a[data-behaviours~="archive"]').click(function(){o.notifications.checkAndSubmit($(this),'archive');});$('a[data-behaviours~="delete"]').click(function(){o.notifications.checkAndSubmit($(this),'delete');});},checkAndSubmit:function($ele,btn_val){$ele.closest('tr').find('input').attr('checked','checked');$ele.closest('form').find('button[value="'+btn_val+'"]').click();return false;}};o.forms={init:function(){$('form[data-behaviours~="lock"]').submit(o.forms.submitIfNotLocked);$(document.body).on('submit','form',function(){var form=$(this);if($(":invalid",form).length==0)
$(this).find('button[data-loading-text]').button('loading');});var ratings=$('.reviewrating');if(ratings.length){ratings.find('.star-rating i').on('click',o.forms.reviewRatingClick);}},submitIfNotLocked:function(){var $form=$(this);if($form.data('locked')){return false;}
$form.data('locked',true);},reviewRatingClick:function(){var ratings=['One','Two','Three','Four','Five'];$(this).parent().removeClass('One Two Three Four Five').addClass(ratings[$(this).index()]);$(this).closest('.controls').find('select').val($(this).index()+1);}};o.page={init:function(){$('.top_page a').click(function(e){var href=$(this).attr('href');$('html, body').animate({scrollTop:$(href).offset().top},500);e.preventDefault();});$('[rel="tooltip"]').tooltip();}};o.responsive={init:function(){if(o.responsive.isDesktop()){o.responsive.initNav();}},isDesktop:function(){return document.body.clientWidth>767;},initNav:function(){var $sidebar=$('aside.col-sm-3'),$browse=$('[data-navigation="dropdown-menu"]'),$browseOpen=$browse.parent().find('> a[data-toggle]');$browse.css('width',$sidebar.outerWidth());if(!$browseOpen.length){$browse.parent().find('> a').off('click');$sidebar.css({marginTop:$browse.outerHeight()});}},initSlider:function(){$('.carousel').carousel({interval:20000});}};o.compatibility={init:function(){if(!o.compatibility.isIE())return;$('.product_pod select').on({mousedown:function(){$(this).addClass("select-open");},change:function(){$(this).removeClass("select-open");}});},isIE:function(){return navigator.userAgent.toLowerCase().indexOf("msie")>-1;}};o.basket={is_form_being_submitted:false,init:function(options){if(typeof options=='undefined'){options={'basketURL':document.URL};}
o.basket.url=options.basketURL||document.URL;$('#content_inner').on('click','#basket_formset a[data-behaviours~="remove"]',function(event){o.basket.checkAndSubmit($(this),'form','DELETE');event.preventDefault();});$('#content_inner').on('click','#basket_formset a[data-behaviours~="save"]',function(event){o.basket.checkAndSubmit($(this),'form','save_for_later');event.preventDefault();});$('#content_inner').on('click','#saved_basket_formset a[data-behaviours~="move"]',function(){o.basket.checkAndSubmit($(this),'saved','move_to_basket');});$('#content_inner').on('click','#saved_basket_formset a[data-behaviours~="remove"]',function(event){o.basket.checkAndSubmit($(this),'saved','DELETE');event.preventDefault();});$('#content_inner').on('click','#voucher_form_link a',function(event){o.basket.showVoucherForm();event.preventDefault();});$('#content_inner').on('click','#voucher_form_cancel',function(event){o.basket.hideVoucherForm();event.preventDefault();});$('#content_inner').on('submit','#basket_formset',o.basket.submitBasketForm);if(window.location.hash=='#voucher'){o.basket.showVoucherForm();}},submitBasketForm:function(event){$('#messages').html('');var payload=$('#basket_formset').serializeArray();$.post(o.basket.url,payload,o.basket.submitFormSuccess,'json');if(event){event.preventDefault();}},submitFormSuccess:function(data){$('#content_inner').html(data.content_html);o.messages.clear();for(var level in data.messages){for(var i=0;i<data.messages[level].length;i++){o.messages[level](data.messages[level][i]);}}
o.basket.is_form_being_submitted=false;},showVoucherForm:function(){$('#voucher_form_container').show();$('#voucher_form_link').hide();$('#id_code').focus();},hideVoucherForm:function(){$('#voucher_form_container').hide();$('#voucher_form_link').show();},checkAndSubmit:function($ele,formPrefix,idSuffix){if(o.basket.is_form_being_submitted){return;}
var formID=$ele.attr('data-id');var inputID='#id_'+formPrefix+'-'+formID+'-'+idSuffix;$(inputID).attr('checked','checked');$ele.closest('form').submit();o.basket.is_form_being_submitted=true;}};o.checkout={gateway:{init:function(){var radioWidgets=$('form input[name=options]');var selectedRadioWidget=$('form input[name=options]:checked');o.checkout.gateway.handleRadioSelection(selectedRadioWidget.val());radioWidgets.change(o.checkout.gateway.handleRadioChange);$('#id_username').focus();},handleRadioChange:function(){o.checkout.gateway.handleRadioSelection($(this).val());},handleRadioSelection:function(value){var pwInput=$('#id_password');if(value=='anonymous'||value=='new'){pwInput.attr('disabled','disabled');}else{pwInput.removeAttr('disabled');}}}};o.datetimepickers={init:function(){o.datetimepickers.initDatePickers(window.document);},options:{'languageCode':'en','dateFormat':'yy-mm-dd','timeFormat':'hh:ii','datetimeFormat':'yy-mm-dd hh:ii','stepMinute':15,},initDatePickers:function(el){if($.fn.datetimepicker){var defaultDatepickerConfig={'format':o.datetimepickers.options.dateFormat,'autoclose':true,'language':o.datetimepickers.options.languageCode,'minView':2};var $dates=$(el).find('[data-oscarWidget="date"]').not('.no-widget-init').not('.no-widget-init *');$dates.each(function(ind,ele){var $ele=$(ele),config=$.extend({},defaultDatepickerConfig,{'format':$ele.data('dateformat')});$ele.datetimepicker(config);});var defaultDatetimepickerConfig={'format':o.datetimepickers.options.datetimeFormat,'minuteStep':o.datetimepickers.options.stepMinute,'autoclose':true,'language':o.datetimepickers.options.languageCode};var $datetimes=$(el).find('[data-oscarWidget="datetime"]').not('.no-widget-init').not('.no-widget-init *');$datetimes.each(function(ind,ele){var $ele=$(ele),config=$.extend({},defaultDatetimepickerConfig,{'format':$ele.data('datetimeformat'),'minuteStep':$ele.data('stepminute')});$ele.datetimepicker(config);});var defaultTimepickerConfig={'format':o.datetimepickers.options.timeFormat,'minuteStep':o.datetimepickers.options.stepMinute,'autoclose':true,'language':o.datetimepickers.options.languageCode};var $times=$(el).find('[data-oscarWidget="time"]').not('.no-widget-init').not('.no-widget-init *');$times.each(function(ind,ele){var $ele=$(ele),config=$.extend({},defaultTimepickerConfig,{'format':$ele.data('timeformat'),'minuteStep':$ele.data('stepminute'),'startView':1,'maxView':1,'formatViewType':'time'});$ele.datetimepicker(config);});}}};o.init=function(){o.forms.init();o.datetimepickers.init();o.page.init();o.responsive.init();o.responsive.initSlider();o.compatibility.init();};return o;})(oscar||{},jQuery);;(function($){oscar.rewriter={is_enabled:true,init:function(options){}};oscar.search.activeFormRewrite={is_enabled:false};oscar.search.removeDiacritics=function(str){var defaultDiacriticsRemovalMap=[{'base':'A','letters':/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{'base':'AA','letters':/[\uA732]/g},{'base':'AE','letters':/[\u00C6\u01FC\u01E2]/g},{'base':'AO','letters':/[\uA734]/g},{'base':'AU','letters':/[\uA736]/g},{'base':'AV','letters':/[\uA738\uA73A]/g},{'base':'AY','letters':/[\uA73C]/g},{'base':'B','letters':/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{'base':'C','letters':/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{'base':'D','letters':/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{'base':'DZ','letters':/[\u01F1\u01C4]/g},{'base':'Dz','letters':/[\u01F2\u01C5]/g},{'base':'E','letters':/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{'base':'F','letters':/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{'base':'G','letters':/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{'base':'H','letters':/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{'base':'I','letters':/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{'base':'J','letters':/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{'base':'K','letters':/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{'base':'L','letters':/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{'base':'LJ','letters':/[\u01C7]/g},{'base':'Lj','letters':/[\u01C8]/g},{'base':'M','letters':/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{'base':'N','letters':/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{'base':'NJ','letters':/[\u01CA]/g},{'base':'Nj','letters':/[\u01CB]/g},{'base':'O','letters':/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{'base':'OI','letters':/[\u01A2]/g},{'base':'OO','letters':/[\uA74E]/g},{'base':'OU','letters':/[\u0222]/g},{'base':'P','letters':/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{'base':'Q','letters':/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{'base':'R','letters':/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{'base':'S','letters':/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{'base':'T','letters':/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{'base':'TZ','letters':/[\uA728]/g},{'base':'U','letters':/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{'base':'V','letters':/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{'base':'VY','letters':/[\uA760]/g},{'base':'W','letters':/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{'base':'X','letters':/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{'base':'Y','letters':/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{'base':'Z','letters':/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{'base':'a','letters':/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{'base':'aa','letters':/[\uA733]/g},{'base':'ae','letters':/[\u00E6\u01FD\u01E3]/g},{'base':'ao','letters':/[\uA735]/g},{'base':'au','letters':/[\uA737]/g},{'base':'av','letters':/[\uA739\uA73B]/g},{'base':'ay','letters':/[\uA73D]/g},{'base':'b','letters':/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{'base':'c','letters':/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{'base':'d','letters':/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{'base':'dz','letters':/[\u01F3\u01C6]/g},{'base':'e','letters':/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{'base':'f','letters':/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{'base':'g','letters':/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{'base':'h','letters':/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{'base':'hv','letters':/[\u0195]/g},{'base':'i','letters':/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{'base':'j','letters':/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{'base':'k','letters':/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{'base':'l','letters':/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{'base':'lj','letters':/[\u01C9]/g},{'base':'m','letters':/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{'base':'n','letters':/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{'base':'nj','letters':/[\u01CC]/g},{'base':'o','letters':/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{'base':'oi','letters':/[\u01A3]/g},{'base':'ou','letters':/[\u0223]/g},{'base':'oo','letters':/[\uA74F]/g},{'base':'p','letters':/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{'base':'q','letters':/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{'base':'r','letters':/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{'base':'s','letters':/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{'base':'t','letters':/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{'base':'tz','letters':/[\uA729]/g},{'base':'u','letters':/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{'base':'v','letters':/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{'base':'vy','letters':/[\uA761]/g},{'base':'w','letters':/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{'base':'x','letters':/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{'base':'y','letters':/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{'base':'z','letters':/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];for(var i=0;i<defaultDiacriticsRemovalMap.length;i++){str=str.replace(defaultDiacriticsRemovalMap[i].letters,defaultDiacriticsRemovalMap[i].base);}
return str;};oscar.search.initSearchForm=function(){$('[id^=\'search-form\']').on('submit',function(e){var $searchForm=$(this);var searchString=$searchForm.find('input[name="q"]').val().toLowerCase();if(searchString===""){return false;}
console.log(oscar.rewriter.is_enabled);if(oscar.rewriter.is_enabled){e.preventDefault();var searchBaseUrl=$searchForm.attr('action');var encodedSearchString=searchString.replace(/\s+/g,'+');encodedSearchString=oscar.search.removeDiacritics(encodedSearchString);var newLocation=searchBaseUrl+encodedSearchString;window.location.href=decodeURIComponent(newLocation);return false;}});};oscar.search.initRangeFacetWidgets=function(){var selectors={widgetContainerClass:'range-facet-slider-container',sliderElemClass:'facet-slider',minMaxValuesContainerClass:'minmax-values-container',};var measure={currency:'€',size:' cm',};var widgetContainers=$('.'+selectors.widgetContainerClass);widgetContainers.each(function(){var $widgetContainer=$(this);var $sliderElem=$widgetContainer.find('.'+selectors.sliderElemClass);var $minMaxValuesContainer=$widgetContainer.find('.'+selectors.minMaxValuesContainerClass);var $minValueElem=$minMaxValuesContainer.find('.minvalue');var $maxValueElem=$minMaxValuesContainer.find('.maxvalue');var fieldKey=$widgetContainer.data('field-key');var minvalueData=parseFloat($minValueElem.data('minvalue'));var maxvalueData=parseFloat($maxValueElem.data('maxvalue'));var initialValueTo=parseFloat($maxValueElem.data('initial'));var maxValue=Math.ceil(Math.round(initialValueTo)/100)*100;var show_measure=measure.size;if(fieldKey==='price')
{show_measure=measure.currency;}
$sliderElem.slider({orientation:"horizontal",range:true,min:0,max:maxValue,values:[minvalueData,maxvalueData],step:10,slide:function(event,ui){$minValueElem.html(ui.values[0]+show_measure);$maxValueElem.html(ui.values[1]+show_measure);},change:function(event,ui){var values=$sliderElem.slider("option","values");$sliderElem.siblings('.minval').val(values[0]);$sliderElem.siblings('.maxval').val(values[1]);var facetUrlInput=$sliderElem.siblings('.facet_url');var newLocation=decodeURIComponent(facetUrlInput.val());var rangePlaceholder=facetUrlInput.data('range-placeholder');var rangeSeparator=facetUrlInput.data('range-separator');var rangeFacet=facetUrlInput.data('range-facet');newLocation=newLocation.replace(rangePlaceholder,rangeFacet+':'+values[0]+rangeSeparator+values[1]);if(newLocation&&$(window).width()>768)window.location.href=newLocation;if($(window).width()<768){var min=$sliderElem.siblings('.minval').val();var max=$sliderElem.siblings('.maxval').val();if(filtros[rangeFacet]){filtros[rangeFacet]=[];filtros[rangeFacet].push(min);filtros[rangeFacet].push(max);}else{filtros[rangeFacet]=[min,max];}
console.log(filtros);}}});$minValueElem.html($sliderElem.slider("values",0)+show_measure);$maxValueElem.html($sliderElem.slider("values",1)+show_measure);});};oscar.search.initCheckboxFacetWidgets=function(){$('.facet_checkbox').on('change',function(){if($(window).width()>=768){var newLocation=jQuery(this).siblings('.facet_url').val();if(newLocation)window.location.href=decodeURIComponent(newLocation);}});};oscar.search.initFacetWidgets=function(){oscar.search.initCheckboxFacetWidgets();oscar.search.initRangeFacetWidgets();};var prevOscarInit=oscar.init;oscar.init=function(){prevOscarInit();if(oscar.search.activeFormRewrite.is_enabled){oscar.search.initSearchForm();}};})(jQuery);;let productViews=[],promoViews=[],productsGA=[],promosGA=[],productsPurchase=[],productsPurchasefb=[],checkoutProducts=[],listEncodedfb=[],objectToPush,obj,clickInfo,promoInfo,priceCheckout=0,fbp=getCookieValueByName("_fbp"),fbc=getCookieValueByName("_fbc"),listEncodedfbEvents=[],greenSemaphore=true,drag=false;var searchBtn=document.getElementById("search-button"),now=new Date,utcTimestamp=Math.trunc(now.getTime()/1000),eventId=Math.random().toString().substring(2,16),eventfbID=Math.random().toString().substring(2,16);const listInSession=()=>{const listAndPosition=JSON.parse(sessionStorage.getItem('click-info'));if(listAndPosition===null){const listNameDirect=getURLParameter('utm_source');obj={'listName':listNameDirect,'position':'0',}}else{listAndPosition.list=listAndPosition.list==='None'?'Search':listAndPosition.list;obj={'listName':listAndPosition.list,'position':listAndPosition.position,}}
return obj;}
const pushViews=()=>{promoView();productView();}
const getObjectToPush=(obj)=>{dataLayer.push({ecommerce:null});pageInfo={'eventId':eventId,'user':pageView.user,'page':pageView.page,}
objectToPush=Object.assign(obj,pageInfo);dataLayer.push(objectToPush);};const eventGA=(elem)=>{obj={'eventGA':{'category':elem.dataset.category,'action':elem.dataset.action,'label':elem.dataset.label,'noninteraction':false,}}
return obj;}
const defaultClick=(elem)=>{getEventGA=eventGA(elem);obj={'event':'eventGA',}
objectToPush=Object.assign(obj,getEventGA);getObjectToPush(objectToPush);}
const addToCart=(elem)=>{getEventGA=eventGA(elem);const productInfo=addMiniCartInfo(elem.dataset.productSku);obj={'event':'addToCart','ecommerce':{'currencyCode':pageView.page.currency,'add':{'actionField':{'list':productInfo.listName,'action':'add',},'products':[{'name':elem.dataset.label,'id':elem.dataset.productSku,'price':elem.dataset.productPrice,'brand':'KaveHome','category':elem.dataset.productCategory,'variant':elem.dataset.productVariant,'list':productInfo.listName,'position':productInfo.position,}]}}}
objectToPush=Object.assign(obj,getEventGA);getObjectToPush(objectToPush);semaphoreEventsFB('AddToCart',elem)}
const removeFromCart=(elem)=>{getEventGA=eventGA(elem);const productInfo=removeMiniCartInfo(elem.dataset.productSku,elem.className);obj={'event':'removeFromCart','ecommerce':{'remove':{'products':[{'name':elem.dataset.label,'id':elem.dataset.productSku,'price':elem.dataset.productPrice,'brand':'KaveHome','category':elem.dataset.productCategory,'variant':elem.dataset.productVariant,'list':productInfo.listName,'position':productInfo.position,'quantity':elem.dataset.productQuantity}]},'currencyCode':pageView.page.currency,},}
objectToPush=Object.assign(obj,getEventGA);getObjectToPush(objectToPush);semaphoreEventsFB('removeFromCart',elem);}
const addToWishlist=(elem)=>{getEventGA=eventGA(elem);obj={'event':'addToWishlist',}
objectToPush=Object.assign(obj,getEventGA);getObjectToPush(objectToPush);semaphoreEventsFB('AddToWishlist',elem)}
const removeFromWishlist=(elem)=>{getEventGA=eventGA(elem);obj={'event':'removeFromWishlist',}
objectToPush=Object.assign(obj,getEventGA);getObjectToPush(objectToPush);}
const productClick=(elem)=>{getEventGA=eventGA(elem);const position=elem.dataset.productList==='None'?'Search':elem.dataset.productList;listInfo={'list':position,'position':elem.dataset.productPosition,}
obj={'event':'productClick','ecommerce':{'currencyCode':pageView.page.currency,'click':{'actionField':{'list':elem.dataset.productList,},'products':[{'name':elem.dataset.label,'id':elem.dataset.productSku,'price':elem.dataset.productPrice,'brand':'KaveHome','position':elem.dataset.productPosition,'category':elem.dataset.productCategory,'variant':elem.dataset.productVariant,}]}},}
sessionStorage.setItem('click-info',JSON.stringify(listInfo));objectToPush=Object.assign(obj,getEventGA);getObjectToPush(objectToPush);}
const promoClick=(elem)=>{getEventGA=eventGA(elem);promoInfo={'creative':elem.dataset.promoCreative,'position':elem.dataset.promoPosition,}
obj={'event':'promoClick','ecommerce':{'promoClick':{'promotions':[{'id':elem.dataset.promoId,'name':elem.dataset.promoName,'creative':elem.dataset.promoCreative,'position':elem.dataset.promoPosition,}]}}}
sessionStorage.setItem('promo-info',JSON.stringify(promoInfo));objectToPush=Object.assign(obj,getEventGA);getObjectToPush(objectToPush);}
const productView=()=>{if(productsGA.length>0){const noninteraction=true;obj={'event':'productImpressions','ecommerce':{'currencyCode':pageView.page.currency,'impressions':productViews},'eventGA':{'category':'ecommerce','action':'productImpressions','label':productsGA,noninteraction,}}
getObjectToPush(obj);}}
const promoView=()=>{if(promosGA.length>0){const noninteraction=true;obj={'event':'promotionView','ecommerce':{'promoView':{'promotions':promoViews}},'eventGA':{'category':'Enhanced_Ecommerce','action':'promotionView','label':promosGA,noninteraction,}}
getObjectToPush(obj);}}
const getProductDetail=(elem)=>{dataList=listInSession();obj={'eventGA':{'category':'ecommerce','action':'productDetail','label':elem.dataset.productSku,'noninteraction':true,},'ecommerce':{'currencyCode':pageView.page.currency,'detail':{'actionField':{'list':dataList.listName,'action':'detail',},'products':[{'id':elem.dataset.productSku,'price':elem.dataset.productPrice,'category':elem.dataset.productCategory,'name':elem.dataset.productSku,'variant':elem.dataset.productVariant,'brand':'KaveHome','quantity':'','list':dataList.listName,'position':dataList.position,}]}}}
return obj;}
const sendFbData=(datafb)=>{var fbRequest=new XMLHttpRequest();const csrftoken=getCookieValueByName('csrftoken');if(csrftoken!==''){fbRequest.open("POST","/fca/collect/event/");fbRequest.setRequestHeader("Content-Type","application/json");fbRequest.setRequestHeader("X-CSRFToken",csrftoken);fbRequest.send(JSON.stringify(datafb));}}
const getUserDatafb=()=>{const userData={};const pathSplitted=pageView.page.urlPath.split("/");if(fbp!==''){userData.fbp=fbp;}
if(fbc!==''){userData.fbc=fbc;}
if(pathSplitted.length>1){if(pathSplitted[1]!=='en'&&pathSplitted[1]!==''&&listEncodedfb.length>0){userData.country=listEncodedfb[0];}}
return userData;}
const getCurrentPageWithoutParams=()=>{return pageView.page.url.split('?')[0];}
const getPageViewfbEvent=(event)=>{const pageViewfb={'event_id':eventfbID,'event_name':event,'event_time':utcTimestamp,'event_source_url':getCurrentPageWithoutParams(),'custom_data':{'content_name':pageView.page.pageName,'value':'0','currency':pageView.page.currency,},'user_data':getUserDatafb(),};return pageViewfb;}
const getSearchfbEvent=(event)=>{const search={'event_id':eventfbID,'event_name':event,'event_time':utcTimestamp,'event_source_url':getCurrentPageWithoutParams(),'custom_data':{'content_name':pageView.page.pageName,'value':'0','currency':pageView.page.currency,},'user_data':getUserDatafb(),};return search;}
const getProductDetailfbEvent=(event,elem)=>{const productView={'event_id':eventfbID,'event_name':event,'event_time':utcTimestamp,'event_source_url':getCurrentPageWithoutParams(),'custom_data':{'content_category':elem.dataset.productCategory,'content_ids':[elem.dataset.productSku],'content_type':'product','content_name':elem.dataset.productSku,'value':elem.dataset.productPrice,'currency':pageView.page.currency,},'user_data':getUserDatafb(),};return productView;}
const getAddToCartfbEvent=(event,elem)=>{const addProduct={'event_id':eventfbID,'event_name':event,'event_time':utcTimestamp,'event_source_url':getCurrentPageWithoutParams(),'custom_data':{'content_category':elem.dataset.productCategory,'content_ids':[elem.dataset.productSku],'content_type':'product','content_name':elem.dataset.label,'value':elem.dataset.productPrice,'currency':pageView.page.currency,},'user_data':getUserDatafb(),};return addProduct;}
const getRemoveFromCartfbEvent=(event,elem)=>{const removeProduct={'event_id':eventfbID,'event_name':event,'event_time':utcTimestamp,'event_source_url':getCurrentPageWithoutParams(),'custom_data':{'content_category':elem.dataset.productCategory,'content_ids':[elem.dataset.productSku],'content_type':'product','content_name':elem.dataset.label,'value':elem.dataset.productPrice,'currency':pageView.page.currency,},'user_data':getUserDatafb(),};return removeProduct;}
const getAddToWishlistfbEvent=(event,elem)=>{const addWish={'event_id':eventfbID,'event_name':event,'event_time':utcTimestamp,'event_source_url':getCurrentPageWithoutParams(),'custom_data':{'content_category':elem.dataset.category,'content_ids':[elem.dataset.action],'content_type':'product','content_name':elem.dataset.label,'currency':pageView.page.currency,'value':elem.dataset.productPrice,},'user_data':getUserDatafb(),};return addWish;}
const getCheckOutfbEvent=(event)=>{const totalBox=document.getElementById("totalPriceBox");const checkOutData={'event_id':eventfbID,'event_name':event,'event_time':utcTimestamp,'event_source_url':getCurrentPageWithoutParams(),'user_data':getUserDatafb(),'custom_data':{}};if(totalBox){checkOutData.custom_data={'value':parseInt(totalBox.dataset.orderTotal),'currency':totalBox.dataset.orderCurrency}}
return checkOutData;}
const getPurchasefbEvent=(event,elem)=>{const purchaseData={'event_id':eventfbID,'event_name':event,'event_time':utcTimestamp,'event_source_url':getCurrentPageWithoutParams(),'user_data':getUserDatafb(),'custom_data':{'currency':elem.dataset.currency,'content_type':'product','content_ids':productsPurchasefb,'value':parseInt(elem.dataset.revenue),'order_id':elem.dataset.purchase,}}
return purchaseData}
function getCookieValueByName(nameCookie){let name=nameCookie+"=";let decodedCookie=decodeURIComponent(document.cookie);let cookieList=decodedCookie.split(';');for(let i=0;i<cookieList.length;i++){let cookie=cookieList[i];while(cookie.charAt(0)==' '){cookie=cookie.substring(1);}
if(cookie.indexOf(name)==0){return cookie.substring(name.length,cookie.length);}}
return"";}
async function encodedDataUserByClass(dataClassName){let dataUser=null;for(let index=0;index<document.getElementsByClassName(dataClassName).length;index++){if(!dataUser){dataUser=await encodeString(document.getElementsByClassName(dataClassName)[index].innerHTML.toLowerCase());}}
return dataUser}
async function encodeString(message,algorithm='SHA-256'){const msgUint8=new TextEncoder().encode(message);const hashBuffer=await crypto.subtle.digest(algorithm,msgUint8);const hashArray=Array.from(new Uint8Array(hashBuffer));const hashHex=hashArray.map(b=>b.toString(16).padStart(2,'0')).join('');return hashHex;}
async function encodeDataFB(){let shopCodefb=typeof pageView!=='undefined'?pageView.page.urlPath.split("/")[1]!=='en'?pageView.page.urlPath.split("/")[1]:'':'';listEncodedfb.push(await encodeString(shopCodefb));const mailHashed=pageView.user.mail;if(mailHashed){listEncodedfb.push(mailHashed);const firstNameHashed=await encodedDataUserByClass('_name');if(firstNameHashed){listEncodedfb.push(firstNameHashed);const lastNameHashed=await encodedDataUserByClass('_surname');if(lastNameHashed){listEncodedfb.push(lastNameHashed);}}}};const generateEventfbID=()=>{eventfbID=Math.random().toString().substring(2,16);}
const generateUtcTimeStamp=()=>{now=new Date;utcTimestamp=Math.trunc(now.getTime()/1000);}
async function semaphoreEventsFB(event,elem=null){listEncodedfbEvents.push({event,elem})
while(listEncodedfbEvents.length>0&&greenSemaphore){greenSemaphore=false;await sendEncodedDataFB(listEncodedfbEvents[0].event,listEncodedfbEvents[0].elem);listEncodedfbEvents.shift();greenSemaphore=true;}}
async function sendEncodedDataFB(event,elem){if(listEncodedfb.length===0){await encodeDataFB();}
generateEventfbID();generateUtcTimeStamp();let eventfb;switch(event){case'PageView':eventfb=getPageViewfbEvent(event);break;case'Search':eventfb=getSearchfbEvent(event);break;case'ViewContent':eventfb=getProductDetailfbEvent(event,elem);break;case'AddToCart':eventfb=getAddToCartfbEvent(event,elem);break;case'removeFromCart':eventfb=getRemoveFromCartfbEvent(event,elem);break;case'AddToWishlist':eventfb=getAddToWishlistfbEvent(event,elem);break;case'InitiateCheckout':case'AddShippingInfo':case'AddPaymentInfo':case'CompleteRegistration':eventfb=getCheckOutfbEvent(event);break;case'Purchase':eventfb=getPurchasefbEvent(event,elem);break;default:eventfb=null;break;}
if(eventfb!==null){const nameData=event+'fb'
const objectToPushfb={'event':nameData,[nameData]:eventfb}
dataLayer.push(objectToPushfb);sendFbData(eventfb);}}
const purchaseEvent=(elem)=>{const paymentDetail=document.getElementById("paymentDetail").textContent.trim();obj={'event':'purchase','eventGA':{'category':'ecommerce','action':'purchase','label':elem.dataset.purchase,'noninteraction':true,},'ecommerce':{'purchase':{'actionField':{'id':elem.dataset.purchase,'revenue':elem.dataset.revenueExclTax,'tax':elem.dataset.tax,'shipping':elem.dataset.shipping,'coupon':elem.dataset.coupon,'totalProducts':elem.dataset.total,'totalorder':elem.dataset.revenue,'payment':paymentDetail,},'products':productsPurchase},'currencyCode':pageView.page.currency,},'skuProductPurchase':productsPurchasefb,}
getObjectToPush(obj);removeAllMiniCartInfo()
semaphoreEventsFB('Purchase',elem)}
const checkoutEvent=(elem,step,option,sendProducts=false)=>{obj={'event':'checkout','eventGA':{'category':'ecommerce','action':'checkout','label':'checkout page','noninteraction':true,},'ecommerce':{'checkout':{'actionField':{'step':step,'option':option,},},}}
if(sendProducts){obj.ecommerce.checkout.products=checkoutProducts;obj.ecommerce.value=priceCheckout;obj.ecommerce.currencyCode=pageView.page.currency;}
getObjectToPush(obj);}
const getURLParameter=(nameParam)=>{try{const urlParams=new URLSearchParams(window.location.search)
const valueParam=urlParams.get(nameParam)
if(valueParam!==null&&valueParam!==''){return valueParam;}
else{const otherParams=JSON.parse(sessionStorage.getItem(nameParam));if(otherParams!==null&&otherParams!==''){return otherParams}else{return'Direct';}}}catch{return'Direct';}}
const SaveURLParameter=(nameParam,urlParams)=>{try{const valueParam=urlParams.get(nameParam)
if(valueParam){sessionStorage.setItem(nameParam,JSON.stringify(valueParam));}}
catch(e){console.error('ERROR:'+e);}}
const SaveAllURLParams=()=>{const listOfParams=['s24clid','utm_source'];const urlParams=new URLSearchParams(window.location.search);listOfParams.forEach(async(elem)=>{await SaveURLParameter(elem,urlParams);});}
async function Shopping24Event(elem,nameS24){try{const myClickid=JSON.parse(sessionStorage.getItem(nameS24));if(myClickid){const dateTime=new Date().toISOString();const newClient=pageView.user.clientType==0;const bodyInfo={'click_id':myClickid,'conversion_time':dateTime,'order_id':elem.dataset.purchase,'conversion_value':elem.dataset.revenueExclTax,'currency':elem.dataset.currency,'attributed_credit':'','new_customer':newClient,'skus':productsPurchasefb,}
const httprequest={method:'post',headers:{'Content-Type':'application/json',},body:JSON.stringify(bodyInfo),};await fetch('https://tracking.s24.com/v1/conversion-tracking',httprequest);sessionStorage.removeItem(nameS24);}}
catch(e){console.error('ERROR:'+e);}}
const checkMiniCartInfo=(sku)=>{let infoProduct;let exist=false;let myMiniCartInfo=JSON.parse(localStorage.getItem('minicart-info'));if(myMiniCartInfo){myMiniCartInfo.forEach(e=>{if(e.sku===sku&&!exist){exist=true;infoProduct={'listName':e.listName,'position':e.position}}});if(!exist){infoProduct={'listName':'Direct','position':0,}}}
else{infoProduct={'listName':'Direct','position':0,}}
return infoProduct;}
const addMiniCartInfo=(sku)=>{let infoProduct;let myMiniCartInfo=JSON.parse(localStorage.getItem('minicart-info'));const clickInfo=listInSession();if(!myMiniCartInfo){myMiniCartInfo=[{'sku':sku,'listName':clickInfo.listName,'position':clickInfo.position,'country':pageView.user.country}];infoProduct={'listName':clickInfo.listName,'position':clickInfo.position};}
else{let same=false;myMiniCartInfo.forEach(e=>{if(e.sku===sku&&!same&&e.country===pageView.user.country){same=true;if(e.listName==='Direct'){e.listName=clickInfo.listName;e.position=clickInfo.position;}
else{e.listName=e.listName;e.position=e.position;}
infoProduct={'listName':e.listName,'position':e.position};}});if(!same){myMiniCartInfo.push({'sku':sku,'listName':clickInfo.listName,'position':clickInfo.position,'country':pageView.user.country});infoProduct={'listName':clickInfo.listName,'position':clickInfo.position};}}
localStorage.setItem('minicart-info',JSON.stringify(myMiniCartInfo));return infoProduct;}
const removeMiniCartInfo=(sku,className)=>{let myMiniCartInfo=JSON.parse(localStorage.getItem('minicart-info'));let infoProduct;if(myMiniCartInfo){let removeItem=false;let index=[];for(var i=0;i<myMiniCartInfo.length;i++){if(myMiniCartInfo[i].sku===sku){if(className==="delete"){removeItem=true;index.push(i);infoProduct={'listName':myMiniCartInfo[i].listName,'position':myMiniCartInfo[i].position};}
else{infoProduct={'listName':myMiniCartInfo[i].listName,'position':myMiniCartInfo[i].position};}}};if(removeItem){if(index.length>1){for(var i=index.length-1;i>=0;i--){if(myMiniCartInfo[i].country!==pageView.user.country){myMiniCartInfo.splice(i,1);break;}}}else{if(index.length>0)
myMiniCartInfo.splice(index[0],1);}}}
if(typeof infoProduct==='undefined'){infoProduct=listInSession();}
localStorage.setItem('minicart-info',JSON.stringify(myMiniCartInfo));return infoProduct;}
const removeAllMiniCartInfo=()=>{localStorage.setItem('minicart-info',JSON.stringify([]));};const addClickedProductTrack=(elem)=>{let fromProductPage=elem.dataset.origin?' From: '+elem.dataset.origin:'';dataLayer.push({'event':'TrackProduct','TrackProduct':{'category':`Click: ${elem.dataset.track}`,'action':`Position: ${elem.dataset.productPosition} ${fromProductPage}`,'label':`SKU: ${elem.dataset.productSku}`,'noninteraction':false,}});let myProductsClicked=JSON.parse(localStorage.getItem('TrackProducts'));if(!myProductsClicked){myProductsClicked=[{'sku':elem.dataset.productSku,'pos':elem.dataset.productPosition,'type':elem.dataset.track,'origin':fromProductPage}];}else{let index=myProductsClicked.findIndex(e=>e.sku===elem.dataset.productSku);if(index<0){myProductsClicked.push({'sku':elem.dataset.productSku,'pos':elem.dataset.productPosition,'type':elem.dataset.track,'origin':fromProductPage});}else{myProductsClicked[index].pos=elem.dataset.productPosition;myProductsClicked[index].type=elem.dataset.track;myProductsClicked[index].origin=fromProductPage;}}
localStorage.setItem('TrackProducts',JSON.stringify(myProductsClicked));};const checkClickedProductsTrack=(elem)=>{let result=false;let myProductsClicked=JSON.parse(localStorage.getItem('TrackProducts'));if(myProductsClicked){result=myProductsClicked.findIndex(e=>e.sku===elem.dataset.productSku)
if(result>=0){result=myProductsClicked[result];}
else{result=false;}}
return result;};const addToCartProductTrack=(elem)=>{dataLayer.push({'event':'TrackProduct','TrackProduct':{'category':`AddToCart: ${elem.type}`,'action':`Position: ${elem.pos} ${elem.origin}`,'label':`SKU: ${elem.sku}`,'noninteraction':false,}});};const purchaseClickedProductTrack=()=>{let result=false;let myProductsClicked=JSON.parse(localStorage.getItem('TrackProducts'));if(myProductsClicked){for(let i=0;i<myProductsClicked.length;i++){if(productsPurchase.findIndex(e=>e.id===myProductsClicked[i].sku)>=0){result=myProductsClicked[i];break;}}
if(result){dataLayer.push({'event':'TrackProduct','TrackProduct':{'category':`Purchase: ${result.type}`,'action':`Pos: ${result.pos} SKU: ${result.sku} ${result.origin}`,'label':productsPurchasefb,'noninteraction':false,}});}
removeAllClickedTrackedProducts();}};const removeAllClickedTrackedProducts=()=>{localStorage.removeItem('TrackProducts');};const addClickPromotionTrack=(elem)=>{dataLayer.push({'event':'TrackPromotion','TrackPromotion':{'category':`Click: ${elem.dataset.promoTrack}`,'action':`Position: ${elem.dataset.promoPosition}`,'label':`Name: ${elem.dataset.promoName}`,'noninteraction':false,}});let myPromotionsClicked=JSON.parse(localStorage.getItem('TrackPromotions'));if(myPromotionsClicked){let index=myPromotionsClicked.findIndex(e=>e.name===elem.dataset.promoName);if(index<0){myPromotionsClicked.push({'name':elem.dataset.promoName,'pos':elem.dataset.promoPosition,'type':elem.dataset.promoTrack,});}else{myPromotionsClicked[index].pos=elem.dataset.promoPosition;myPromotionsClicked[index].type=elem.dataset.promoTrack;}}else{myPromotionsClicked=[{'name':elem.dataset.promoName,'pos':elem.dataset.promoPosition,'type':elem.dataset.promoTrack,}];}
localStorage.setItem('TrackPromotions',JSON.stringify(myPromotionsClicked));};const checkSKUInList=(listOfProducts,sku)=>{if(listOfProducts){return listOfProducts.findIndex(e=>e===sku)>=0;}
return false};const checkClickedPromotionTrack=(elem,categorySplitted)=>{let result=false;let indexArray=-1;let myPromotionsClicked=JSON.parse(localStorage.getItem('TrackPromotions'));if(myPromotionsClicked&&categorySplitted.length>0){const maxLoop=categorySplitted.length>2?2:categorySplitted.length;for(let j=0;j<maxLoop;j++){if(j>0||categorySplitted[j]!=="Furniture"){indexArray=myPromotionsClicked.findIndex(elem=>(categorySplitted[j].includes(elem.name)));if(indexArray>-1){break;}}}
if(indexArray>=0){if(myPromotionsClicked[indexArray].products&&!checkSKUInList(myPromotionsClicked[indexArray].products,elem.dataset.productSku)){myPromotionsClicked[indexArray].products.push(elem.dataset.productSku);}else{myPromotionsClicked[indexArray].products=[elem.dataset.productSku];}
localStorage.setItem('TrackPromotions',JSON.stringify(myPromotionsClicked));result=myPromotionsClicked[indexArray];}}
return result;};const checkSKUInListOfListsPromotionsTrack=(myPromotionsClicked,sku)=>{for(let index=0;index<myPromotionsClicked.length;index++){if(checkSKUInList(myPromotionsClicked[index].products,sku)){return myPromotionsClicked[index];}}
return false;};const addToCartPromotionTrack=(elem)=>{dataLayer.push({'event':'TrackPromotion','TrackPromotion':{'category':`AddToCart: ${elem.type}`,'action':`Position: ${elem.pos} Name : ${elem.name}`,'label':`SKU: ${elem.sku}`,'noninteraction':false,}});};const purchaseClickedPromotionTrack=()=>{let myPromotionsClicked=JSON.parse(localStorage.getItem('TrackPromotions'));let result=false;let resultSKU='';if(myPromotionsClicked){for(let index=0;index<productsPurchase.length;index++){result=checkSKUInListOfListsPromotionsTrack(myPromotionsClicked,productsPurchase[index].id);if(result){resultSKU=productsPurchase[index].id;break;}}}
if(result){dataLayer.push({'event':'TrackPromotions','TrackPromotions':{'category':`Purchase: ${result.type}`,'action':`Pos: ${result.pos} Name: ${result.name} SKU: ${resultSKU}`,'label':productsPurchasefb,'noninteraction':false,}});}
removeAllClickedTrackedPromotions();};const removeAllClickedTrackedPromotions=()=>{localStorage.removeItem('TrackPromotions');};const eventTrackAddToCart=async(elem)=>{const clickedProduct=await checkClickedProductsTrack(elem);if(clickedProduct){await addToCartProductTrack(clickedProduct);}
let myPromotionsClicked=JSON.parse(localStorage.getItem('TrackPromotions'));if(myPromotionsClicked){let clickedPromotion=await checkSKUInListOfListsPromotionsTrack(myPromotionsClicked,elem.dataset.productSku);if(clickedPromotion){clickedPromotion.sku=elem.dataset.productSku;await addToCartPromotionTrack(clickedPromotion);}}}
const eventTrackPurchase=async()=>{await purchaseClickedProductTrack();await purchaseClickedPromotionTrack();}
const setContentGroupDetail=(elem)=>{const objectCategories=elem.dataset.productCategory.split('/');for(let index=0;index<objectCategories.length;index++){if(objectCategories[index]){const contentGroup='content_group'+(index+1);dataLayer.push('set',{[contentGroup]:objectCategories[index]})}}};const checkProductPosition=(elem)=>{let parent=elem.parentElement;let parentsList=parent.parentElement.getElementsByTagName("li");for(let index=0;index<parentsList.length;index++){if(parentsList[index]===parent){elem.dataset.productPosition=index+1;break;}}
if(!elem.dataset.productPosition){elem.dataset.productPosition=1;}};const addEventListenerDataKHInElement=(element)=>{element.querySelectorAll("[data-kh]").forEach(function(elem){elem.addEventListener("click",(e)=>{const categoryclick=elem.dataset.kh;if(categoryclick!=='no-impresions'&&categoryclick!=='addtocart'&&!drag){pushViews()}
switch(categoryclick){case'product':if(!drag){checkProductPosition(elem);productClick(elem);if(typeof categoryTree!=='undefined'){checkClickedPromotionTrack(elem,categoryTree);}
if(elem.dataset.track){addClickedProductTrack(elem)}}
break;case'promo':if(!drag){promoClick(elem);if(elem.dataset.promoTrack){addClickPromotionTrack(elem)}}
break;case'addtocart':break;default:defaultClick(elem);break;}});});};document.addEventListener('mousedown',()=>drag=false);document.addEventListener('mousemove',()=>drag=true);document.addEventListener('mouseup',(elem)=>{if(!drag&&elem.target.dataset.kh==='addtocart'){addToCart(elem.target);eventTrackAddToCart(elem.target);}});window.addEventListener('load',function(){document.querySelectorAll("[data-track]").forEach(function(elem){elem.querySelectorAll("[data-kh]").forEach(function(product){if(product.dataset.kh==='product'){product.dataset.track=elem.dataset.track;if(elem.dataset.origin){product.dataset.origin=elem.dataset.origin;}}});});addEventListenerDataKHInElement(document);document.querySelectorAll("[data-purchase-item]").forEach(function(elem){const productInfo=checkMiniCartInfo(elem.dataset.productSku);productsPurchase.push({'name':elem.dataset.productSku,'id':elem.dataset.productSku,'price':elem.dataset.productPrice,'brand':'KaveHome','category':elem.dataset.productCategory,'variant':elem.dataset.productVariant,'list':productInfo.listName,'position':productInfo.position,'quantity':elem.dataset.productQuantity,'coupon':elem.dataset.productCoupon,});productsPurchasefb.push(elem.dataset.productSku);});document.querySelectorAll("[data-checkout-product-list]").forEach(function(elem){const productInfo=checkMiniCartInfo(elem.dataset.checkoutProductSku);checkoutProducts.push({'name':elem.dataset.checkoutProductSku,'id':elem.dataset.checkoutProductSku,'price':elem.dataset.checkoutProductPrice,'brand':'KaveHome','category':elem.dataset.checkoutProductCategory,'variant':elem.dataset.checkoutProductVariant,'list':productInfo.listName,'position':productInfo.position,'quantity':elem.dataset.checkoutProductQuantity,});priceCheckout+=(parseFloat(elem.dataset.checkoutProductPrice)*parseInt(elem.dataset.checkoutProductQuantity));});if(!!window.IntersectionObserver){let observer=new IntersectionObserver((entries,observer)=>{entries.forEach((entry,index)=>{let categoryView=entry.target.dataset.kh;if(entry.isIntersecting){if(categoryView==='product'&&entry.target.dataset.productSku){productViews.push({'name':entry.target.dataset.label,'id':entry.target.dataset.productSku,'price':entry.target.dataset.productPrice,'brand':'KaveHome','category':entry.target.dataset.productCategory,'variant':entry.target.dataset.productVariant,'list':entry.target.dataset.productList,});productsGA.push(entry.target.dataset.productSku);}else if(entry.target.dataset.promoId){promoViews.push({'id':entry.target.dataset.promoId,'name':entry.target.dataset.promoName,'creative':entry.target.dataset.promoCreative,'position':entry.target.dataset.promoPosition,});promosGA.push(entry.target.dataset.promoId);}
observer.unobserve(entry.target);}});});document.querySelectorAll("[data-impresion]").forEach(entry=>{observer.observe(entry);});}
var pageViewNodes=document.querySelectorAll('[data-view]');var lastNode=pageViewNodes[pageViewNodes.length-1];const pageViewCategory=lastNode.dataset.view;const defaultPageView={'event':'pageView','eventId':eventId,pageView};dataLayer.push({ecommerce:null});semaphoreEventsFB('PageView');switch(pageViewCategory){case'detail':setContentGroupDetail(lastNode);const productDetail=getProductDetail(lastNode);const productDetailObj={'event':'productDetail','eventGA':productDetail.eventGA,'ecommerce':productDetail.ecommerce};objectToPush={'event':'pageView','eventId':eventId,pageView,'eventGA':productDetail.eventGA,'ecommerce':productDetail.ecommerce};dataLayer.push(objectToPush);dataLayer.push(productDetailObj);SaveAllURLParams();semaphoreEventsFB('ViewContent',lastNode)
break;case'purchase':dataLayer.push(defaultPageView);purchaseEvent(lastNode);eventTrackPurchase();Shopping24Event(lastNode,'s24clid');break;case'checkout':dataLayer.push(defaultPageView);checkoutEvent(lastNode,'1','Load',true);semaphoreEventsFB('InitiateCheckout');break;default:dataLayer.push(defaultPageView);}
if(searchBtn){searchBtn.addEventListener('click',function(){semaphoreEventsFB('Search')});}});const sendGAEventSliderHome=(elem,direction)=>{let ariaHiddenElementIndex=null;elem.parentElement.querySelectorAll('[aria-hidden]').forEach((element)=>{if(element.ariaHidden==='false'){ariaHiddenElementIndex=element.dataset.slickIndex;}});if(ariaHiddenElementIndex){const category='Home';dataLayer.push({'event':'eventGA','eventGA':{'category':category,'action':direction,'label':ariaHiddenElementIndex,'noninteraction':false,}})}};var checkbox=document.getElementById('display-menu'),menuRoot=document.getElementById('menuRoot'),header=document.getElementById('site-header'),showCart=document.getElementById('showCart'),openDefaultSearch=document.getElementById('iconMenuSearch'),last_scroll_position=0,scroll_percentage=0,menu_pixels=64,showSlimMenu=10,slimMenuHeight=30,onHover=false;if(menuRoot){window.addEventListener("scroll",function(){last_scroll_position=this.window.scrollY;scroll_percentage=getVerticalScrollPercentage(this.document.body);if(last_scroll_position<menu_pixels){header.classList.remove('menu-fixed');header.classList.remove('hide-menu');}else if(scroll_percentage>=showSlimMenu&&!onHover){header.classList.add('hide-menu');header.classList.remove('menu-fixed');}else{header.classList.add('menu-fixed');header.classList.remove('hide-menu');}});document.querySelectorAll('.has-children-0').forEach((e)=>{e.addEventListener("mouseenter",()=>{if(onHover){enterHandler(e)}else{enterTimeout=setTimeout(function(){enterHandler(e)},500);}},false);e.addEventListener("mouseleave",()=>{clearTimeout(enterTimeout)
e.classList.remove('sub-menu-visible');leaveTimeout=setTimeout(function(){onHover=false;},50)});});const enterHandler=function(e){onHover=true;e.classList.add('sub-menu-visible');e.querySelectorAll(".level-2").forEach(element=>{showObfuscatedProps(element.querySelectorAll('a'));});clearTimeout(leaveTimeout)}
if(checkbox!==null){checkbox.addEventListener("change",blockContent,false);}
function blockContent(){var isChecked=checkbox.checked;if(isChecked){document.body.classList.add('fixed-html');}else{document.body.classList.remove('fixed-html');}}
function openMenu(ex){var arrow='a-'+ex;var item='li-'+ex;var element=document.getElementById(ex);var changearrow=document.getElementById(arrow);var itemmenu=document.getElementById(item);if(element.classList.contains('show')){element.classList.remove('show');changearrow.classList.remove('active');itemmenu.classList.remove('active');}else{element.classList.add('show');changearrow.classList.add('active');itemmenu.classList.add('active');}
event.stopPropagation();}
function getVerticalScrollPercentage(element){var parent=element.parentNode
return(element.scrollTop||parent.scrollTop)/(parent.scrollHeight-parent.clientHeight)*100}
function getVerticalPixelsOfPercentage(element,percentage){var parent=element.parentNode;var height=parent.scrollHeight-parent.clientHeight;return height*percentage/100;}
function showObfuscatedProps(element){element.forEach(element=>{element.href=element.dataset.href;element.title=element.dataset.title;element.querySelectorAll('span')[0].innerText=element.title;});}}
const updateWishlistOptions=(optionsWishlist)=>{var s=document.createElement('script');s.text=optionsWishlist;document.body.appendChild(s);}
const updateBasketItems=(items)=>{if(items>0){var itemhtml='<p id="cartItems" class="items-number">'+items+'</p>';showCart.innerHTML=showCart.innerHTML+itemhtml;}}
const getBasketAndWishlistItems=async()=>{const requestDate=Date.now();try{let response=await fetch(`/api/basket-items/?`+requestDate).then();const result=await response.text();const parser=new DOMParser();const responseHtml=parser.parseFromString(result,"text/html");const numcart=parseInt(responseHtml.getElementById('request-basket').innerHTML);const optionsWishlist=responseHtml.getElementsByTagName('script')[0].innerHTML;updateBasketItems(numcart);updateWishlistOptions(optionsWishlist);}catch(err){console.log('Fetch error:'+err);}}
const openDefaultSearchBox=()=>{const formHeaderDefault=document.getElementById('basic-search-form');const closeHeaderDefault=document.getElementById('basic-close-results');const searchHeaderDefault=document.getElementById('basic-search-button');searchHeaderDefault.classList.add('open');formHeaderDefault.style.display='flex';closeHeaderDefault.addEventListener('click',()=>{formHeaderDefault.style.display='';});}
if(showCart){getBasketAndWishlistItems();}
if(openDefaultSearch){openDefaultSearch.addEventListener('click',openDefaultSearchBox);};(function($){$(document).on("click touchstart","a[href^='#']:not(.accordion-toggle):not(.carousel-btn):not(.close-popup):not([data-toggle='collapse'])",function(e){e.preventDefault();$(".site-header-alt .menu li").removeClass("active");$(this).parent().addClass("active");var target=this.hash;var $target=$(target);$('html, body').stop().animate({'scrollTop':$target.offset().top},300,'swing');});const openSearchBox=()=>{document.getElementById('searchbox').classList.add('show');document.getElementById('search-button').classList.remove('open');document.getElementById('search-button').classList.add('hide');document.getElementById('searchContainer').classList.add('open');document.getElementById('search-input').classList.add('open');document.getElementById('search-input').classList.remove('hide');if(document.body.clientWidth<992){document.getElementById('algolia-box').classList.add('show');}
$(".ais-SearchBox-input").focus();}
const closeSearchBox=()=>{document.getElementById('algolia-box').classList.remove('show');document.getElementsByTagName('html')[0].classList.remove('scroll-locked');document.getElementById('searchbox').classList.remove('show');document.getElementById('searchContainer').classList.remove('open');document.getElementById('search-input').classList.remove('open');document.getElementById('search-input').classList.add('hide');document.getElementById('search-button').classList.remove('hide');document.getElementById('search-button').classList.remove('open');document.getElementById('shadowSearch').classList.remove('show');}
const openBasicSearchBox=()=>{document.getElementById('basic-search-button').classList.add('open');document.getElementById('search-form').classList.add('header-form');document.getElementById('search-input').style.display='block';}
const closeBasicSearchBox=()=>{document.getElementById('basic-search-button').classList.remove('open');document.getElementById('search-form').classList.remove('header-form');document.getElementById('search-input').style.display='none';}
$(document).on("click","#search-button",function(e){var htmlBox=`
        <div class="search-panel w-100" id="algolia-search-results">
            <div class="right-panel">
                <div class="search-panel-results">
                    <div id="hits-categories-index" class="category-results"></div>
                    <div id="hits-magazines-index" class="magazine-results"></div>
                    <div id="hits-product" class="product-results"></div>
                </div>
                <div id="pagination"></div>
            </div>
        </div>
    `;var container=document.getElementById('algolia-results');container.innerHTML=htmlBox;var algolia_loaded=false;e.preventDefault();openSearchBox();if(algolia_loaded!=true){load_algolia_scripts();}
$('.ais-SearchBox-reset').removeAttr('hidden');$(".ais-SearchBox-input").keyup(function(){var value=$(this).val();if(value.length==0){$('.ais-SearchBox-reset').removeAttr('hidden');}else{}});$(document).keyup(function(e){if(e.key==="Escape"){closeSearchBox();closeBasicSearchBox();}});});$(document).on("click","#basic-search-button",function(e){openBasicSearchBox();$(document).keyup(function(e){if(e.key==="Escape"){closeBasicSearchBox();}});});$(document).on("click","#basic-close-results",function(e){closeBasicSearchBox();e.preventDefault();});window.addEventListener('click',function(e){const shadowSearchElement=document.getElementById('shadowSearch')
if(shadowSearchElement){if(document.getElementById('shadowSearch').contains(e.target)){closeSearchBox();}}});$("#close-results").on("click",function(){closeSearchBox();});$(document).on("click","#toogle-placeholder",function(e){var container=document.getElementById('colors-list');e.preventDefault();if(container.classList.contains('show')){container.classList.remove('show');this.classList.remove('active');}else{container.classList.add('show');this.classList.add('active');}});$(document).on("click",".close-popup",function(){$('.cancelled-popup-overlay').removeClass('show');$('.cancelled-popup').removeClass('show');$('.shadow-ip').removeClass('show');});$(document).on("click",".shadow-ip",function(){$('.cancelled-popup-overlay').removeClass('show');$('.cancelled-popup').removeClass('show');$('.shadow-ip').removeClass('show');});$(document).on("click",".add-to-basket .quantity-js .plus",function(){var container=$(this).parents(".quantity-js");var input=container.find("input");var max=container.find('input').attr('max');var step=container.find('input').attr('step');var newQuantity=Number(input.val())+Number(step);if(newQuantity<=max){$('#qty').val(newQuantity);$('#qty').text(newQuantity);}});$(document).on("click",".add-to-basket .quantity-js .minus",function(){var container=$(this).parents(".quantity-js");var input=container.find("input");var step=container.find('input').attr('step');var newQuantity=Number(input.val())-Number(step);if(newQuantity>0){$('#qty').val(newQuantity);$('#qty').text(newQuantity);}});$(document).on("click",".filter-group-title",function(){var $this=$(this);var $parent=$(this).parents(".filter-group");if($(this).hasClass("open")){$parent.removeClass("open");$this.removeClass("open");$parent.find(".filter-group-content").animate({opacity:0},200);setTimeout(function(){$parent.find(".filter-group-content").slideUp(200);},200);}else{$parent.addClass("open");$this.addClass("open");$parent.find(".filter-group-content").slideDown(200);setTimeout(function(){$parent.find(".filter-group-content").animate({opacity:1},200);},200);}});$(document).mouseup(function(e){var container=$(".filter-group-content");var parent=$(".filter-group");if(!parent.is(e.target)&&parent.has(e.target).length===0)
{container.hide();$(".filter-group-title").removeClass("open");$(".filter-group").removeClass("open");}});$(document).on("change","#lang-form input[type='radio']",function(e){e.preventDefault();var $radio=$(this);var hreflang=$("link[hreflang='"+$radio.val()+"-"+oscar.store_code.toUpperCase()+"']").attr('href');$('#next-url').val(hreflang);$radio.parents("form").submit();});$(document).on("click",".share-product",function(e){e.preventDefault();var copyText=$(".texttocopy").select();document.execCommand("copy");$(".shipinfo").show();setTimeout(function(){$(".shipinfo").hide();},1800);});if($(window).width()>991){window.onscroll=function(){var scroll=window.pageYOffset;if(scroll>85){if($('.menu-add-to-cart').length){if(scroll>500){$('#product .product-tabs').addClass('fixed');}else{$('#product .product-tabs').removeClass('fixed');}}
if(!$('.toast').hasClass('show')){$('body #header .content').addClass('fixed');}}else{$('#sidebar_toggle').removeClass('up');$('body #header .content').removeClass('fixed');}}}
$('.toast').on('shown.bs.toast',function(){$('body #header').removeClass('fixed');$('body #header .content').removeClass('fixed');});$('.toast').on('hidden.bs.toast',function(){$('body #header').addClass('fixed');$('body #header .content').addClass('fixed');});$('#breadcrumbs li').each(function(i,eleme){var cat_breadcrumbs=$(eleme)[0].innerText;$('.navigation .menu li').each(function(i,ele){var cat=$(ele)[0].innerText;if(cat_breadcrumbs.trim()==cat){$(ele).addClass('active');return false;}})})
$('[data-action^=newsletter]').submit(function(event){event.preventDefault();var form=$(this);$(form).children('.row').children('#form-interaction').children('#mce-responses').html("");var store_code=form.find('input[name=store_code]').val();var language_code=form.find('input[name=language_code]').val();const email=form.find('input[name=EMAIL]').val();var url=location.origin+"/"+store_code+"/"+language_code+'/api/newsletterusers/';$.ajax({type:"POST",url:url,header:{'Content-Type':'application/json'},data:form.serialize(),success:function(result){var className='success';marketingNewsletterSubscription(store_code,language_code,email);$('<div class="warning '+className+' "><p>'+result+'</p></div>').appendTo($(form).children('.row').children('#form-interaction').children('#mce-responses'));$(form).children('.row').children('#form-interaction').children('input').addClass(className);},error:function(result){var className='error';var result=result.responseText;$('<div class="warning '+className+' "><p>'+result+'</p></div>').appendTo($(form).children('.row').children('#form-interaction').children('#mce-responses'));$(form).children('.row').children('#form-interaction').children('input').addClass(className);}});});if(window.location.hash){var element=$(window.location.hash).find("a[data-toggle=\"collapse\"]");var newHash=window.location.hash;if(element.length>0){$(element).click();$(element).find('span').toggleClass('selected');$('html, body').animate({scrollTop:($(element).offset().top+(-300))},700);}else{$('.nav-tabs a[href="'+newHash+'"]').tab('show');}}
$('.accordion-toggle').click(function(){$(this).find('span').toggleClass('selected');});$('[data-name="filters-button"]').click(function(){$('[data-name="toolbarBox"]').addClass('show');$('[data-name="filters-block"]').addClass('show');$('#kavehome-body').addClass('fixed-html');});$('[data-name="filters-close"]').click(function(){$('[data-name="toolbarBox"]').removeClass('show');$('[data-name="filters-block"]').removeClass('show');$('#kavehome-body').removeClass('fixed-html');});$(document).on('click','[name="open_delete_wishlist"]',function(e){e.preventDefault();var $this=$(this);var product=$($this).attr('data-product');var name_popup="cancelled-popup-"+product+"";$('body').append($('[name="'+name_overlay+'"]'));$('body').append($('[name="'+name_popup+'"]'));$('#overlay-wishlist').addClass('show');$('[name="'+name_popup+'"]').addClass('show');});$(document).on('click','#overlay-wishlist',function(){$('#overlay-wishlist').removeClass('show');$('.cancelled-popup').removeClass('show');$('#wishlist-popup').empty();});$(document).on('click','[name="cancelled-popup-create-list-button"]',function(){$('body').append($('[name="cancelled-popup-create-list"]'));$('#overlay-wishlist').addClass('show');$('[name="cancelled-popup-create-list"]').addClass('show');});$(document).on('click','[name="close_popup_create_list"]',function(){$('#overlay-wishlist').removeClass('show');});$(document).on('click','li.wishlists-add-product',function(e){var $this=$(this);e.preventDefault();var name=$this.parent().parent().parent().attr('name');var product=name.split('-').reverse()[0];var url=$this.children().attr('href');$.get(url,function(data){$('[name="'+name+'"]').removeClass('show');$('a[data-product="'+product+'"]').children('span').removeClass('icon-heart-empty')
$('a[data-product="'+product+'"]').children('span').addClass('icon-heart-full')
wishlist.session.updateHeaderCounter();});});$('[name="header-wishlist"]').click(function(e){var url=$(this).attr('href');if(!wishlist.session.isAuthenticated){e.preventDefault();var data={"favorites":localStorage.getItem('favorites')};$.get(url,data,function(response){window.location=response.url});}});$(document).on('click','.create-new-wishlist',function(e){e.preventDefault();var url=$(this).data('url');$.get(url,function(data){$('.create-new-wishlist-popup > .cancelled-popup-body').html(data);})});$(document).on('click','#wishlist-key-value',function(data){this.select();var successful=document.execCommand('copy');var msg=successful?'Copied!':'Whoops, not copied!';$(this).attr('title',msg);$(this).tooltip('show');});})(jQuery);function activeButton(elem){var father=$(elem).closest('form');var button=$(father).find('#mc-embedded-subscribe');var checkbox=$(father).find('#accept-policies');$(button)[0].classList.add('active');$(checkbox)[0].classList.add('active');}
function addClassByClick(button){if($(button).parent('li').hasClass("active")){$(button).parent('li').removeClass("active")
event.stopPropagation();}else{$(button).parent('li').addClass("active")
event.stopPropagation();}}
$(function(){var anchor=window.location.hash;if(anchor){$('.login-register-item[href="'+anchor+'"]').trigger('click');}else{$('#login_register li:first-child a').tab('show')}});const tradedoubler=(url)=>{const parser=document.createElement('a');let paramFound,i,pair;parser.href=url;const query=parser.search.substring(1);if(query){const params=query.split('&');paramFound=false;i=0;while(!paramFound&&i<params.length){pair=params[i].split('=');if(pair[0]==='tduid'){sessionStorage.setItem('tduid',decodeURIComponent(pair[1]));paramFound=true;}else{i++;}}}}
document.addEventListener('hashchange',tradedoubler(window.location.href))
function addSourceToVideo(element,src){var source=document.createElement('source');source.src=src;source.type='video/mp4';element.appendChild(source);}
const checkDisplayVideo=()=>{var videoTag=document.getElementById('slider-video');if(videoTag){var windowWidth=window.innerWidth?window.innerWidth:$(window).width();if(windowWidth>800){addSourceToVideo(videoTag,videoTag.dataset.desktopvid);}else{addSourceToVideo(videoTag,videoTag.dataset.mobilevid);}}}
document.addEventListener('hashchange',checkDisplayVideo());const shippingPrices=(e)=>({"es":100,"en":1000,"nl":150,"it":500,"pt":300,"de":99,"fr":500,"pl":4500,"ie":1000,"be":150,})[e];const getShippingText=(e)=>{const shippingStore=shippingPrices(e.dataset.store);const productPrice=parseFloat(e.dataset.price);if(productPrice>shippingStore){e.innerText=e.dataset.shippingtext;}else{e.innerText=e.dataset.shippingdefault+' '+shippingStore+' '+e.dataset.currency;}}
const showPopupChangeCountry=()=>{$.get("/popup-geoip/",function(data){$('.content-popup-geoip').html(data);$('[name="popup-geoip"]').addClass('show');$('.shadow-ip').addClass('show');localStorage.setItem('geoip',true);});}
const shippingDetailBox=document.getElementById("freeShippingText");const productTimer=(element,date)=>{const countDownDate=new Date(date).getTime();const parentElement=document.getElementById(element);setInterval(()=>{const now=new Date().getTime();diff=countDownDate-now;days=Math.floor(diff/(1000*60*60*24));hours=Math.floor(diff%(1000*60*60*24)/(1000*60*60));minutes=Math.floor(diff%(1000*60*60)/(1000*60));seconds=Math.floor(diff%(1000*60)/1000);hours<=9?hours=`0${hours}`:hours;minutes<=9?minutes=`0${minutes}`:minutes;seconds<=9?seconds=`0${seconds}`:seconds;if(countDownDate<now){hours=`00`
minutes=`00`
seconds=`00`};if(days<1){const countdownHtml=`${hours} : ${minutes} : ${seconds}`;parentElement.firstChild.innerHTML=countdownHtml;}},1000);}
document.querySelectorAll("[data-countdown]").forEach(entry=>{productTimer(entry.id,entry.dataset.countdown);});;const sessionStorageKey=(storeCode)=>`storeInfo_${storeCode}`;const fetchStoreInfo=async(storeCode)=>{const apiUrl=`/api/stores/${storeCode}/`;return fetch(apiUrl).then(response=>response.json()).then(storeInfo=>{const jsonInfo=JSON.stringify(storeInfo);sessionStorage.setItem(sessionStorageKey(storeCode),jsonInfo)
return jsonInfo;});}
const getStoreInfo=async(storeCode)=>{return sessionStorage.getItem(sessionStorageKey(storeCode))||await fetchStoreInfo(storeCode);};const renderConnectifScript=(storeCode,languageCode)=>{getStoreInfo(storeCode).then((jsonInfo)=>{var storeInfo=JSON.parse(jsonInfo);storeInfo.connectifProfiles.forEach(profile=>{if(languageCode.toLowerCase()===profile.language.toLowerCase()){webKey=profile.web_integration_key;scriptId=`__cn_generic_script__${webKey}`;script=document.getElementById("connectif-script");script.innerHTML=`!function(e){function t(){if(!e.querySelector("#__cn_client_script_${webKey}")){var t=e.createElement("script");t.setAttribute("src","https://cdn.connectif.cloud/eu4/client-script/${webKey}"),e.body.appendChild(t)}}"complete"===e.readyState||"interactive"===e.readyState?t():e.addEventListener("DOMContentLoaded",t)}(document);`;script.setAttribute("id",scriptId);}});});}
function sendLoginConnectif(user){try{connectif.managed.sendEvents([{type:"login"},],{entityInfo:{primaryKey:user.email,_name:user.firstName,_surname:user.lastName,}});}catch(e){console.error(e);}}
function sendRegistrationConnectif(user,newsletterSubscription=false){try{connectif.managed.sendEvents([{type:"register"},],{entityInfo:{primaryKey:user.email,_name:user.firstName,_surname:user.lastName,_newsletterSubscriptionStatus:newsletterSubscription?"subscribed":"unsubscribed",}});}catch(e){console.error(e);}}
const marketingNewsletterSubscription=(store,language,email)=>{const csrftoken=Cookies.get('csrftoken');const view_url=`/${store}/${language}/api/connectif/connectif_event/subscribe/`;fetch(view_url,{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json','X-CSRFToken':csrftoken,},body:JSON.stringify({email})}).catch(error=>{console.error("Sent connectif event. Error: ",error)});}
const sendConnectifEvent=(store,language,type,payload={})=>{const csrftoken=Cookies.get('csrftoken');const view_url=`/${store}/${language}/api/connectif/connectif_event/send_event/`;fetch(view_url,{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json','X-CSRFToken':csrftoken,},body:JSON.stringify({type,payload})}).catch(error=>{console.error("Sent connectif event. Error: ",error)});}
const subscribeUserNewsletter=(store,language,email,token)=>{const csrftoken=Cookies.get('csrftoken');let baseURL=`${window.location.origin}/${store}/${language}/api/subscribenewsletter/`;let url=new URL(baseURL);let params=url.searchParams;params.append('email',email);params.append('token',token);fetch(url.toString(),{method:'get',headers:{'X-CSRFToken':csrftoken},}).catch(error=>{console.error("Subscribe to newsletter. Error: ",error)});};function change_add_to_basket(option){var id_product=$(option).children('option:selected');$('.add-to-cart').data('product-id',id_product.val());$('.add-to-cart').data('product-url',id_product.attr('data-url'));$('.product-brother-price').text(id_product.attr('data-price'));window.location=id_product.data('url');};var nilo=(function(n,$){n.utils={updateCollapseBlocks:function(block){if(block=='address'){if($('.billing-address-block').hasClass('collapsed')){$.ajax({url:n.address.url,type:"GET",data:{'block':block},dataType:'html',success:function(data){$('#billing_address_group').empty();$('#billing_address_group').html(data);$('.shipping_method_block').addClass('collapsed');$("#shipping_method_group").addClass('disabled');$("#shipping_method_group .icon-edit").removeClass('show');$("#summary-shipping-method").hide();$('.payment_details_block').addClass('collapsed');$('#payment_details_group').addClass('disabled');},error:function(data){}});}else{$("#summary-address").show();$('.billing-address-block').addClass('collapsed');$("#billing_address_group .icon-edit").addClass('show');$('.shipping_method_block').removeClass('collapsed');$("#shipping_method_group").removeClass('disabled');$("#shipping_method_group .icon-edit").removeClass('show');$('.payment_details_block').addClass('collapsed');}}
if(block=='shipping'){if($('.shipping_method_block').hasClass('collapsed')){$("#summary-shipping-method").hide();$('.shipping_method_block').removeClass('collapsed');$("#shipping_method_group").removeClass('disabled');$("#shipping_method_group .icon-edit").removeClass('show');$('.billing-address-block').addClass('collapsed');$("#billing_address_group .icon-edit").addClass('show');$('.payment_details_block').addClass('collapsed');$('#payment_details_group').addClass('disabled');}else{if(n.shipping.isDeliveryAllowed()){$.ajax({url:n.address.url,type:"GET",data:{'block':block},dataType:'html',success:function(data){$('.shipping_method_block').addClass('collapsed');$('.payment_details_block').removeClass('collapsed');},error:function(data){}});}
$("#summary-shipping-method").show();$("#shippingName").text(sessionStorage.getItem('shipping-info'));$('.shipping_method_block').addClass('collapsed');$("#shipping_method_group .icon-edit").addClass('show');$('.payment_details_block').removeClass('collapsed');$('.billing-address-block').addClass('collapsed');}}
if(block=='payment'){if($('.payment_details_block').hasClass('collapsed')){$('.payment_details_block').removeClass('collapsed');$("#payment_details_group .icon-edit").removeClass('show');$('.shipping_method_block').addClass('collapsed');$("#shipping_method_group .icon-edit").addClass('show');$('.billing-address-block').addClass('collapsed');$("#billing_address_group .icon-edit").addClass('show');}else{$('.payment_details_block').addClass('collapsed');$("#payment_details_group .icon-edit").addClass('show');$('.shipping_method_block').removeClass('collapsed');$('.billing-address-block').addClass('collapsed');}}}};n.messages={init:function(type,element_id){n.messages.type=type||'inline';n.messages.element_id=element_id||'messages';},addMessage:function(tag,msg){if(n.messages.type==='inline'){$('#'+n.messages.element_id).append('<div>'+msg+'</div>');}else{var msgHTML='<div class="alert fade in alert-'+tag+'">'+'<a href="#" class="close" data-dismiss="alert">&times;</a>'+msg+'</div>';$('#'+n.messages.element_id).append(msgHTML);}},debug:function(msg){n.messages.addMessage('debug',msg);},info:function(msg){n.messages.addMessage('info',msg);},success:function(msg){n.messages.addMessage('success',msg);},warning:function(msg){n.messages.addMessage('warning',msg);},error:function(msg){n.messages.addMessage('danger',msg);},clear:function(){$('#'+n.messages.element_id).html('');},scrollTo:function(){$('html').animate({scrollTop:$('#'+n.messages.element_id).offset().top});},showMessages:function(element_id,type,messages){if(messages.constructor===String){$('#'+element_id).html(messages);}else if(Object.keys(messages).length>0){n.messages.init(type,element_id);n.messages.clear();for(var level in messages){for(var i=0;i<messages[level].length;i++){n.messages[level](messages[level][i]);}}}}};n.auth={init:function(){n.auth.loginSubmitId='login_submit';n.auth.registrationSubmitId='registration_submit';n.auth.guestSubmitId='guest_submit';n.auth.initEvents();},initEvents:function(){$("#login_register_group #"+n.auth.loginSubmitId).click(function(){u.status.setUser();});$("#login_register_group #"+n.auth.registrationSubmitId).click(function(){u.status.setUser();});$("#login_register_group #"+n.auth.guestSubmitId).click(function(){$(this).addClass("active");$('#login_register_group .login-register-block').addClass('collapsed');$('#login_register_group .icon-arrow').addClass('show');n.auth.setAnonymousUser();});$("#login_register_group .icon-arrow").click(function(){$(this).removeClass("show");$('#login_register_group .login-register-block').removeClass('collapsed');});},setAnonymousUser:function(){n.status.setUser();$('#guest_submit').addClass('d-none');},checkAnonymousEnabled:function(){var action_button=$("#login_register_group #"+n.auth.guestSubmitId)
if(action_button.data('anonymous-checkout-enabled')){action_button.click();}},};n.address={init:function(options){if(typeof options==='undefined'){options={'addressURL':document.URL};}
n.address.url=options.addressURL||document.URL;n.address.mountBillingAddressId=options.mountBillingAddressId||'billing_address_group';n.address.mountBillingAddressNewFormId=options.mountBillingAddressNewFormId||'choice_billing_address_new';n.address.mountShippingAddressId=options.mountShippingAddressId||'shipping_address_group';n.address.mountShippingAddressNewFormId=options.mountShippingAddressNewFormId||'choice_shipping_address_new';n.address.initEvents();},initEvents:function(){showIsCompanyFields();$('.select_billing_address').on('change',function(){var selected_address=$(this).val();n.address.setUserAddress('billing',selected_address);n.basket.repaintBasket();});$('.select_shipping_address').on('change',function(){var selected_address=$(this).val();n.address.setUserAddress('shipping',selected_address);n.basket.repaintBasket();});$('#same_shipping_address').on('change',function(){n.address.setBillingIsShipping($(this).prop('checked'));n.basket.repaintBasket();});$('#overlay-checkout').on('click',function(){n.address.closeCustomerIDPopup();});$('.cancelled-popup-close').on('click',function(){n.address.closeCustomerIDPopup();});$('#customer-id-save').on('click',function(){n.address.saveCustomerID();});$("#billing_address_group .icon-edit").click(function(){n.utils.updateCollapseBlocks('address');});if($('.select_billing_address:checked').length>0||$('.select_billing_address').length==0){$('.billing-address-block .text-center .button').removeClass('disabled');}},saveAddresses:function(){var billing_address_ok=true;var shipping_address_ok=true;var same_shipping_address=$('#same_shipping_address').prop('checked');var callbackShippingNew=n.shipping.appendShippingAddressNewForm;var callbackBillingNew=n.shipping.appendBillingAddressNewForm;if(n.user_is_authenticated&&$('.select_billing_address').length)
{var next_step_allowed=false;if(same_shipping_address)
{next_step_allowed=($('.select_billing_address:checked').length>0)}
else
{next_step_allowed=(($('.select_billing_address:checked').length>0)&&($('.select_shipping_address:checked').length>0))}
if(!next_step_allowed)
{$('.billing-address-block .text-center .button-primary').addClass('disabled');return;}
address=$('.select_billing_address:input:checked').val();if(address!="new"){billing_address_ok=n.address.setUserAddress('billing',address,'button');}else{billing_address_ok=n.address.setUserAddressNew('billing',callbackBillingNew,callbackBillingNew);}
var shipping=$('.select_shipping_address:input:checked').val();if(shipping!="new"){shipping_address_ok=n.address.setUserAddress('shipping',shipping,'button');}else{shipping_address_ok=n.address.setUserAddressNew('shipping',callbackShippingNew,callbackShippingNew);}}
else{billing_address_ok=n.address.setUserAddressNew('billing',callbackBillingNew,callbackBillingNew);if(!same_shipping_address)
{shipping_address_ok=n.address.setUserAddressNew('shipping',callbackShippingNew,callbackShippingNew);}}
console.log('billing_address_ok: '+billing_address_ok+', shipping_address_ok: '+shipping_address_ok);if(billing_address_ok&&shipping_address_ok)
{n.utils.updateCollapseBlocks('address');checkoutEvent('checkout','2','Billing / Shipping address');sendEncodedDataFB('CompleteRegistration');}else{window.dataLayer=window.dataLayer||[];window.dataLayer.push({'event':'eventGA','eventGA':{'action':'Error','category':'Checkout Events','label':'Billing Error'},'errorBilling':true});}
n.shipping.reloadShippingMethod();},closeCustomerIDPopup:function(){$('#customer-id-popup').removeClass('show');$('#overlay-checkout').removeClass('show');},openCustomerIDPopup:function(){$('#overlay-checkout').addClass('show');$('#customer-id-popup').addClass('show');},saveCustomerID:function(){var customer_id=$('#id_vat_number_vatform').val().trim();var customer_country_code=$('#id_country_vat_validation_vatform').val().trim();if(customer_id&&customer_country_code){n.address.ajax.setCustomerId(customer_id,customer_country_code,n.address.submitPaymentAndCloseCustomerIDPopup,n.address.incorrectCustomerId);}},submitPaymentAndCloseCustomerIDPopup:function(){var selected_payment_method=$('[name=payment_method]:checked');if((selected_payment_method.length)&&(selected_payment_method.val()!="paypal_checkout")){n.payment.submitForm();}else{jQuery('.paypal-wrapper').removeClass("d-none");jQuery('#paypal-before-button').addClass("d-none");}
n.address.closeCustomerIDPopup();},incorrectCustomerId:function(data){var error_message=$('#customer-id-popup').find('.error-message');error_message.show();if(data)
{error_message.text(data);}},setUserAddress:function(address_type,address_id,button){var element_id="choice_"+address_type+"_address_new"
var element_address_new=document.getElementById(element_id);if(address_id==="new"){element_address_new.style.display="block";$('#'+n.address.mountBillingAddressId).find('.button').removeClass('disabled');}else{element_address_new.style.display="none";var same_shipping_address=document.getElementById('same_shipping_address');return n.address.ajax.setUserAddress(address_type,address_id,same_shipping_address.checked,button);}},setUserAddressNew:function(address_type,callback_success,callback_error){var address_form_data;var cb_success=callback_success;var cb_error=callback_error;if(address_type==='billing'){address_form_data=$('#'+n.address.mountBillingAddressNewFormId+' :input').serialize();if(!cb_success)
cb_success=n.address.appendBillingAddressNewForm;if(!cb_error)
cb_error=n.address.appendBillingAddressNewForm;}else{address_form_data=$('#'+n.address.mountShippingAddressNewFormId+' :input').serialize();if(!cb_success)
cb_success=n.address.appendShippingAddressNewForm;if(!cb_error)
cb_error=n.address.appendShippingAddressNewForm;}
var same_shipping_address=document.getElementById('same_shipping_address');return n.address.ajax.setUserAddressNew(address_type,address_form_data,same_shipping_address.checked,cb_success,cb_error);},setBillingIsShipping:function(checked,callback_success,callback_error){var select_shipping_address=document.querySelector('input[name = select_shipping_address]:checked');if(select_shipping_address){select_shipping_address.checked=false;document.getElementById(n.address.mountShippingAddressNewFormId).style.display="none";}
var shipping_address_group=document.getElementById("shipping_address_group");if(checked){shipping_address_group.style.display="none";}else{shipping_address_group.style.display="block";}
var callback_success=n.address.appendShippingAddressNewForm;n.address.ajax.setBillingIsShipping(checked,callback_success,callback_error);},getUserAddressNewSelectedType:function(){var address_type;var same_shipping_address=document.getElementById('same_shipping_address');if(same_shipping_address.checked){address_type='billing';}else{address_type='shipping';}
if(n.address.isUserAddressNewFormSelectedByType(address_type))
return address_type;return null;},isUserAddressNewFormSelectedByType:function(address_type){var element_selected=document.querySelector('input[name = select_'+address_type+'_address]:checked');if(element_selected===null||element_selected.value==='new')
return true;return false;},appendUserAddressNewForm:function(element_id,data){$('#'+element_id).empty();$('#'+element_id).html(data);showIsCompanyFields();},appendBillingAddressNewForm:function(data,enabled){if(enabled){n.address.appendUserAddressNewForm("summary-billing",JSON.parse(data).html);n.is_company=JSON.parse(data).is_company;}else{n.address.appendUserAddressNewForm(n.address.mountBillingAddressNewFormId,data);}
var same_shipping_address=document.getElementById('same_shipping_address');if(same_shipping_address.checked&&enabled){}},appendShippingAddressNewForm:function(data,enabled){if(enabled){n.address.appendUserAddressNewForm("summary-shipping",data);}else{n.address.appendUserAddressNewForm(n.address.mountShippingAddressNewFormId,data);}},ajax:{setUserAddress:function(address_type,address_id,billing_is_shipping,button){var data={'type':address_type+'_address','data':{'address_id':address_id,'billing_is_shipping':billing_is_shipping,'button':button}};switch(address_type)
{case"billing":return n.address.ajax.request(data,n.address.appendBillingAddressNewForm);break;case"shipping":return n.address.ajax.request(data,n.address.appendShippingAddressNewForm);break;}},getUserAddressNewPayload:function(address_type,address_form_data,billing_is_shipping){return{'type':address_type+'_address_new','data':{'address_fields':address_form_data,'billing_is_shipping':billing_is_shipping}};},setUserAddressNew:function(address_type,address_form_data,billing_is_shipping,callback_success,callback_error){var data=n.address.ajax.getUserAddressNewPayload(address_type,address_form_data,billing_is_shipping);return n.address.ajax.request(data,callback_success,callback_error);},setBillingIsShipping:function(billing_is_shipping,callback_success,callback_error){var data={'type':'same_shipping_address','data':{'billing_is_shipping':billing_is_shipping}};n.address.ajax.request(data,callback_success,callback_error);},setCustomerId:function(value,customer_country_code,callback_success,callback_error){var data={'type':'customer_id','data':{'customer_id':value,'customer_country_code':customer_country_code}};n.address.ajax.request(data,callback_success,callback_error);},request:function(data,callback_success,callback_error,messages_id,messages_type){ok_address='';$.ajax({url:n.address.url,type:"POST",data:JSON.stringify(data),dataType:'html',async:false,success:function(dataSuccess){var type=JSON.parse(this.data).type;if(callback_success){callback_success(dataSuccess,true);}
ok_address=true;if(ok_address){$('.'+n.status.buttonNextStepAddres).removeClass('disabled');}else if(!$('.'+n.status.buttonNextStepAddres).hasClass('disabled')){$('.'+n.status.buttonNextStepAddres).addClass('disabled');}},error:function(dataError){console.log('KO address');var type=JSON.parse(this.data).type;ok_address=false;if(callback_error&&dataError){callback_error(dataError.responseText,false);}else if(n.reloadOnAjaxError===true){window.location.href=n.address.url;}}});return ok_address;},getUserAddressNewPromise:function(address_type,address_form_data,billing_is_shipping){var data=n.address.ajax.getUserAddressNewPayload(address_type,address_form_data,billing_is_shipping);return new Promise(function(resolve,reject){$.ajax({url:n.address.url,type:"POST",data:JSON.stringify(data),dataType:'html',success:function(data){resolve(data);},error:function(data){reject(data);}});});},setBillingAndShippingAddressNew:function(billing_form_data,shipping_form_data,cb_billing_success,cb_billing_error,cb_shipping_success,cb_shipping_error){var billingPromise=n.address.ajax.getUserAddressNewPromise('billing',billing_form_data,false);var shippingPromise=n.address.ajax.getUserAddressNewPromise('shipping',shipping_form_data,false);Promise.all([billingPromise.catch(function(data){if(cb_billing_error&&data){cb_billing_error(data.responseText,false);}}),shippingPromise.catch(function(data){if(cb_shipping_error&&data){cb_shipping_error(data.responseText,false);}}),]).then(function(datas){if(datas[0]&&datas[1]){cb_billing_success(datas[0],true);cb_shipping_success(datas[1],true);}else{if(datas[0])
cb_billing_success(datas[0],false);if(datas[1])
cb_shipping_success(datas[1],false);}});},},};n.shipping={init:function(options){if(typeof options==='undefined'){options={'shippingURL':document.URL};}
n.shipping.url=options.shippingURL||document.URL;n.shipping.mountShippingMethodId=options.mountShippingMethodId||'shipping_method_group';n.shipping.initEvents();n.shipping.nextStepEnabled=false;},initEvents:function(){var shippingBlockContainer=$('#'+n.shipping.mountShippingMethodId);shippingBlockContainer.on('change','.select_shipping_method',function(){n.shipping.setSelectedOption($(this).val(),null,$(this).data('delivery-code'));n.shipping.enableNextStep();});shippingBlockContainer.on('change','.select_shipping_option, .select_shipping_store',function(){var parentMethodId=$(this).data('parent-code');var parentSend=$(this).data('name');sessionStorage.setItem('shipping-info',parentSend);$('.shipping_method_block').find('input').prop('disabled',true);$('.shipping_method_block').find('li').addClass('disabled');n.shipping.setSelectedOption(parentMethodId,$(this).val(),$(this).data('delivery-code'));n.shipping.enableNextStep();});shippingBlockContainer.on('change','.select_shipping_delivery',function(){var parentMethodId=$(this).data('parent-code');$('.shipping_method_block').find('input').prop('disabled',true);$('.shipping_method_block').find('li').addClass('disabled');n.shipping.setSelectedOption(parentMethodId,$(this).val(),$(this).data('delivery-code'));n.shipping.enableNextStep();});$('#accordionShippingMethods > ul > li').on('click',function(e){if($(this).parents('#accordionShippingMethods').find('.sub-methods li').hasClass('in')){e.stopPropagation();}});shippingBlockContainer.on('blur',"#id_notes_shipping",function(){var comment=$(this).val();if(typeof comment!='undefined'){n.shipping.setShippingComment(comment);}});},enableNextStep:function(){},appendBillingAddressNewForm:function(data,enabled){n.address.appendBillingAddressNewForm(data,enabled);},appendShippingAddressNewForm:function(data,enabled){n.address.appendShippingAddressNewForm(data,enabled);},reloadShippingMethod:function(enabled){var data={}
var successCallback=n.shipping.processShippingMethodResponse;n.shipping.ajax.request(data,successCallback);n.shipping.enableNextStep();},isDeliveryAllowed:function(){var data_delivery_allowed=$('#'+n.shipping.mountShippingMethodId+' .shipping_methods_status').first().data('delivery-allowed');return(data_delivery_allowed==='True');},replaceBlockHtml:function(data){var shippingBlockContainer=$('#'+n.shipping.mountShippingMethodId);shippingBlockContainer.html(data.html);$('.shipping_method_block').removeClass('collapsed');},processShippingMethodResponse:function(data){n.shipping.replaceBlockHtml(data);if(n.shipping.isDeliveryAllowed()){}
n.basket.repaintBasket();},setSelectedOption:function(method_id,option_id,delivery_code){var data={'method_id':method_id,'option_id':option_id,'delivery_code':delivery_code};var successCallback=n.shipping.processShippingMethodResponse;n.shipping.enableNextStep();return n.shipping.ajax.request(data,successCallback);},getTextSelectedOption:function(){if(!n.shipping.isDeliveryAllowed)
{return;}
var id_shipping_method=$('.select_shipping_method:checked').prop('id');var text_shipping_method=$("label[for='"+id_shipping_method+"']").find('.shipping-method-title')[0].textContent.trim();var id_shipping_option=$('.select_shipping_option:checked').prop('id');var text_shipping_option=$("label[for='"+id_shipping_option+"']").find('.shipping-method-title')[0].textContent.trim();return text_shipping_method+' / '+text_shipping_option;},setShippingComment:function(comment_text){n.shipping.ajax.setShippingComment(comment_text);},ajax:{setShippingComment:function(comment_text){var data={'comment_text':comment_text,"type":"comment"};n.reloadOnAjaxError=false;n.shipping.ajax.request(data);},request:function(data,callback_success,callback_error,messages_id,messages_type){var type=data.type;if(typeof type==='undefined'){type='shipping_method'}
return $.ajax({url:n.shipping.url,type:"POST",data:JSON.stringify({'type':type,'data':data}),dataType:'json',success:function(data){if(data===undefined||data.status===200||data.status===204){if(!$('.shipping-method-title').length&&data.html.includes('shipping-method-title'))
{$('#shipping_method_group').html(data.html);n.utils.updateCollapseBlocks('shipping');}
if(callback_success){callback_success(data);$('#accordionShippingMethods > ul > input').click();}
if(messages_id){n.messages.showMessages(messages_id,messages_type,data.messages);}}else{console.log('KO shipping method');if(callback_error){callback_error(data);}else if(n.reloadOnAjaxError===true){window.location.href=n.address.url;}}},error:function(data){console.log('KO shipping method');if(callback_error){callback_error(data);}else if(n.reloadOnAjaxError===true){window.location.href=n.shipping.url;}
n.reloadOnAjaxError=true}});},},};n.payment={init:function(options){if(typeof options==='undefined'){options={'paymentURL':document.URL,'paymentOptions':{}};}
n.payment.url=options.paymentURL||document.URL;n.payment.mountPaymentMethodId=options.mountPaymentMethodId||'payment_details_group';n.payment.paymentFormId=options.paymentFormId||'onestepcheckout-form';n.payment.shopName=options.shopName||'Nilo';n.payment.thresholdBasketTotal=options.thresholdBasketTotal||3000;n.payment.store=options.store;n.payment.thankURL=options.thankyouURL;n.payment.thankIdealURL=options.thankyouIdealURL;n.payment.stripeCompletedURL=options.stripeCompletedURL;n.payment.basketId=options.basket_id;n.payment.basket_total_int=options.basket_total_int;n.payment.basket_total_float=parseFloat(options.basket_total_float);if(options.hasOwnProperty('paymentsOptions')&&options.paymentsOptions.hasOwnProperty('stripe')){if(options.paymentsOptions.stripe.enabled==='True'){n.payment.stripeClient=n.payment.initStripeClient(options.paymentsOptions.stripe.publicKey);if(options.paymentsOptions.stripe.cardEnabled==='True')
n.payment.stripeCard=n.payment.initStripeCard(n.payment.stripeClient);n.payment.stripeAppleGooglePayEnabled=(options.paymentsOptions.stripe.appleGooglePayEnabled==='True');if(options.paymentsOptions.stripe.IdealEnabled==='True')
n.payment.stripeIdealBank=n.payment.initStripeIdealBank(n.payment.stripeClient);}}
if(options.hasOwnProperty('paymentsOptions')&&options.paymentsOptions.hasOwnProperty('realex')){n.payment.realexEnabled=(options.paymentsOptions.realex.enabled==='True');n.payment.realexURL=options.paymentsOptions.realex.realexURL;n.payment.realexACSURL=options.paymentsOptions.realex.realexACSURL;}
if(options.hasOwnProperty('paymentsOptions')&&options.paymentsOptions.hasOwnProperty('paypal')){n.payment.paypalEnabled=(options.paymentsOptions.paypal.enabled==='True');n.payment.paypalPublicKey=options.paymentsOptions.paypal.publicKey;n.payment.paypalEnvironment=options.paymentsOptions.paypal.environment;}
if(options.hasOwnProperty('paymentsOptions')&&options.paymentsOptions.hasOwnProperty('amazon')){n.payment.amazonEnabled=(options.paymentsOptions.amazon.enabled==='True');n.payment.amazonClientId=options.paymentsOptions.amazon.clientId;n.payment.amazonSellerId=options.paymentsOptions.amazon.sellerId;}
if(options.hasOwnProperty('paymentsOptions')&&options.paymentsOptions.hasOwnProperty('sequra')){n.payment.sequraEnabled=(options.paymentsOptions.sequra.enabled==='True');n.payment.sequraMaxPayment=options.paymentsOptions.sequra.sequra_max_payment;n.payment.sequraURL=options.paymentsOptions.sequra.sequraURL;n.payment.sequraCheckURL=options.paymentsOptions.sequra.sequraCheckURL;n.payment.sequraCancelURL=options.paymentsOptions.sequra.sequraCancelURL;n.payment.sequraPartPaymentEnabled=(options.paymentsOptions.sequra.part_payment_enabled==='True');n.payment.sequraMinPartPayment=options.paymentsOptions.sequra.sequra_min_part_payment;n.payment.sequraPromoPaymentEnabled=(options.paymentsOptions.sequra.promo_payment_enabled==='True');n.payment.sequraMinPromoPayment=options.paymentsOptions.sequra.sequra_min_promo_payment;n.payment.sequraMaxPromoPayment=options.paymentsOptions.sequra.sequra_max_promo_payment;n.payment.sequraSplitThreeEnabled=(options.paymentsOptions.sequra.sequra_split_three_payment_enabled==='True');n.payment.sequraMinSplitThreePayment=options.paymentsOptions.sequra.sequra_min_split_three_payment;n.payment.sequraMaxSplitThreePayment=options.paymentsOptions.sequra.sequra_max_split_three_payment;n.payment.repaint_sequra_methods();}
if(options.hasOwnProperty('paymentsOptions')&&options.paymentsOptions.hasOwnProperty('oney')){n.payment.oneyEnabled=(options.paymentsOptions.oney.enabled==='True');n.payment.oney7daysEnabled=(options.paymentsOptions.oney['7days_enabled']==='True');n.payment.oneyURL=options.paymentsOptions.oney.oneyURL;n.payment.repaint_oney_methods();}
if(options.hasOwnProperty('paymentsOptions')&&options.paymentsOptions.hasOwnProperty('adyen')){var optionsAdyen=options.paymentsOptions.adyen;n.payment.adyenEnabled=(optionsAdyen.enabled==='True');if(optionsAdyen.enabled==='True'){n.payment.initAdyen();n.payment.adyenClientKey=optionsAdyen.clientKey;n.payment.adyenLanguage=optionsAdyen.language;if(options.language_code=='ca')
n.payment.adyenLanguage='es-es';else
n.payment.adyenLanguage=options.language_code+'-'+options.store_code;n.payment.adyenPlatform=optionsAdyen.platform;n.payment.adyenSupportedMethods=optionsAdyen.supportedMethods;n.payment.adyenGetPaymentMethodsURL=optionsAdyen.getPaymentMethodsURL;n.payment.adyenPaymentMethods=optionsAdyen.adyenPaymentMethods;n.payment.adyenMakePaymentURL=optionsAdyen.paymentsURL;n.payment.adyenCancelPaymentURL=optionsAdyen.paymentCancelURL;n.payment.adyenSubmitPaymentDetailsURL=optionsAdyen.paymentsDetailsURL;n.payment.initAdyenComponents();n.payment.adyenTpvEnabled=(optionsAdyen.adyenTpvEnabled==='True');n.payment.adyenTpvAvailable=(optionsAdyen.adyenTpvAvailable==='True');if(n.payment.adyenTpvAvailable){n.payment.adyenTpvTerminals=optionsAdyen.adyenTpvTerminals;n.payment.adyenTpvMakePaymentURL=optionsAdyen.adyenTpvPaymentsURL;}}}
n.payment.initButtonMethods();n.payment.initEvents();},initEvents:function(){$('.select_payment_method').on('change',function(){if(n.payment.adyen_order_number){n.payment.cancelAdyenOrder('payment method changed');}
var method_id=$(this).val();n.payment.setPaymentMethod(method_id);if((method_id=="adyen_tpv")&&($('.select_adyen_method').length==1))
{$('.select_adyen_method').prop('checked',true);n.status.setPaymentMethod();}});$('.select_oney_method').on('change',function(){n.status.setPaymentMethod();var input_parent=$('input[name=payment_method][value=oney]');if($(this)[0].checked&&!input_parent.prop('checked',true))
{input_parent.prop('checked',true);}});$('.select_adyen_method').on('change',function(){n.status.setPaymentMethod();var input_parent=$('input[name=payment_method][value=adyen_tpv]');if($(this)[0].checked&&!input_parent.prop('checked',true))
{input_parent.prop('checked',true);}});$('#'+n.payment.paymentFormId).on('submit',function(e){e.preventDefault();var total_element=$('#shippingModule');if(total_element){var order_total=parseFloat($(total_element).data('order-total').toString().replace(/,/g,'.'));if(n.payment.requireCustomerVat()&&order_total>=n.payment.thresholdBasketTotal&&!n.payment.hasCustomerVat()){n.address.openCustomerIDPopup();}else{n.payment.submitForm();}}else{console.log("KO total-price");}});},initButtonMethods:function(){if(n.payment.paypalEnabled&&n.payment.paypalEnabled===true){var button_element=document.getElementById('paypal-button');if(button_element)button_element.innerHTML='';var total_element=$('#shippingModule');if(total_element){var order_total=$(total_element).data('order-total').toString().replace(/,/g,'.');var currency=$('#totalPriceBox').data('order-currency');n.payment.initPaypal(n.payment.paypalPublicKey,currency,n.payment.shopName,order_total);}}
if(n.payment.stripeAppleGooglePayEnabled&&n.payment.stripeAppleGooglePayEnabled===true){var total_element=$('#shippingModule');if(total_element){var order_total=parseFloat($(total_element).data('order-total'))*100;var currency=$('#totalPriceBox').data('order-currency').toLowerCase();n.payment.initStripeAppleGooglePay(n.payment.stripeClient,n.payment.store.toUpperCase(),currency,order_total);}}
if(n.payment.amazonEnabled&&n.payment.amazonEnabled===true){n.payment.initAmazonPay(n.payment.amazonClientId,n.payment.amazonSellerId);}},hasCustomerVat:function(){var data_has_customer_vat=$('#'+n.shipping.mountShippingMethodId+' .shipping_methods_status').first().data('has-customer-vat');return(data_has_customer_vat==='True');},requireCustomerVat:function(){var data_use_customer_vat_required=$('#'+n.shipping.mountShippingMethodId+' .shipping_methods_status').first().data('require-customer-vat');return(data_use_customer_vat_required==='True');},sendSubmit:function(sending){var submitButton=$('#checkout_submit');var loadingText=submitButton.data('loading-text');var originalText=submitButton.data('original-text');submitButton.prop("disabled",sending);if(sending)
{$('.select_payment_method').attr('disabled','disabled');submitButton.addClass('disabled');submitButton.html(loadingText);}
else
{$('.select_payment_method').removeAttr('disabled');submitButton.removeClass('disabled');submitButton.html(originalText);}},submitForm:function(){var enabled=n.status.checkValidSubmit();if(!enabled)
return enabled;n.payment.sendSubmit(true);var select_payment_method=document.querySelector('input[name = payment_method]:checked');if(select_payment_method){var method_code=select_payment_method.value;if(method_code){if(method_code==='stripe_card'){n.payment.createStripePayment(method_code);}else if(method_code==='realex_card'){n.payment.createRealexPayment(method_code);}else if(['stripe_ideal','stripe_sofort','stripe_giropay'].indexOf(method_code)!=-1){n.payment.createIdealSofortGiropayPayment(n.payment.stripeClient,method_code.split('_')[1]);}else if(method_code.includes("sequra")){if(method_code.includes("sequra_campaign")){var campaign=$("#"+select_payment_method.id).data('description');var campaign_label=$("label[for='"+select_payment_method.id+"']");var campaign_name='';if(campaign_label.length>0){campaign_name=campaign_label[0].innerHTML;}
n.payment.createSequraPayment(method_code,campaign,campaign_name);}else{n.payment.createSequraPayment(method_code,"","");}}else if(method_code.includes('oney')){n.payment.createOneyOrder(method_code);}else if(method_code.includes('adyen')){document.getElementById('adyen-errors').textContent='';document.getElementById('adyen-errors').classList.remove('d-block');n.payment.createAdyenOrder(method_code);}else{var form=document.getElementById(n.payment.paymentFormId);sendEncodedDataFB('AddPaymentInfo');form.submit();}}
else{n.messages.error("Not have payment method");}}},initStripeClient:function(publicKey){return Stripe(publicKey);},initStripeCard:function(stripeClient){var style={base:{color:'#32325d',lineHeight:'18px',fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:'antialiased',fontSize:'16px','::placeholder':{color:'#aab7c4'}},invalid:{color:'#fa755a',iconColor:'#fa755a'}};var elements=stripeClient.elements();var card=elements.create('card',{hidePostalCode:true,style:style});card.mount('#card-element');card.addEventListener('change',function(event){var displayError=document.getElementById('card-errors');if(event.error){sendEventErrorPayment('Card');displayError.textContent=event.error.message;}else{displayError.textContent='';}
n.status.setPaymentMethod();});return card;},initStripeAppleGooglePay:function(stripeClient,country_code,currency,amount){var paymentRequest=stripeClient.paymentRequest({country:country_code,currency:currency,total:{label:n.payment.shopName,amount:amount,},requestPayerName:true,requestPayerEmail:true,});var elements=stripeClient.elements();var paymentButton=elements.create('paymentRequestButton',{paymentRequest:paymentRequest,style:{paymentRequestButton:{type:'buy',theme:'dark',height:'40px',},}});paymentRequest.canMakePayment().then(function(result){if(result){paymentButton.mount('#payment-request-button');}});paymentRequest.on('token',function(ev){n.payment.submitStripeToken(ev.token,true);ev.complete('success');});return paymentButton;},initStripeIdealBank:function(stripeClient){var elements=stripeClient.elements();var style={base:{padding:'10px 12px',color:'#32325d',fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',fontSmoothing:'antialiased',fontSize:'16px','::placeholder':{color:'#aab7c4'},},invalid:{color:'#fa755a',}};var idealBank=elements.create('idealBank',{style:style});idealBank.mount('#ideal-bank-element');var errorMessage=document.getElementById('error-message');n.payment.ElementIdealBank=idealBank;},stripeSourceHandler:function(source){document.location.href=source.redirect.url;},createStripeToken:function(){n.payment.stripeClient.createToken(n.payment.stripeCard).then(function(result){if(result.error){var errorElement=document.getElementById('card-errors');errorElement.textContent=result.error.message;sendEventErrorPayment('Card');}else{n.payment.submitStripeToken(result.token);}});},stripeShowError:function(id_div_error,message_error){var errorElement=document.getElementById(id_div_error);if(errorElement)
{errorElement.textContent=message_error;}
n.payment.sendSubmit(false);},stripeManageResultCreateSource:function(result,data,payment_type){try
{if(result.error)
{sendEventErrorPayment(payment_type);n.payment.stripeShowError(payment_type+'-errors',result.error.message);}
else
{$.ajax({url:n.payment.url,type:"POST",data:JSON.stringify({'type':payment_type,'data':data}),dataType:'json',success:function(data){n.payment.stripeSourceHandler(result.source);},error:function(data){sendEventErrorPayment(payment_type);n.payment.stripeShowError(payment_type+'-errors',data.responseJSON.responseText);}});}}
catch(error){sendEventErrorPayment(payment_type);console.error('ERROR :'+error);}},createIdealSofortGiropayPayment:function(stripeClient,payment_type){var name='';if(jQuery('#id_first_name_billing').val()){name=jQuery('#id_first_name_billing').val()+' '+jQuery('#id_last_name_billing').val();}else{name=jQuery('.select_billing_address:checked +label').text();}
var amount=parseInt(jQuery('#shippingModule').attr('data-order-total').replace(',',''));var currency=jQuery('#totalPriceBox').attr('data-order-currency');var data={'type':payment_type,'data':{'payment_method':'stripe_'+payment_type,'currency':currency,'amount':amount,'terms_and_conditions_accepted':$('#'+n.conditions.termsAndConditionsId).prop('checked'),'privacy_policy_accepted':$('#'+n.conditions.privatePolicyId).prop('checked'),}};switch(payment_type)
{case'ideal':var sourceData={type:payment_type,amount:amount,currency:currency,statement_descriptor:n.payment.basketId,owner:{name:name},ideal:{statement_descriptor:'Bestelling'},redirect:{return_url:n.payment.thankIdealURL,},};stripeClient.createSource(n.payment.ElementIdealBank,sourceData).then(function(result){n.payment.stripeManageResultCreateSource(result,data,payment_type);});break;case'sofort':var sourceData={type:payment_type,amount:amount,currency:'eur',statement_descriptor:n.payment.basketId,redirect:{return_url:n.payment.thankIdealURL,},sofort:{country:n.payment.store,},};stripeClient.createSource(sourceData).then(function(result){n.payment.stripeManageResultCreateSource(result,data,payment_type);});break;case'giropay':var sourceData={type:payment_type,amount:amount,currency:'eur',owner:{name:name,},statement_descriptor:n.payment.basketId,redirect:{return_url:n.payment.thankIdealURL,},};stripeClient.createSource(sourceData).then(function(result){n.payment.stripeManageResultCreateSource(result,data,payment_type);});break;}},stripeReferenceHandler:function(order_number,result_stripe){$.ajax({url:n.payment.stripeCompletedURL,type:"POST",data:JSON.stringify({'type':'stripe_completed','result':result_stripe,'order_number':order_number}),dataType:'json',}).then(function(result){if(result['error']){window.location=location;}else{window.location.href=nilo.payment.thankURL}});},createStripePayment:function(method_code){var total_element=$('#shippingModule');if(total_element)
{$.ajax({url:n.payment.url,type:"POST",data:JSON.stringify({'type':'stripe_secret','data':{'payment_method':method_code,'terms_and_conditions_accepted':$('#'+n.conditions.termsAndConditionsId).prop('checked'),'privacy_policy_accepted':$('#'+n.conditions.privatePolicyId).prop('checked'),}}),dataType:'json',success:function(data){client_secret=data.client_secret;order_number=data.order_number;nilo.payment.stripeClient.confirmCardPayment(client_secret,{payment_method:{card:nilo.payment.stripeCard}}).then(function(result){if(result.error){sendEventErrorPayment('Card');var errorElement=document.getElementById('card-errors');errorElement.textContent=result.error.message;}else{}
n.payment.stripeReferenceHandler(order_number,result);});},error:function(data){sendEventErrorPayment('Card');var errorElement=document.getElementById('card-errors');errorElement.textContent=data.responseJSON.msg}});}},submitStripeToken:function(token,isAppleOrGooglePay){if(typeof isAppleOrGooglePay==='undefined'){isAppleOrGooglePay=false;}
var form=document.getElementById(n.payment.paymentFormId);var hiddenInput=document.createElement('input');hiddenInput.setAttribute('type','hidden');hiddenInput.setAttribute('name','gateway');hiddenInput.setAttribute('value','stripe');form.appendChild(hiddenInput);hiddenInput=document.createElement('input');hiddenInput.setAttribute('type','hidden');hiddenInput.setAttribute('name','token');hiddenInput.setAttribute('value',token.id);form.appendChild(hiddenInput);var hiddenCheck=document.createElement('input');hiddenCheck.setAttribute('type','hidden');hiddenCheck.setAttribute('name','isAppleGooglePay');hiddenCheck.setAttribute('value',isAppleOrGooglePay);form.appendChild(hiddenCheck);form.submit();},receiveRealexMessage:function(event){if(!RealexHpp._internal.isMessageFromHpp(event.origin,n.payment.realexURL)){return;}else{}
try
{json_data=JSON.parse(event.data);}
catch(e)
{if(typeof(event.data)=="string")
{var displayError=document.getElementById('realex-errors');displayError.innerHTML=event.data;sendEventErrorPayment('Realex');$("[id^=rxp-frame-close-]").click();}}},createRealexPayment:function(method_code){$.ajax({url:n.payment.url,type:"POST",data:JSON.stringify({'type':'json_realex','data':{'payment_method':method_code,'terms_and_conditions_accepted':$('#'+n.conditions.termsAndConditionsId).prop('checked'),'privacy_policy_accepted':$('#'+n.conditions.privatePolicyId).prop('checked'),'gateway':'realex','realex_order_number':n.payment.realex_order_number}}),dataType:'json',success:function(jsonFromServerSdk){n.payment.realexRequestJson=jsonFromServerSdk;RealexHpp.setHppUrl(n.payment.realexURL);RealexHpp.setRandomId(n.payment.realex_order_number);RealexHpp.lightbox.init('payButtonId',n.payment.realexACSURL,jsonFromServerSdk);if(window.addEventListener){window.addEventListener('message',n.payment.receiveRealexMessage,false);}else{window.attachEvent('message',n.payment.receiveRealexMessage);}
document.getElementById('payButtonId').click();n.payment.sendSubmit(false);if(jsonFromServerSdk.ORDER_ID)
{n.payment.realex_order_number=jsonFromServerSdk.ORDER_ID;console.log('realex_order_number: '+n.payment.realex_order_number);}},error:function(data){sendEventErrorPayment('Realex');n.payment.sendSubmit(false);try
{var errorElement=document.getElementById('realex-errors');var errorMessage=''
if(data.responseJSON!==undefined)
{errorMessage=data.responseJSON.responseText;}
else
{if(data.responseText!==undefined)
{errorMessage=data.responseText;}}
errorElement.textContent=errorMessage;}
catch(error)
{console.error('ERROR createRealexPayment:'+error);}}});},submitRealexData:function(formHpp){n.payment.sendSubmit(true);$.ajax({url:n.payment.url,type:"POST",data:JSON.stringify({'type':'realex','data':{'payment_method':'realex_card','terms_and_conditions_accepted':$('#'+n.conditions.termsAndConditionsId).prop('checked'),'privacy_policy_accepted':$('#'+n.conditions.privatePolicyId).prop('checked'),'gateway':'realex','realex_order_number':n.payment.realex_order_number}}),dataType:'json',success:function(jsonFromServerSdk){formHpp.submit();},error:function(data){n.payment.sendSubmit(false);$("[id^=rxp-frame-close-]").click();sendEventErrorPayment('Card');try
{var errorElement=document.getElementById('realex-errors');var errorMessage=''
if(data.responseJSON!==undefined)
{errorMessage=data.responseJSON.responseText;}
else
{if(data.responseText!==undefined)
{errorMessage=data.responseText;}}
errorElement.textContent=errorMessage;}
catch(error)
{console.error('ERROR submitRealexData:'+error);}}});},initPaypal:function(token,currency,label,amount){paypal.Button.render({braintree:braintree,client:{production:token,sandbox:token},env:n.payment.paypalEnvironment,label:'checkout',style:{size:'medium',color:'white',shape:'rect',label:'paypal',tagline:false,funding:'disallowed',fundingicons:false},commit:true,payment:function(data,actions){return actions.braintree.create({flow:'checkout',amount:amount,currency:currency,displayName:label,});},onAuthorize:function(payload){n.payment.submitPaypalToken(payload);},},'#paypal-button');},submitPaypalToken:function(payload){var form=document.getElementById(n.payment.paymentFormId);var hiddenInput=document.createElement('input');hiddenInput.setAttribute('type','hidden');hiddenInput.setAttribute('name','gateway');hiddenInput.setAttribute('value','paypal');form.appendChild(hiddenInput);hiddenInput=document.createElement('input');hiddenInput.setAttribute('type','hidden');hiddenInput.setAttribute('name','token');hiddenInput.setAttribute('value',payload.nonce);form.appendChild(hiddenInput);form.submit();jQuery('.paypal-wrapper').addClass('cancel-button');jQuery('#paypal-before-button').addClass('cancel-button');},initAmazonPay:function(client_id,seller_id){window.onAmazonLoginReady=function(){amazon.Login.setClientId(client_id);};window.onAmazonPaymentsReady=function(){n.payment.showAmazonPayButton(seller_id);};},showAmazonPayButton:function(seller_id){var authRequest;OffAmazonPayments.Button("amazon-pay-button",seller_id,{type:"PwA",color:"Gold",size:"medium",authorization:function(){loginOptions={scope:"profile payments:widget",popup:true};authRequest=amazon.Login.authorize(loginOptions,function(t){console.log(t.access_token);console.log(t.expires_in);console.log(t.token_type);bind_amazon_pay_wallet(merchant_id);});},onError:function(error){alert("onAuthRequest: "+error.getErrorCode()+' - '+error.getErrorMessage());}});},bindAmazonPayWallet:function(seller_id){var orderReferenceId=null;walletWidget=new OffAmazonPayments.Widgets.Wallet({sellerId:seller_id,onOrderReferenceCreate:function(orderReference){orderReferenceId=orderReference.getAmazonOrderReferenceId();console.log('OrderReferenceId: '+orderReferenceId);},design:{designMode:'responsive'},onPaymentSelect:function(orderReference){console.log('onPaymentSelect: '+orderReference);},onError:function(error){console.log('onPaymentSelect: '+error.getErrorCode()+': '+error.getErrorMessage());}});walletWidget.bind("amazon-pay-wallet-widget");},createSequraPayment:function(method_code,campaign,campaign_name){$.ajax({url:n.payment.url,type:"POST",data:JSON.stringify({'type':'sequra','payment_method':method_code,'sequra_type':method_code,'data':{'terms_and_conditions_accepted':$('#'+n.conditions.termsAndConditionsId).prop('checked'),'privacy_policy_accepted':$('#'+n.conditions.privatePolicyId).prop('checked'),}}),dataType:'json',success:function(data){switch(method_code)
{case'sequra_pay':identification_type="i1";break;case'sequra_split_three_payment':identification_type="sp1";break;case'sequra_part_payment':identification_type="pp3";break;case'sequra_promo_payment':identification_type="pp6";break;case'sequra_campaign':identification_type="pp5";break;}
n.payment.init_sequra_payment_method(data.order_number,identification_type,campaign,campaign_name);},error:function(data){sendEventErrorPayment('Sequra');try
{var errorElement=document.getElementById('sequra-errors');var errorMessage=''
if(data.responseJSON!==undefined)
{errorMessage=data.responseJSON.responseText;}
errorElement.textContent=errorMessage;nilo.payment.sendSubmit(false);}
catch(error)
{console.error('ERROR createSequraPayment:'+error);}}});},init_sequra_payment_method:function(order_number,method,campaign,campaign_name){data={"sequra_method":method,"order_number":order_number}
if(['pp3','pp6','sp1'].includes(method)){window.SequraFormElement='sq-identification-'+method;}else if(method=="pp5"){window.SequraFormElement='sq-identification-pp5';data['campaign']=campaign;data['campaign_name']=campaign_name;}else{window.SequraFormElement='sq-identification-i1';}
$.ajax({url:n.payment.sequraURL,type:"POST",data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(result){if(result.data!=null){iframe=$.parseHTML(result.data,document,true);$("#sequra_payment").append(iframe);console.log('window.SequraFormInstance: ');console.log(window.SequraFormInstance);counter=1;intervalId=setInterval(function(){console.log(counter+': ');console.log(window.SequraFormInstance)
if(window.SequraFormInstance||counter==10){clearInterval(intervalId);intervalId=null;counter=1;if(window.SequraFormInstance)
{window.SequraFormInstance.setCloseCallback(n.payment.check_sequra_order_status);window.SequraFormInstance.show();}
else
{n.payment.check_sequra_order_status();}}
else{console.log('counter: '+counter);counter=counter+1;console.log(window.SequraFormInstance);}},500);}
if(result.order_number)
{n.payment.sequra_order_number=result.order_number;console.log('sequra_order_number: '+result.order_number);}},error:function(result){console.log(result);try
{n.payment.sendSubmit(false);alert(result.responseJSON.msg);}
catch(error)
{alert('Error');console.error(error);}}});},check_sequra_order_status:function(event){if(!n.payment.sequra_order_number)
return;$.ajax({url:n.payment.sequraCheckURL,type:"POST",data:JSON.stringify({'order_number':n.payment.sequra_order_number}),dataType:'json',contentType:'application/json',success:function(result){if(event!="delete_sequra"){n.payment.sendSubmit(true);$("#sequra_payment iframe").remove();n.payment.sequra_order_number=undefined;document.location.href=n.payment.thankURL;}else{n.payment.cancel_sequra_order_status(true);}},error:function(result){$("#sequra_payment iframe").remove();n.payment.sendSubmit(false);n.payment.cancel_sequra_order_status(false);}});},cancel_sequra_order_status:function(sequra_delete){$.ajax({url:n.payment.sequraCancelURL,type:"POST",dataType:'json',data:JSON.stringify({"sequra_delete":sequra_delete,"order_number":n.payment.sequra_order_number}),contentType:'application/json',success:function(result){n.payment.sequra_order_number=undefined;},error:function(result){n.payment.sequra_order_number=undefined;}});},repaint_sequra_methods:function(){if(!n.payment.sequraEnabled)
return;var total_amount=n.payment.basket_total_float;var sequra_pay_li=jQuery("#payment_method_sequra_pay").parent('li');var sequra_max_payment=parseInt(n.payment.sequraMaxPayment);if(total_amount>sequra_max_payment)
{sequra_pay_li.hide()}else{sequra_pay_li.show()}
var sequra_part_payment_li=jQuery("#payment_method_sequra_part_payment").parent('li');var sequra_min_part_payment=parseInt(n.payment.sequraMinPartPayment);if(total_amount<sequra_min_part_payment)
{sequra_part_payment_li.hide();}else
{sequra_part_payment_li.show()}
var sequra_promo_payment_li=jQuery("#payment_method_sequra_promo_payment").parent('li');var sequra_min_promo_payment=parseInt(n.payment.sequraMinPromoPayment);var sequra_max_promo_payment=parseInt(n.payment.sequraMaxPromoPayment);if(total_amount<sequra_min_promo_payment||total_amount>sequra_max_promo_payment)
{sequra_promo_payment_li.hide();}else{sequra_promo_payment_li.show();}
var sequra_split_three_payment_li=jQuery("#payment_method_sequra_split_three_payment").parent('li');var sequra_min_split_three_payment=parseInt(n.payment.sequraMinSplitThreePayment);var sequra_max_split_three_payment=parseInt(n.payment.sequraMaxSplitThreePayment);if(total_amount<sequra_min_split_three_payment||total_amount>sequra_max_split_three_payment){sequra_split_three_payment_li.hide();}else{sequra_split_three_payment_li.show();}
jQuery("[name=payment_method]").each(function(e){var element=jQuery("[name=payment_method]")[e];if(element.id.includes('payment_method_sequra_campaign'))
{var hidden=false;var min_payment=$('#'+element.id).data('min_payment');if(min_payment)
min_payment=parseInt(min_payment.replace(',','.'));var max_payment=$('#'+element.id).data('max_payment');if(max_payment)
max_payment=parseInt(max_payment.replace(',','.'));if(min_payment&&(total_amount<min_payment))
{hidden=true;}
if(max_payment&&(total_amount>max_payment))
{hidden=true;}
$('#'+element.id).parent('li').prop('hidden',hidden);}})},check_valid_oney_method:function(min_payment,max_payment,total_amount){var hidden=false;if(min_payment&&(total_amount<min_payment))
{hidden=true;}
if(max_payment&&(total_amount>max_payment))
{hidden=true;}
if(n.user_is_authenticated&&$('.select_billing_address').length)
{var id_billing_country=$('.select_billing_address:checked').val();if(id_billing_country=="new")
{var code_billing_country=$('#id_country_billing').val();}
else
{var code_billing_country=$('#select_billing_country_'+id_billing_country).val();}
if(n.payment.store.toUpperCase()!=code_billing_country)
hidden=true;if(!$('#same_shipping_address').prop('checked'))
{var id_shipping_country=$('.select_shipping_address:checked').val();if(id_shipping_country=="new")
{var code_shipping_country=$('#id_country_shipping').val();}
else
{var code_shipping_country=$('#select_shipping_country_'+id_shipping_country).val();}
if(n.payment.store.toUpperCase()!=code_shipping_country)
hidden=true;}}
else
{var code_billing_country=$('#id_country_billing').val();if(n.payment.store.toUpperCase()!=code_billing_country)
hidden=true;}
return hidden;},repaint_oney_methods:function(){if(!n.payment.oneyEnabled)
return;document.getElementById('oney-errors').textContent='';var select_payment_method=document.querySelector('input[name = payment_method]:checked');var total_amount=n.payment.basket_total_int;jQuery("[name=payment_method]").each(function(e){var element=jQuery("[name=payment_method]")[e];if(element.id.includes('payment_method_oney'))
{var hidden=false;if(n.is_company)
{hidden=true;}
else
{if(element.value=='oney')
{var num_available_modalities=0;jQuery("[name=oney_method]").each(function(index){var hidden=false;var subelement=jQuery("[name=oney_method]")[index];var min_payment=$('#'+subelement.id).data('min_payment');if(min_payment)
min_payment=parseInt(min_payment.toString().replace(/,/g,'.')*100)
var max_payment=$('#'+subelement.id).data('max_payment');if(max_payment)
max_payment=parseInt(max_payment.toString().replace(/,/g,'.')*100)
hidden=n.payment.check_valid_oney_method(min_payment,max_payment,total_amount);if(!hidden)
{num_available_modalities++;}
else
{$('#'+subelement.id).prop('checked',false)}
$('#'+subelement.id).parent('li').prop('hidden',hidden);});if(!num_available_modalities)
{$('#'+element.id).parents('#accordionOneyMethods').hide();$("#oney_modalities").hide();if(select_payment_method&&(select_payment_method.value=='oney'))
{select_payment_method.checked=false;$('.select_oney_method').prop('checked',false);}}
else
{$('#'+element.id).parents('#accordionOneyMethods').show();}}
else
{var min_payment=$('#'+element.id).data('min_payment');var max_payment=$('#'+element.id).data('max_payment');if(min_payment)
min_payment=parseInt(min_payment.toString().replace(/,/g,'.')*100);if(max_payment)
max_payment=parseInt(max_payment.toString().replace(/,/g,'.')*100);hidden=n.payment.check_valid_oney_method(min_payment,max_payment,total_amount);$('#'+element.id).parent('li').prop('hidden',hidden);}}}})},createOneyOrder:function(method_code){$.ajax({url:n.payment.url,type:"POST",data:JSON.stringify({'type':method_code,'data':{'payment_method':method_code,'terms_and_conditions_accepted':$('#'+n.conditions.termsAndConditionsId).prop('checked'),'privacy_policy_accepted':$('#'+n.conditions.privatePolicyId).prop('checked'),'method_code':method_code}}),dataType:'json',success:function(data){n.payment.init_oney_payment_request(data.order_number,method_code);},error:function(data){sendEventErrorPayment('Oney');try
{var errorElement=document.getElementById('oney-errors');var errorMessage=''
if(data.responseJSON!==undefined)
{errorElement.innerHTML=data.responseJSON.responseText;}
else
{if(data.responseText!==undefined)
{errorElement.textContent=data.responseText;}}
nilo.payment.sendSubmit(false);}
catch(error)
{console.error('ERROR createOneyPayment:'+error);}}});},init_oney_payment_request:function(order_number,method_code){if(method_code=="oney")
{var element=$('[name=oney_method]:checked');}
if(method_code=="oney_7days")
{var element=$('[name=payment_method][value=oney_7days]');}
data={"order_number":order_number,"business_transaction_code":element.data('business_transaction_code')}
$.ajax({url:n.payment.oneyURL,type:"POST",data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(result){if(result.returned_url)
{window.location=result.returned_url;}
else
{n.payment.sendSubmit(false);}},error:function(data){try
{sendEventErrorPayment('Oney');var errorElement=document.getElementById('oney-errors');var errorMessage=''
if(data.responseJSON!==undefined)
{if(data.responseJSON.hasOwnProperty('msg'))
{errorElement.innerHTML=data.responseJSON.msg;}}
else
{if(data.responseText!==undefined)
{errorElement.textContent=data.responseText;}}
nilo.payment.sendSubmit(false);}
catch(error)
{console.error('ERROR createOneyPayment:'+error);}}});},reloadAdyenMethods:function(payment_method){var total_amount=n.payment.basket_total_int;var amount=parseInt(jQuery('#shippingModule').attr('data-order-total').replace(',',''));var currency=jQuery('#totalPriceBox').attr('data-order-currency');$.ajax({url:n.payment.adyenGetPaymentMethodsURL+amount+'/'+currency+'/',type:"GET",dataType:'json',success:function(data){n.payment.adyenPaymentMethods=data;n.payment.checkout_adyen=new AdyenCheckout(n.payment.adyenConfiguration());if(payment_method&&payment_method.includes("adyen")&&(payment_method!="adyen_tpv"))
{n.payment.initAdyenComponent(payment_method.replace('adyen_',''));}},error:function(data){console.log(data);}});},handleAdyenErrorResponses:function(data){var id_div_error='adyen-errors';var errorMessage=''
var max_length_msg=500;n.payment.adyen_order_number=undefined;sendEventErrorPayment('Adyen');try
{var errorElement=document.getElementById(id_div_error);if(data.responseJSON!==undefined)
{if(data.responseJSON.hasOwnProperty('msg'))
{errorMessage=data.responseJSON.msg;}
else
{errorMessage=data.responseJSON.responseText;}}
else
{if(data.responseText!==undefined)
{errorMessage=data.responseText;}}
errorElement.innerHTML=errorMessage.substring(0,max_length_msg);errorElement.classList.add('d-block');n.payment.sendSubmit(false);}
catch(error)
{console.error('ERROR handleAdyenErrorResponses:'+error);}},createAdyenOrder:function(method_code){if(method_code!="adyen_tpv")
{var adyenComponent=n.payment.adyenComponents[method_code];if(!adyenComponent.isValid)
return;}
var terminal_id=$('[name=adyen_terminal]:checked').val();$.ajax({url:n.payment.url,type:"POST",data:JSON.stringify({'type':method_code,'data':{'newsletter_subscription':$('#'+n.conditions.newsletterSubscriptionId).prop('checked'),'terms_and_conditions_accepted':$('#'+n.conditions.termsAndConditionsId).prop('checked'),'privacy_policy_accepted':$('#'+n.conditions.privatePolicyId).prop('checked'),'method_code':method_code,'terminal_id':terminal_id,'terminal_display_label':$('[name=adyen_terminal]:checked').data('display_label')}}),dataType:'json',success:function(data){n.payment.adyen_order_number=data.adyen_order_number;if(method_code!="adyen_tpv")
{adyenComponent.submit();}
else
{n.payment.init_adyen_tpv_payment_request(data.adyen_order_number,method_code);}},error:function(data){sendEventErrorPayment('Adyen');n.payment.handleAdyenErrorResponses(data);}});},init_adyen_tpv_payment_request:function(adyen_order_number,method_code){var terminal_id=$('[name=adyen_terminal]:checked').val();data={"adyen_order_number":adyen_order_number,"terminal_id":terminal_id}
$.ajax({url:n.payment.adyenTpvMakePaymentURL,type:"POST",data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(result){window.location=n.payment.thankURL;},error:function(data){n.payment.handleAdyenErrorResponses(data);}});},cancelAdyenOrder:function(message){$.ajax({url:n.payment.adyenCancelPaymentURL,type:"POST",dataType:'json',async:false,data:JSON.stringify({"adyen_order_number":n.payment.adyen_order_number,"message":message}),contentType:'application/json',success:function(result){n.payment.adyen_order_number=undefined;n.payment.sendSubmit(false);},error:function(result){n.payment.handleAdyenErrorResponses(result);}});},structureAdyenPaymentRequest:function(data){const paymentRequest={paymentMethod:data.paymentMethod};if(data.paymentMethod.type==="scheme"){paymentRequest['billingAddress']=data.billingAddress;paymentRequest['browserInfo']=data.browserInfo;}
return paymentRequest;},getAdyenNiloMethodCode:function(paymentMethodType){var nilo_method_code='adyen_'+paymentMethodType;if(paymentMethodType=="scheme")
{nilo_method_code='adyen_card';}
return nilo_method_code;},handleAdyenOnChange:function(state,component){n.status.setPaymentMethod();},handleAdyenOnSubmit:function(state,component){if(state.isValid){n.payment.handleAdyenSubmission(state,component,n.payment.adyenMakePaymentURL);}},handleAdyenOnAdditionalDetails:function(state,component){n.payment.handleAdyenSubmission(state,component,n.payment.adyenSubmitPaymentDetailsURL);},handleAdyenOnError:function(error){console.log(error);},handleAdyenSubmission:function(state,component,url){data={"state_data":state.data,"adyen_order_number":n.payment.adyen_order_number}
$.ajax({url:url,type:"POST",data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(response){n.payment.handleAdyenServerResponse(response,component);},error:function(data){if(!('ignore'in data.responseJSON.result))
{n.payment.handleAdyenErrorResponses(data);$('#adyen-modal').modal('hide');}}});},handleAdyenServerResponse(response,component){if(response.action){$("#adyen-modal-body").remove();$("#adyen-modal-content").append('<div class="modal-body" id="adyen-modal-body"></div>');n.payment.checkout_adyen.createFromAction(response.action,n.payment.threeDSConfiguration).mount('#adyen-modal-body');$('#adyen-modal').modal('show');if(response.action.paymentMethodType=='multibanco')
{$("#adyen-modal-button").show();}}else{n.payment.handleAdyenFinalState(response);}},handleAdyenFinalState:function(result){ok_codes=['Authorised','Pending','Received','PresentToShopper'];ko_codes=['Error','Refused'];if(ko_codes.includes(result.resultCode))
{var displayError=document.getElementById('adyen-errors');displayError.textContent=result.refusalReason;sendEventErrorPayment('Adyen');n.payment.sendSubmit(false);}
else if(ok_codes.includes(result.resultCode))
{window.location.href=n.payment.thankURL;}},initAdyen:function(){n.payment.threeDSConfiguration={size:'01'}},adyenConfiguration:function(){return{locale:n.payment.adyenLanguage,showPayButton:false,environment:n.payment.adyenPlatform,clientKey:n.payment.adyenClientKey,paymentMethodsResponse:n.payment.adyenPaymentMethods,onChange:n.payment.handleAdyenOnChange,onSubmit:n.payment.handleAdyenOnSubmit,onAdditionalDetails:n.payment.handleAdyenOnAdditionalDetails,onError:n.payment.handleAdyenOnError,}},getMethodNameInAdyen:function(method){var result=method;for(const[key_method,adyen_method]of Object.entries(n.payment.adyenSupportedMethods)){if(method.toLowerCase()==adyen_method.toLowerCase())
{result=adyen_method;break;}}
return result;},initAdyenComponents:function(){n.payment.checkout_adyen=new AdyenCheckout(n.payment.adyenConfiguration());var selected_payment_method=n.payment.getPaymentMethodSelected();n.payment.adyenComponents=[]
for(var i=0;i<n.payment.adyenSupportedMethods.length;i++)
{var method=n.payment.adyenSupportedMethods[i];n.payment.initAdyenComponent(method);}},initAdyenComponent:function(method){var method=n.payment.getMethodNameInAdyen(method);var selected_payment_method=n.payment.getPaymentMethodSelected();var id_div_component="#component-container-"+method;try
{$("#payment_method_adyen_"+method.toLowerCase()).parent().show();var adyenComponent=n.payment.checkout_adyen.create(method).mount(id_div_component);n.payment.adyenComponents['adyen_'+method.toLowerCase()]=adyenComponent;adyenComponent.update(adyenComponent.props);if(selected_payment_method&&selected_payment_method.toLowerCase()=='adyen_'+method.toLowerCase())
{$(id_div_component).show();}
else
{$(id_div_component).hide();}}
catch(e)
{$("#payment_method_adyen_"+method.toLowerCase()).parent().hide();console.log(e);}},updateAdyenComponents:function(){for(const[key_method,component]of Object.entries(n.payment.adyenComponents))
{n.payment.updateAdyenComponent(component);}},updateAdyenComponent:function(adyenComponent){try
{adyenComponent.update(adyenComponent.props);}
catch(e)
{console.log(e);}},hideAllPaymentMethodOptions:function(unmount){if(unmount&&n.payment.stripeCard){n.payment.stripeCard.unmount('#card-element');n.payment.stripeCard._empty=true;}
if(unmount&&n.payment.stripeIdealBank){n.payment.stripeIdealBank.unmount('#ideal-bank-element');}
var elements=document.getElementsByClassName('payment_method');for(var i=0;i<elements.length;i++){elements[i].style.display="none";if(elements[i].id.includes("adyen_"))
{var id_div_component="#component-container-"+elements[i].id.replace('choice_','').replace('adyen_','');$(id_div_component).hide();}}},getPaymentMethodSelected(){var select_payment_method=document.querySelector('input[name = payment_method]:checked');if(select_payment_method)
return select_payment_method.value;else
return null;},setPaymentMethod:function(method_id){if(n.payment.stripeCard){if(method_id==="stripe_card"){n.payment.stripeCard.mount('#card-element');}else{n.payment.stripeCard.unmount('#card-element');n.payment.stripeCard._empty=true;}
document.getElementById('card-errors').textContent='';}
if(n.payment.stripeIdealBank){if(method_id==='stripe_ideal'){n.payment.stripeIdealBank.mount('#ideal-bank-element');}else{n.payment.stripeCard.unmount('#ideal-bank-element');}}
if(n.payment.sequraEnabled&&(!method_id.includes("sequra"))){n.payment.check_sequra_order_status("delete_sequra");}
if(n.payment.realexEnabled){document.getElementById('realex-errors').textContent='';}
if(document.getElementById('oney-errors'))
{document.getElementById('oney-errors').textContent='';}
if(document.getElementById('sofort-errors'))
{document.getElementById('sofort-errors').textContent='';}
if(document.getElementById('giropay-errors'))
{document.getElementById('giropay-errors').textContent='';}
if(document.getElementById('adyen-errors'))
{document.getElementById('adyen-errors').textContent='';document.getElementById('adyen-errors').classList.remove('d-block');}
n.payment.hideAllPaymentMethodOptions(false);var choice_element=document.getElementById("choice_"+method_id);if(choice_element){var payment_element=document.getElementById("payment_method_"+method_id);if(payment_element){var description=$(payment_element).data('description');if(description){$(choice_element).find('.payment_description').html(description);}
n.payment.scrollToSelectedField();};choice_element.style.display="block";}
if(method_id==="paypal_checkout"){jQuery('#checkout_submit').hide();var total_element=$('#shippingModule');if(total_element){var order_total=parseFloat($(total_element).data('order-total').toString().replace(/,/g,'.'));if(order_total>=n.payment.thresholdBasketTotal&&!n.payment.hasCustomerVat()){jQuery('#paypal-before-button').removeClass("d-none");jQuery('#paypal-before-button').on('click',function(){n.address.openCustomerIDPopup();});}else{jQuery('.paypal-wrapper').removeClass("d-none");}
n.payment.scrollToSelectedField();}else{console.log("KO total-price");}}
if(method_id!="paypal_checkout"){jQuery('.paypal-wrapper').addClass("d-none");jQuery('#paypal-before-button').addClass("d-none");jQuery('#checkout_submit').show();}
if(method_id=="oney")
{jQuery("#oney_modalities").show();n.payment.scrollToSelectedField();}
else
{jQuery("#oney_modalities").hide();$('[name=oney_method]:checked').prop('checked',false);n.payment.scrollToSelectedField();}
if(method_id=="adyen_tpv")
{jQuery("#adyen_tpv_terminals").show();n.payment.scrollToSelectedField();}
else
{jQuery("#adyen_tpv_terminals").hide();$('[name=adyen_terminal]:checked').prop('checked',false);n.payment.scrollToSelectedField();}
var no_preview=["bank_transfer","stripe_multibanco","paypal_checkout","sequra_pay","sequra_part_payment","sequra_split_three","sequra_campaign","realex_card","adyen_kcp_banktransfer"];if(no_preview.includes(method_id))
{jQuery('input[name="action"]').val('place_order');}
else
{jQuery('input[name="action"]').val('payment_details');}
n.payment.ajax.setPaymentMethod(method_id);n.status.setPaymentMethod();},mountPaymentMethod:function(data,payment_method){n.status.updatePaymentStatus();n.payment.initButtonMethods();n.basket.repaintBasket(payment_method);},resetPaymentMethod:function(){var payment_method=document.querySelector('input[name = payment_method]:checked');if(payment_method){payment_method.checked=false;}
n.payment.hideAllPaymentMethodOptions(true);n.payment.ajax.resetPaymentMethod();},scrollToSelectedField:function(){document.querySelector('#payment_details_group').scrollIntoView(true,{behavior:'smooth'});},ajax:{resetPaymentMethod:function(){n.payment.ajax.request({});},setPaymentMethod:function(method_id,params){if(typeof params==='undefined'){params={};}
var data={'method_id':method_id,'params':params};n.payment.ajax.request(data,n.payment.mountPaymentMethod,'','','',method_id);},request:function(data,callback_success,callback_error,messages_id,messages_type,payment_method){$.ajax({url:n.payment.url,type:"POST",data:JSON.stringify({'type':'payment_method','data':data}),dataType:'html',success:function(data){if(callback_success){callback_success(data,payment_method);}},error:function(data){console.log('KO payment method');if(callback_error){callback_error(data);}else if(n.reloadOnAjaxError===true){window.location.href=n.payment.url;}}});}}};n.basket={init:function(options){if(typeof options==='undefined'){options={'basketURL':document.URL,'addProductURL':document.URL,'addVoucherURL':document.URL};}
n.basket.url=options.basketURL||document.URL;n.basket.addProductUrl=options.addProductURL||document.URL;n.basket.addVoucherUrl=options.addVoucherURL||document.URL;n.basket.mountBasketId=options.mountBasketId||'basket_group';n.basket.mode=options.basketMode||'checkout';n.basket.mobilePositionCart();n.basket.initEvents();n.basket.EECheckoutProducts();if(n.basket.mode==='mini-cart'){n.basket.initEventsMinicart();}},EECheckoutProducts:function(){var productImpressions=[];if(jQuery('[data-checkout-product-list]').length>0)
{jQuery('[data-checkout-product-list]').each(function()
{productImpressions.push({'event':jQuery(this).data('checkout-product-event'),'name':jQuery(this).data('checkout-product-name'),'id':jQuery(this).data('checkout-product-sku'),'price':jQuery(this).data('checkout-product-price'),'category':jQuery(this).data('checkout-product-category'),'variant':jQuery(this).data('checkout-product-variant'),'quantity':jQuery(this).data('checkout-product-quantity'),});});}
return productImpressions;},initEvents:function(){$('.cart-items').one("click",".cart-body .product-content .delete",function(){n.basket.deleteBasketLine($(this));var productRemove=[];jQuery(this).each(function()
{productRemove.push({'id':jQuery(this).data('product-sku'),'name':jQuery(this).data('product-name'),'price':jQuery(this).data('product-price'),'category':jQuery(this).data('product-category'),'variant':jQuery(this).data('product-variant'),'quantity':jQuery(this).data('product-quantity')});});removeFromCart(this);});$('.cart-items').one("click",".cart-body .product-content .quantity-js .plus",function(){var productSum=[];var i=1;n.basket.toggleDisableQuantityButtons();var input=jQuery(this).parent().find('.mini-cart-quantity');var step=input.attr('step');jQuery(this).each(function()
{productSum.push({'id':jQuery(this).data('product-sku'),'name':jQuery(this).data('product-name'),'price':jQuery(this).data('product-price'),'category':jQuery(this).data('product-category'),'variant':jQuery(this).data('product-variant'),'quantity':jQuery(this).data('product-quantity')+step});});i++;return n.basket.addBasketLineQuantity($(this));});$('.cart-items').one("click",".cart-body .product-content .quantity-js .minus",function(){n.basket.toggleDisableQuantityButtons();var productRest=[];var i=-1;jQuery(this).each(function()
{productRest.push({'id':jQuery(this).data('product-sku'),'name':jQuery(this).data('product-name'),'price':jQuery(this).data('product-price'),'category':jQuery(this).data('product-category'),'variant':jQuery(this).data('product-variant'),'quantity':jQuery(this).data('product-quantity')+i});});i++;removeFromCart(this);return n.basket.substractBasketLineQuantity($(this));});$('.cart-items').on("keyup",".cart-body .product-content .quantity-js input",function(){n.basket.updateBasketLineQuantity($(this));});$('.cart-items').on("click",".discount-box .add-voucher",function(e){n.basket.addVoucher();});$('.cart-items').on("click",".ok-voucher .remove-voucher",function(e){n.basket.removeVoucher(e);});$('.terms-anchor').click(function(){$('.velo-modal').css('display','flex');$('#'+$(this).data('type')).css('display','flex');$('body').css('height','100vh').css('overflow','hidden');});$('.close-modal').click(function(){$('.velo-modal').css('display','none');$('.term-modals').css('display','none');$('body').css('height','auto');});$(window).on('resize',function(){n.basket.mobilePositionCart();});},initEventsMinicart:function(){$(document).on("click",".add-to-cart",function(e){e.preventDefault();n.basket.addBasketLine($(this));});$(document).on("click","#showCart, #"+n.basket.mountBasketId+" .cart-overlay",function(){var $cart=$("#"+n.basket.mountBasketId);if($cart.hasClass("open")){$cart.removeClass("open");$("html").removeClass('no-scroll');}else{$cart.addClass("open");n.basket.repaintBasket();$("html").addClass('no-scroll');}
return false;});$(document).on("click","#"+n.basket.mountBasketId+" .cart-items .cart-header .close",function(){$("#"+n.basket.mountBasketId).removeClass("open");$("html").removeClass("no-scroll");});},toggleDisableQuantityButtons:function(){const children=$('.quantity-js').children('button');for(const child of children){child.disabled=!child.disabled;}},repaintBasket:function(payment_method){n.basket.ajax.repaintBasket(payment_method);n.status.setCssStyle();},mountBasket:function(data,payment_method){var $cart=$('#cart-content');var $checkoutcart=$('#basket_group');$cart.html(data);if($checkoutcart){$checkoutcart.html(data);}
var total_cart_amount_int=0;if(jQuery('#shippingModule').attr('data-order-total')){total_cart_amount_int=parseInt(jQuery('#shippingModule').attr('data-order-total').replace(',',''));if(n.basket.mode==='checkout'){n.payment.repaint_sequra_methods();n.payment.repaint_oney_methods();if(payment_method&&payment_method.includes("adyen")&&payment_method!="adyen_tpv")
{n.payment.reloadAdyenMethods(payment_method);}}}
n.payment.basket_total_int=total_cart_amount_int;setTimeout(function(){var itemsNumber=Number($cart.find('.items-number').html())||0;let parentElement=document.getElementById('showCart');if(parentElement){if(document.getElementById("cartItems")){document.getElementById("cartItems").remove();}
if(itemsNumber>0){var itemhtml='<p id="cartItems" class="items-number">'+itemsNumber+'</p>';parentElement.innerHTML=parentElement.innerHTML+itemhtml;}}
n.basket.initEvents();if(n.basket.mode==='checkout'){n.payment.initButtonMethods();n.basket.mobilePositionCart();}},10);},noMountBasketAndResetShippingMethod:function(data){if(n.basket.mode==='checkout'){$('#basket_group').empty();$('#basket_group').html(data);n.basket.initEvents();n.shipping.reloadShippingMethod();}else{n.basket.mountBasket(data);}},mountBasketAndOpenMinicart:function(data){$('.add-to-cart').removeClass('disabled');n.basket.mountBasket(data);setTimeout(function(){$('#'+n.basket.mountBasketId).addClass('open');$("html").addClass('no-scroll');},10);window.dataLayer=window.dataLayer||[];window.dataLayer.push({'event':'autoOpenBasket'});},addBasketLineQuantity:function(element){var $container=$(element).parents(".quantity-js");if(!$(element).hasClass("disabled")){$container.find(".minus").removeClass("disabled");var $input=$container.find("input");var $max=$container.find('input').attr('max');var $step=$container.find('input').attr('step');var newQuantity=Number($input.val())+Number($step);if(newQuantity<=$max){$input.val(newQuantity);var $product=$(element).closest('.product');var lineId=$product.data('line-id');n.basket.ajax.updateLine(lineId,newQuantity);}else{$container.addClass("disabled");$(this).addClass("disabled");}}},substractBasketLineQuantity:function(element){var $container=$(element).parents(".quantity-js");if(!$(element).hasClass("disabled")){$container.removeClass("disabled");$container.find(".plus").removeClass("disabled");var $input=$container.find("input");var $step=$container.find('input').attr('step');var currentQuantity=Number($input.val());var newQuantity=currentQuantity-Number($step);var $product=$(element).closest('.product');var lineId=$product.data('line-id');if(newQuantity<1){$(element).addClass("disabled");n.basket.ajax.updateLine(lineId,currentQuantity);}else{$input.val(newQuantity);$(element).removeClass("disabled");n.basket.ajax.updateLine(lineId,newQuantity);}}},updateBasketLineQuantity:function(element){var $input=$(element);var $container=$(element).parents(".quantity-js");var newQuantity=Number($input.val());if(newQuantity>=20){$input.val(20);$container.find(".plus").addClass("disabled");}else{$container.find(".plus").removeClass("disabled");}
if(newQuantity<=1){$input.val(1);$container.find(".minus").addClass("disabled");}else{$container.find(".minus").removeClass("disabled");var $product=$(element).closest('.product');var lineId=$product.data('line-id');n.basket.ajax.updateLine(lineId,newQuantity);}},deleteBasketLine:function(element){var $product=$(element).closest('.product');var lineId=$product.data('line-id');n.basket.ajax.deleteLine(lineId);},addBasketLine:function(element){if($(element).hasClass('disabled'))
return;$(element).addClass('disabled');var productId=$(element).data('product-id');var productUrl=$(element).data('product-url');var quantity=Number($(element).parent().find('input[name$="quantity"]').val());n.basket.ajax.addLine(productId,quantity);},addVoucher:function(){var coupon_code=$('.input-coupon').val();$('#coupon-msgs').text("");if(coupon_code){n.basket.ajax.addVoucher(coupon_code);}},removeVoucher:function(e){var code=$(e.currentTarget).data('voucher-code');if(code){n.basket.ajax.removeVoucher(code);}},mobilePositionCart:function(){var windowsize=$(window).width();if(windowsize<=991){$('#cart-mobile-pos').append($('#basket_group'));if(!$('#total-price-mobile').length){var totalPrice=$('#totalPriceBox').data('order-total');$('.cart-header .title').append('<i class="icon-ka icon-arrow" id="cart-collapse"></i><span id="total-price-mobile">'+totalPrice+'</span>');$('#cart-collapse').on('click',function(){n.basket.openCart();});}}else if($('#basket_group').parent('#cart-mobile-pos').length){$('#cart-desktop-pos').append($('#basket_group'));if($('.cart-body').hasClass('collapsed')){$('.cart-body').removeClass('collapsed');$('.cart-footer').removeClass('collapsed');document.getElementById('openToAddDiscount').style.display='none';}
if($('#total-price-mobile').length){$('#cart-collapse').unbind('click');$('#total-price-mobile').remove();$('#cart-collapse').remove();document.getElementById('openToAddDiscount').style.display='block';}}},openCart:function(){if($('.cart-body').hasClass('collapsed')){$('#basket_group').removeClass('sticky');$('#basket_group').addClass('open');$('.cart-body, .cart-footer').removeClass('collapsed');$('.cart-header').addClass('gray-bg');}else{$('.cart-body, .cart-footer').addClass('collapsed');$('.cart-header').removeClass('gray-bg');$('#basket_group').addClass('sticky');$('#basket_group').removeClass('open');}},getShippingDiscount:function(){const cartBox=document.getElementById('cart');const shippingBox=document.getElementById('shippingModule');const toDiscountBox=document.getElementById('toDiscount');const discountBox=document.getElementById('Discount');const countryCode=shippingBox.getAttribute('data-country');const orderTotal=parseFloat(shippingBox.getAttribute('data-order-total'));const discountGoal=document.getElementById('discountGoal');const valueOfBar=document.getElementById('barValue');const countryShipping=shippingPrices(countryCode);const limitToShow=countryShipping+100;const minOrderToShow=countryShipping-100;if(orderTotal>minOrderToShow&&orderTotal<limitToShow&&countryShipping){shippingBox.classList.add('shipping-module-space');if(cartBox){cartBox.classList.add('has-shipping-module');}
if(orderTotal<countryShipping){toDiscountBox.style.display='block';discountGoal.innerHTML=countryShipping-orderTotal;var valueToBar=(orderTotal*100)/countryShipping;setInterval(()=>{valueOfBar.style.width=valueToBar+"%";},200);}else{toDiscountBox.style.display='none';discountBox.style.display='block';discountBox.classList.add('animate');}}},ajax:{addLine:function(productId,quantity){var data={'action':'addLine','product_id':productId,'quantity':quantity};n.basket.ajax.request(data,n.basket.mountBasketAndOpenMinicart,'','mini-cart-msgs','inline');},updateLine:function(lineId,newQuantity){var data={'action':'updateLine','line_id':lineId,'quantity':newQuantity};n.basket.ajax.request(data,(data)=>{n.basket.toggleDisableQuantityButtons();return n.basket.noMountBasketAndResetShippingMethod(data);});},deleteLine:function(lineId){var data={'action':'deleteLine','line_id':lineId};n.basket.ajax.request(data,n.basket.noMountBasketAndResetShippingMethod);},addVoucher:function(code){var data={'action':'addVoucher','code':code};n.basket.ajax.request(data,n.basket.mountBasket,'','coupon-msgs','inline');},removeVoucher:function(code){var data={'action':'removeVoucher','code':code};n.basket.ajax.request(data,n.basket.mountBasket,'','coupon-msgs','inline');},repaintBasket:function(payment_method){var data={'action':'repaintBasket'};n.basket.ajax.request(data,n.basket.mountBasket,'','','',payment_method);},repaintBasketAndOpen:function(){var data={'action':'repaintBasket'};n.basket.ajax.request(data,n.basket.mountBasketAndOpenMinicart,'','mini-cart-msgs','inline');},request:function(data,callback_success,callback_error,messages_id,messages_type,payment_method){$.ajax({url:n.basket.url,type:"POST",data:JSON.stringify({'type':'basket','data':data}),dataType:'json',success:function(data){if(data.redirect_url&&n.basket.mode==='checkout'){window.location.href=data.redirect_url;}else{if(callback_success){callback_success(data.html,payment_method);if(document.getElementById('shippingModule')!==null){n.basket.getShippingDiscount();}}
if(messages_id){n.messages.showMessages(messages_id,messages_type,data.messages);if(data.messages.error){$('.input-coupon').addClass('error');}else{$('.input-coupon').removeClass('error');$('#coupon-msgs').addClass('normal');}}}},error:function(data){console.log('KO basket');if(callback_error){callback_error(data.html);}else if(n.reloadOnAjaxError===true){window.location.href=n.basket.url;}}});}}};n.conditions={init:function(options){n.conditions.termsAndConditionsId='id_terms_and_conditions_accepted';n.conditions.privatePolicyId='id_privacy_policy_accepted';n.conditions.initEvents();},initEvents:function(){$('#'+n.conditions.termsAndConditionsId).on("click",function(){n.conditions.setConditions();});$('#'+n.conditions.privatePolicyId).on("click",function(){n.conditions.setConditions();});},setConditions:function(){if(n.status.enabled[n.payment.mountPaymentMethodId]){n.status.setPaymentMethod();}},isChecked:function(){var isTermsAndConditionsChecked=$('#'+n.conditions.termsAndConditionsId).prop('checked');var isPrivatePolicyChecked=$('#'+n.conditions.privatePolicyId).prop('checked');return isTermsAndConditionsChecked&&isPrivatePolicyChecked;}}
n.status={init:function(){n.status.buttonSubmitId='checkout_submit';n.status.buttonNextStepAddres='billing-address-block .text-center .button';n.status.enabled={};n.status.enabled[n.address.mountBillingAddressId]=false;n.status.enabled[n.address.mountBillingAddressNewFormId]=false;n.status.enabled[n.address.mountShippingAddressId]=false;n.status.enabled[n.address.mountShippingAddressNewFormId]=false;n.status.enabled[n.basket.mountBasketId]=true;n.status.enabled[n.conditions.termsAndConditionsId]=true;n.status.enabled[n.conditions.privatePolicyId]=true;n.status.enabled[n.conditions.newsletterSubscriptionId]=true;n.status.enabled[n.status.buttonSubmitId]=false;n.status.enabled[n.status.buttonNextStepAddres]=false;var login_button=document.getElementById(n.auth.loginSubmitId);var registration_button=document.getElementById(n.auth.registrationSubmitId);if(login_button===null&&registration_button===null)
n.status.setUser();n.status.setCssStyle();},setUser:function(){n.status.enabled[n.address.mountBillingAddressId]=true;n.status.enabled[n.address.mountBillingAddressNewFormId]=true;n.status.enabled[n.address.mountShippingAddressId]=true;n.status.enabled[n.address.mountShippingAddressNewFormId]=true;$('.billing-address-block').removeClass('collapsed');var element_selected=document.querySelector('input[name = select_billing_address]');if(element_selected){}else{n.status.enabled[n.shipping.mountShippingMethodId]=true;}
n.status.enabled[n.status.buttonSubmitId]=false;n.status.setCssStyle();},setUserAddress:function(){n.status.enabled[n.shipping.mountShippingMethodId]=true;n.status.enabled[n.status.buttonSubmitId]=false;n.status.setCssStyle();},checkNextStepShipping:function(){var comment=$('#id_notes_shipping').val();if(typeof comment!='undefined'){n.shipping.setShippingComment(comment);setTimeout(function(){nilo.status.setShippingMethod();},500);}else{nilo.status.setShippingMethod();}
console.log(comment);},setShippingMethod:function(){var enabled=n.status.checkValidSubmit();if(!n.shipping.isDeliveryAllowed())
{return;}
n.utils.updateCollapseBlocks('shipping');checkoutEvent('checkout','3','Shipping');sendEncodedDataFB('AddShippingInfo');n.status.updatePaymentStatus();if(($('[name=payment_method]:checked').length)&&($('[name=payment_method]:checked').val()!="paypal_checkout")){n.status.enabled[n.status.buttonSubmitId]=enabled;}else{n.status.enabled[n.status.buttonSubmitId]=false;}
n.status.setCssStyle();},checkValidSubmit:function(){var enabled=n.conditions.isChecked();var selected_payment_method=$('[name=payment_method]:checked');enabled=enabled&&(selected_payment_method.length==1)
if((selected_payment_method.length)&&(selected_payment_method.val()=="stripe_card"))
{enabled=enabled&&!n.payment.stripeCard._empty&&!document.getElementById('card-errors').textContent;}
if((selected_payment_method.length)&&(selected_payment_method.val()=="oney"))
{enabled=enabled&&($('[name=oney_method]:checked').length>0);}
if((selected_payment_method.length)&&(selected_payment_method.val()=="adyen_tpv"))
{enabled=enabled&&($('[name=adyen_terminal]:checked').length>0);}
if((selected_payment_method.length)&&(selected_payment_method.val().includes('adyen'))&&(selected_payment_method.val()!='adyen_tpv'))
{try
{var adyenComponent=n.payment.adyenComponents[selected_payment_method.val()];enabled=enabled&&adyenComponent.isValid;}
catch(e)
{enabled=false;console.log(e);}}
return enabled;},setPaymentMethod:function(){var enabled=n.status.checkValidSubmit();var selected_payment_method=$('[name=payment_method]:checked');if((selected_payment_method.length)&&(selected_payment_method.val()!="paypal_checkout")){n.status.enabled[n.status.buttonSubmitId]=enabled;}else if(enabled){jQuery('.paypal-wrapper').removeClass('cancel-button');jQuery('#paypal-before-button').removeClass('cancel-button');}else if(!enabled){jQuery('.paypal-wrapper').addClass('cancel-button');jQuery('#paypal-before-button').addClass('cancel-button');}
n.status.setCssStyle();},updatePaymentStatus:function(){n.status.enabled[n.payment.mountPaymentMethodId]=n.shipping.isDeliveryAllowed();n.status.setCssStyle();},mountBasket:function(){n.status.setCssStyle();},setCssStyle:function(){$.each(n.status.enabled,function(key,value){var element=document.getElementById(key);if(element){if(value){$(element).removeClass("disabled");$(element).prop('disabled',false);$(element).find('input').each(function(){if(!$(this).hasClass("check-address")&&!$(this).hasClass("mini-cart-quantity")){$(this).removeClass("disabled");$(this).prop('disabled',false);}});}else{$(element).addClass("disabled");$(element).prop('disabled',true);$(element).find('input').each(function(){if(!$(this).hasClass("check-address")){$(this).addClass("disabled");$(this).prop('disabled',true);}});}}});}};n.init=function(options){if(typeof options==='undefined'){options={'addressURL':document.URL,'shippingURL':document.URL,'paymentURL':document.URL,'basketURL':document.URL};}
n.user_is_authenticated=(options.user_is_authenticated=="True");n.is_company=(options.is_company=="True");n.reloadOnAjaxError=options.reloadOnAjaxError||true;n.auth.init();n.address.init(options);n.shipping.init(options);n.payment.init(options);n.basket.init(options);n.conditions.init();n.status.init();n.auth.checkAnonymousEnabled();n.payment.resetPaymentMethod();};return n;})(nilo||{},jQuery);let placeSearch;let autocomplete;let setCountry;const countryField=document.getElementById('id_country_billing');const componentForm={"route":"id_line1_billing","locality":"id_line4_billing","postal_code":"id_postcode_billing","administrative_area_level_2":"id_state_billing","street_number":'street',};function initAutocomplete(){setCountry=countryField.value;const inputField=document.getElementById("id_line1_billing");const options={types:["geocode"],componentRestrictions:{country:setCountry}};autocomplete=new google.maps.places.Autocomplete(inputField,options);countryField.addEventListener("change",()=>{setCountry=countryField.value;autocomplete.setComponentRestrictions({country:setCountry})
for(const valueField in componentForm){let fieldId=componentForm[valueField];if(fieldId!=='street'){document.getElementById(fieldId).value=''}}});autocomplete.setFields(["address_component"]);autocomplete.addListener("place_changed",fillInAddress);}
function fillInAddress(){const place=autocomplete.getPlace();const adressN=[];let adressField;for(const valueField of place.address_components){let fieldId=componentForm[valueField.types[0]];switch(fieldId){case'id_line1_billing':adressN.push(valueField.long_name);break;case'street':adressN.push(valueField.long_name);break;case'id_line4_billing':case'id_postcode_billing':case'id_state_billing':document.getElementById(fieldId).value=valueField.long_name;break;}}
if(adressN.length>1){adressField=adressN[1]+', '+adressN[0];}else{adressField=adressN[0];}
document.getElementById('id_line1_billing').value=adressField;}
function geolocate(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition((position)=>{const geolocation={lat:position.coords.latitude,lng:position.coords.longitude,};const circle=new google.maps.Circle({center:geolocation,radius:position.coords.accuracy,});autocomplete.setBounds(circle.getBounds());});}};const showIsCompanyFields=()=>{const checkboxIsCompany=document.getElementById('id_is_company_billing');const nifField=document.getElementById('nif_group');const companyField=document.getElementById('company_group');const countryVatField=document.getElementsByClassName('form-country_vat_validation')[1];if(checkboxIsCompany.checked){nifField.style.display='block';companyField.style.display='block';countryVatField.style.display='block';}
checkboxIsCompany.addEventListener('click',toggle);function toggle(){if(checkboxIsCompany.checked){nifField.style.display='block';companyField.style.display='block';countryVatField.style.display='block';}else{nifField.style.display='none';companyField.style.display='none';countryVatField.style.display='none';}}}
const addTradedoublerPixel=(data)=>{const srcConst='https://tbs.tradedoubler.com/report?';const srcParams='organization='+data.tdOrganization+'&event='+data.tdEvent+'&orderNumber='+data.orderNumber+'&orderValue='+data.orderValue+'&currency='+data.currency+'&tduid='+sessionStorage.getItem('tduid');const pixel=document.createElement('img');pixel.src=srcConst+srcParams;document.getElementById('kavehome-body').appendChild(pixel);}
if(typeof tradedoublerPixelData!=='undefined'&&sessionStorage.getItem('tduid')!==null){addEventListener('DOMContentLoaded',addTradedoublerPixel(tradedoublerPixelData));}
const sendEventErrorPayment=(paymentMode='')=>{window.dataLayer=window.dataLayer||[];window.dataLayer.push({'event':'eventGA','eventGA':{'action':'Error','category':'Checkout Events','label':'Payment Error: '+paymentMode},'errorPayment':true});}
const openToAddDiscount=document.getElementById('openToAddDiscount');if(openToAddDiscount){openToAddDiscount.addEventListener('click',()=>{document.getElementById('basket_group').classList.remove('sticky');document.getElementById('cartBodyMiniCart').classList.remove('collapsed');document.getElementById('cartFooterMiniCart').classList.remove('collapsed');document.getElementById('basket_group').classList.add('open');document.getElementById('discountCheck').click();openToAddDiscount.style.display='none';})};var wishlist=(function(n,$){n.session={init:function(options){if(typeof options=='undefined'){options={'wishlistURL':document.URL};}
n.session.url=options.wishlistURL||document.URL;n.session.isAuthenticated=options.isAuthenticated||false;if(n.session.isAuthenticated){n.session.updateHeaderCounter();n.session.updateAllHearts();}else{n.paint.fullAllGuestHearts();}
n.session.initEvents();},initEvents:function(){$(document).on('click','.open_move_wishlist',function(e){e.preventDefault();if(n.session.isAuthenticated){n.ajax.getMoveToWishlistDialog($(this),'open');}else{n.session.addToGuestWishlist($(this));}});$(document).on('click','.copy-to-wishlist',function(e){e.preventDefault();n.ajax.getMoveToWishlistDialog($(this),'move');});$(document).on('click','.add_wishlist',function(e){e.preventDefault();addToWishlist(this);if(n.session.isAuthenticated){n.session.addToWishlist($(this));}else{n.session.addToGuestWishlist($(this));}});$(document).on('click','.remove-to-wishlist',function(e){e.preventDefault();removeFromWishlist(this);n.session.removeFromWishlist($(this));});$(document).on('click','[name="close_delete_wishlist"]',function(e){e.preventDefault();n.session.closeDeleteWishlistDialog($(this));});$(document).on('click','.cancelled-popup-close',function(){$('.cancelled-popup-overlay').removeClass('show');$('.cancelled-popup').removeClass('show');$('.shadow-ip').removeClass('show');$('#wishlist-popup').empty();n.session.updateHeaderCounter();});$(document).on('click','[name="createList"]',function(){var $this=$(this);var url=$(this).data('url');$.get(url,function(data){$this.siblings('.form-create-list').html(data)
$this.siblings('.form-create-list').removeClass('d-none');$this.addClass('d-none');});});$(document).on('click','.cancel-create-list',function(e){e.preventDefault();$('.form-create-list').addClass('d-none');$('.createList').removeClass('d-none');});$(document).on('click','.wishlist-form-button',function(e){e.preventDefault();var product=$(this).data('product');var url=$('[name="wishlist-form"]').attr('action');var data={"name":$('[name="name"]').val()};$.post(url,data,function(data){if(!product){if($('#wishlists-list-content').length>0){if($("[name='cancelled-popup-create-list']").length>0){$("[name='cancelled-popup-create-list']").remove();}
$('#wishlists-list-content').html(data);}else{$('#wishlist-detail-container-outer').html(data);}
$('.cancelled-popup-overlay').removeClass('show');$('.cancelled-popup').removeClass('show');}else{var name_overlay="move-popup-overlay-"+product+"";$('#wishlist-popup').html(data);$('[name="'+name_overlay+'"]').addClass('show');$('#move-popup').addClass('show');}
n.session.updateHeaderCounter();})});$(document).on('click','.open-edit-wishlist',function(e){e.preventDefault();var url=$(this).attr('href');$.get(url,function(data){$('.edit-wishlist-body').html(data);$('#overlay-wishlist').addClass('show');$('[name="edit-popup"]').addClass('show');n.session.updateHeaderCounter();});});$(document).on('click','.open-delete-wishlist',function(e){e.preventDefault();$('body').append($('[name="delete-popup"]'));$('#overlay-wishlist').addClass('show');$('[name="delete-popup"]').addClass('show');});},addToWishlist:function(element){var $this=element;var outer=$this.parent('.product-outer');if(outer.length>0){n.paint.fullHeart($(outer).find('.heart-wishlist'));}else{n.paint.fullHeart($this);}
n.ajax.getMoveToWishlistDialog($this,'move');},addToGuestWishlist:function(element){if(localStorage.getItem('favorites')){var num_wishlist=localStorage.getItem('favorites').split(',');}
if(element.children('span').attr('class')=='caret icon-heart-full'){n.paint.emptyHeart(element);var index=num_wishlist.indexOf(element.data('product').toString());num_wishlist.splice(index,1);localStorage.setItem('favorites',num_wishlist);}else{n.paint.fullHeart(element);var old=localStorage.getItem('favorites');if(old){if(!$.isArray(old)){old=[old];}
old.push(element.data('product'))}else{old=element.data('product');}
localStorage.setItem('favorites',old);}
var items=localStorage.getItem('favorites');if(items==""){n.paint.headerGuestCounter([]);}else{n.paint.headerGuestCounter(items.split(','));}},removeFromWishlist:function(element){var product=element.data('product');var url=$(element).attr('onclick');if(element.parent().siblings().children('.remove-to-wishlist').length>0){$.get(url,function(data){$.post(url,function(data){$('#wishlist-popup').html(data);$('#overlay-wishlist').addClass('show');$('#move-popup').addClass('show');n.session.updateHeaderCounter();});});}else{$('#overlay-wishlist').removeClass('show');$('#move-popup').removeClass('show');$.get(url,function(data){$('#wishlist-popup').html(data);$('#overlay-wishlist').addClass('show');$('#remove-popup').addClass('show');n.session.updateHeaderCounter();});}},closeDeleteWishlistDialog:function(element){var product=element.data('product');var url=$('[name="delete-product-wishlist-'+product+'"]').attr('action');var path=window.location.pathname;if(path.indexOf('wishlists')<0&&$('body').attr('id')!='product-detail'){var args={"delete":"last-wishlist"};}else if($('body').attr('id')=='product-detail'){var args={"delete":"in-product"};}else{var args={"delete":"in-wishlist"};}
$.post(url,args,function(data){if(args['delete']=='last-wishlist'){$('.col-lg-3.col-6[data-product="'+product+'"]').html(data);$('#remove-popup').removeClass('show');}else if(args['delete']=="in-wishlist"){$('#wishlist-detail-container-outer').html(data);n.paint.fullAllHearts($('#wishlist-detail-container-outer').data('products'));}
$('#overlay-wishlist').removeClass('show');$('#remove-popup').removeClass('show');n.paint.emptyHeart($(document).find('.heart-wishlist[data-product='+product+']'));n.session.updateHeaderCounter();});},updateHeaderCounter:function(){n.ajax.getCustomerSessionWishlist(n.paint.headerCounter);},updateAllHearts:function(){if(n.session.isAuthenticated){n.ajax.getCustomerSessionWishlist(n.paint.allHearts);}else{n.paint.fullAllGuestHearts();}}};n.ajax={getCustomerSessionWishlist:function(callback_success){n.ajax.request(n.session.url,"GET","",'json',callback_success);},getMoveToWishlistDialog:function(element,action){var url=$(element).attr('onclick');n.ajax.request(url,"GET",{"move":action},'html',n.paint.moveToWishlistDialog);},request:function(request_url,request_type,request_data,request_dataType,callback_success,callback_error){$.ajax({url:request_url,type:request_type,data:request_data,dataType:request_dataType,success:function(data){if(callback_success){callback_success(data);}},error:function(data){console.log('KO wishlist');if(callback_error){callback_error(data);}}});}};n.paint={allHearts:function(data){n.paint.fullAllHearts(data.wishlists_products);},fullAllHearts:function(products){$(document).find('.heart-wishlist').each(function(){var id=$(this).data('product');if(products.includes(id.toString())){n.paint.fullHeart(this);}});},fullAllGuestHearts:function(){if(localStorage.getItem('favorites')){var num_wishlist=localStorage.getItem('favorites').split(',');n.paint.headerGuestCounter(num_wishlist);n.paint.fullAllHearts(num_wishlist);}},fullHeart:function(element){$(element).removeClass("add_wishlist");$(element).removeClass("empty");$(element).addClass("open_move_wishlist");$(element).addClass("full");$(element).find('span').each(function(){$(this).removeClass("icon-heart-empty");$(this).addClass("icon-heart-full");});},emptyHeart:function(element){$(element).removeClass("open_move_wishlist");$(element).removeClass("full");$(element).addClass("add_wishlist");$(element).addClass("empty");$(element).find('span').each(function(){$(this).removeClass("icon-heart-full");$(this).addClass("icon-heart-empty");});},headerCounter:function(data){var total=Object.keys(data.wishlists_by_product).length;n.paint.heartCounter(total);},headerGuestCounter:function(data){n.paint.heartCounter(data.length);},heartCounter:function(total){var parentElement=document.getElementById('showWishlist');if(total>0){var itemhtml='<p class="items-number">'+total+'</p>';parentElement.innerHTML=parentElement.innerHTML+itemhtml;}},moveToWishlistDialog:function(data){$('#wishlist-popup').html(data);$('#overlay-wishlist').addClass('show');$('#move-popup').addClass('show');n.session.updateHeaderCounter();}};return n;})(wishlist||{},jQuery);;let barData,newDiv,newSpan,newCta,ctaContent,textContent,newContent,diff,days,hours,minutes,seconds;const domContainer=document.getElementById('innerPromo');const getBars=()=>{var store=document.body.dataset.store
var lang=document.body.dataset.lang
fetch(`/kh_promotions/bars/?store=${store}&lang=${lang}`).then((response)=>{if(response.ok){return response.json();}else{return Promise.reject(response);}}).then((data)=>{if(data.count>0){getAllBars(data.results);}}).catch((err)=>{console.warn('Something went wrong.',err);});}
const getAllBars=(data)=>{data.sort((a,b)=>{return a.display_order-b.display_order;});data.forEach(e=>{if(e.is_active){createBar(e);}});}
const createBar=(e)=>{const barName=e.name;newDiv=document.createElement('div');newDiv.classList.add('promo-bar');newDiv.classList.add(barName.replace(/\s/g,"-").toLowerCase());newDiv.style.backgroundColor=e.backgroundColor;newDiv.style.color=e.colorColor;if(e.icon){newDiv.insertAdjacentHTML('beforeend',e.icon);}
if(e.text_1){const textOne=newDiv.appendChild(addElement("span",e.text_1));if(e.cta_text_1&&e.cta_url_1){textOne.appendChild(addElement("a",{'text':e.cta_text_1,'href':e.cta_url_1},barName.replace(/\s/g,"-").toLowerCase()));}}
if(e.text_2){const textTwo=newDiv.appendChild(addElement("span",e.text_2));if(e.cta_text_2&&e.cta_url_2){textTwo.appendChild(addElement("a",{'text':e.cta_text_2,'href':e.cta_url_2},barName.replace(/\s/g,"-").toLowerCase()));}}
if(e.date_countdown){const countElement=document.createElement('div');countElement.classList.add('counter');countElement.appendChild(addElement("counter","days"));countElement.appendChild(addElement("counter","hours"));countElement.appendChild(addElement("counter","minuts"));countElement.appendChild(addElement("counter","seconds"));newDiv.appendChild(countElement);}
domContainer.appendChild(newDiv);if(e.date_countdown){const finaleDate=new Date(e.date_countdown).getTime();timer(finaleDate);}};const addElement=(type,text,title="promoBar")=>{switch(type){case'a':element=document.createElement('a');element.href=text.href;newContent=document.createTextNode(text.text);element.appendChild(newContent);element.dataset.kh="promoBar";element.dataset.category="promoBar";element.dataset.action="Click";element.dataset.label=title;break
case'span':element=document.createElement('span');element.classList.add('span-bar');newContent=document.createTextNode(text);element.appendChild(newContent);break
case'counter':element=document.createElement('span');element.id=text;break
default:console.error("Invalid element "+type+" at promoBar.js");}
return element;}
const timer=(date)=>{setInterval(()=>{const now=new Date().getTime();diff=date-now;days=Math.floor(diff/(1000*60*60*24));hours=Math.floor(diff%(1000*60*60*24)/(1000*60*60));minutes=Math.floor(diff%(1000*60*60)/(1000*60));seconds=Math.floor(diff%(1000*60)/1000);days<=9?days=`${days}`:days;hours<=9?hours=`${hours}`:hours;minutes<=9?minutes=`${minutes}`:minutes;seconds<=9?seconds=`${seconds}`:seconds;document.querySelector('#days').textContent=days+'d';document.querySelector('#hours').textContent=hours+'h';document.querySelector('#minuts').textContent=minutes+'m';document.querySelector('#seconds').textContent=seconds+'s';},1000);};if(domContainer){getBars();};const showPopupEcoPart=()=>{const popUpElement=document.getElementById('popup-ecopart');if(popUpElement){popUpElement.classList.add('show');const closeIcons=document.querySelectorAll('#popup-ecopart .cancelled-popup-close');closeIcons&&[...closeIcons].map(e=>e.onclick=function(){popUpElement.classList.remove('show');});}};